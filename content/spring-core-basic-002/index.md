---
imageEmoji: spring-logo.png
title: ì˜ˆì œ ë§Œë“¤ê¸° - ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ ê¸°ë³¸í¸ 02 | ë§¤ì¼ 1ì‹œê°„ ğŸ‘¨ğŸ»â€ğŸ« 7ì¼ì°¨
date: '2022-10-07 21:48:00'
author: goldggyul
tags: ê°•ì˜
categories: ê°•ì˜
---

> ë³¸ ê²Œì‹œê¸€ì€ [ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8) ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.

#  â˜˜ï¸ ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ ì´í•´1 - ì˜ˆì œ ë§Œë“¤ê¸°

ê·¸ëŸ¼ ì¸í„°í˜ì´ìŠ¤(ì—­í• )ì™€ êµ¬í˜„í•˜ëŠ” ê°ì²´ë¥¼ ë‚˜ëˆ„ì–´ì„œ ê°œë°œì„ í•´ë³´ì

## ğŸ“Œ í”„ë¡œì íŠ¸ ìƒì„±

ìˆœìˆ˜ ìë°”ë¡œë§Œ í• ê±°ë¼ ìŠ¤í”„ë§ì„ ì“°ì§„ ì•Šì§€ë§Œ ì„¸íŒ…í•  ë•Œ ìŠ¤í”„ë§ë¶€íŠ¸ë¥¼ ì´ìš©í•˜ë©´ í¸í•´ì„œ ì¼ë‹¨ ìŠ¤í”„ë§ë¶€íŠ¸ë¡œ ìƒì„±í•˜ì -> [ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„°](https://start.spring.io)

- ìŠ¤í”„ë§ ë¶€íŠ¸ ë²„ì „ì—ì„œ snapshot, m5 ì´ëŸ° ê±´ ì•ˆì •í™”ê°€ ì•„ì§ ì•ˆëœ ê²ƒì´ë‹ˆ ê°€ì¥ ìµœì‹  ì•ˆì •í™”ê°€ ëœ ê±¸ ì„ íƒí•˜ì. (í˜„ì¬ ì‹œì  2.7.4)
- artifactê°€ í”„ë¡œì íŠ¸ ë¹Œë“œëª…ì´ ëœë‹¤.

- ìë°” 11
- dependencyëŠ” ì„ íƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

ìƒì„± í›„ ì¸í…”ë¦¬ì œì´ì—ì„œ ì—´ì–´ì£¼ì. ì´ ë•Œ Preference>Build>Build Tools>Gradleì—ì„œ Build and run, Run testsë¥¼ gradleì´ ì•„ë‹Œ intellijë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•˜ì. ì´ê²Œ ì¢€ ë” ë¹ ë¥´ë‹¤.

## ğŸ“Œ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­

> ### ì—­í• ê³¼ êµ¬í˜„ êµ¬ë¶„í•˜ê¸°!

ìš°ì„  ìš”êµ¬ì‚¬í•­ì€ 3ê°€ì§€ë¡œ `íšŒì›`, `ì£¼ë¬¸`, `í• ì¸ ì •ì±…`ì´ ìˆë‹¤.

### íšŒì›

- íšŒì›ì„ ê°€ì…í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë‘ ê°€ì§€ ë“±ê¸‰ì´ ìˆë‹¤.
- íšŒì› ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ ìˆë‹¤. (ë¯¸í™•ì •)

### ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…

- íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
- íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.
- í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” 1000ì›ì„ í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•´ë‹¬ë¼. (ë‚˜ì¤‘ì— ë³€ê²½ ë  ìˆ˜ ìˆë‹¤.)
- í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. íšŒì‚¬ì˜ ê¸°ë³¸ í• ì¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„ ë¯¸ë£¨ê³  ì‹¶ë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ ë„ ìˆë‹¤. (ë¯¸í™•ì •)

ìš”êµ¬ ì‚¬í•­ì„ ì •ë¦¬í•´ë³´ë©´ íšŒì› ë°ì´í„°ë‚˜, í• ì¸ ì •ì±…ì€ ì•„ì§ ê²°ì •ë˜ì§€ ì•Šì•˜ë‹¤. í•˜ì§€ë§Œ ì•ì—ì„œ ë°°ìš´ ê°ì²´ ì§€í–¥ ì„¤ê³„ ë°©ë²•ëŒ€ë¡œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³  êµ¬í˜„ì²´ë¥¼ ì–¸ì œë“ ì§€ ê°ˆì•„ë¼ìš¸ ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•˜ë©´ ëœë‹¤!

## ğŸ“Œ íšŒì› ë„ë©”ì¸ ì„¤ê³„

íšŒì› ë°ì´í„°ê°€ ì•„ì§ ë¯¸í™•ì •ì´ë¯€ë¡œ, íšŒì› ì €ì¥ì†Œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³  êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì.

### íšŒì› ë„ë©”ì¸ í˜‘ë ¥ ê´€ê³„

![image-20221007221452413](./assets/image-20221007221452413.png)

### íšŒì› í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![image-20221007221507687](./assets/image-20221007221507687.png)

### íšŒì› ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨

ê°ì²´ ê°„ ì°¸ì¡°ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

![image-20221007221536803](./assets/image-20221007221536803.png)

- íšŒì› ì„œë¹„ìŠ¤: `MemberServiceImpl`

ëª©ì ? ì‹¤ì œë¡œ ì„œë²„ê°€ ì‹¤í–‰ ë˜ê³  ëŸ°íƒ€ì„ì— MemberRepositoryì— ì–´ë–¤ êµ¬í˜„ì²´ê°€ ë“¤ì–´ê°ˆ ì§€ëŠ” í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ë§Œìœ¼ë¡œëŠ” ì•Œ ìˆ˜ ì—†ë‹¤. ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤. ë”°ë¼ì„œ íŒë‹¨í•˜ê¸° ì–´ë ¤ìš°ë¯€ë¡œ, ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨ì—ì„œ ì‹¤ì œ ì‚¬ìš©í•˜ëŠ” ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. ì‹¤ì œë¡œ new í•œ ê°ì²´ë“¤ë¼ë¦¬ì˜ ì°¸ì¡°ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ì€ ì •ì , ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨ì€ ë™ì ì¸ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

## ğŸ“Œ íšŒì› ë„ë©”ì¸ ê°œë°œ

- ë‹¨ì¶•í‚¤
  - `Command + Option + V`: ì™¼ìª½ ì„ ì–¸ë¶€ ì±„ìš°ê¸°
  - `Command + Shift + Enter`: í•œ ì¤„ ë§ˆë¬´ë¦¬
  
- Grade

  ```java
  public enum Grade {
      BASIC,
      VIP
  }
  ```

- Member
  ```java
  public class Member {
      private Long id;
      private String name;
      private Grade grade;
  
      // ìƒì„±ìì™€ Getter Setter
  }
  ```
  
- MemberRepository(Interface)
  ```java
  public interface MemberRepository {
      void save(Member member);
      Member findById(Long memberId);
  }
  ```
  
- MemoryMemberRepository(êµ¬í˜„ì²´)
  ```java
  public class MemoryMemberRepository implements MemberRepository {
  
      private static Map<Long, Member> store = new HashMap<>();
  
      @Override
      public void save(Member member) {
          store.put(member.getId(), member);
      }
  
      @Override
      public Member findById(Long memberId) {
          return store.get(memberId);
      }
  }
  ```
  
- MemberService(Interface)
  ```java
  public interface MemberService {
      void join(Member member);
      Member findMember(Long memberId);
  }
  ```
  
- MemberServiceImple(êµ¬í˜„ì²´)
  
  - ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ êµ¬í˜„ì²´ê°€ í•˜ë‚˜ë§Œ ìˆìœ¼ë©´ `ì¸í„°í˜ì´ìŠ¤ëª…+Impl`ì„ ë§ì´ ì‚¬ìš©í•œë‹¤. 
  
  ```java
  public class MemberServiceImpl implements MemberService {
  
      private final MemberRepository memberRepository = new MemoryMemberRepository();
  
      @Override
      public void join(Member member) {
          // ë‹¤í˜•ì„±ì— ì˜í•´ êµ¬í˜„ì²´ì˜ save ë©”ì„œë“œ í˜¸ì¶œë¨
          memberRepository.save(member);
      }
  
      @Override
      public Member findMember(Long memberId) {
          return memberRepository.findById(memberId);
      }
  }
  ```


## ğŸ“Œ íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸

### mainì—ì„œ í…ŒìŠ¤íŠ¸

- ë‹¨ì¶•í‚¤
  - `soutv`: ìœ„ì— ë³€ìˆ˜ ì¤‘ ì„ íƒí•´ì„œ ì¶œë ¥

```java
public class MemberApp {
    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```

ë§¤ë²ˆ mainì—ì„œ ì¶œë ¥í•´ì„œ ëˆˆìœ¼ë¡œ í™•ì¸í•˜ëŠ” ê²ƒì€ ì–´ë µë‹¤.

### í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ì‘ì„±

- í…ŒìŠ¤íŠ¸ ë¬¸ë²•
  - given: ~~í•œ í™˜ê²½ì—ì„œ
  - when: ~~ê²Œ ì£¼ì–´ì¡Œì„ ë•Œ
  - then: ~~ê²Œ ëœë‹¤ 
- ëˆˆìœ¼ë¡œ ê²°ê³¼ë¥¼ ë³´ë©´ì„œ í…ŒìŠ¤íŠ¸ê°€ ì˜ ëëŠ”ì§€ í™•ì¸í•  í•„ìš”ê°€ ì—†ë‹¤.

```java
class MemberServiceTest {

    MemberService memberService = new MemberServiceImpl();

    @Test
    void join() {
        // given
        Member member = new Member(1L, "memberA", Grade.VIP);
        // when
        memberService.join(member);
        Member findMember = memberService.findMember(1L);
        // then
        Assertions.assertThat(member).isEqualTo(findMember);
    }
}
```

----

### ë¬¸ì œì 

- OCP ì›ì¹™ì„ ì§€í‚¤ëŠ”ê°€?

  - êµ¬í˜„ì²´ê°€ ë°”ë€Œë©´ MemberServiceì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

- DIP ì›ì¹™ì„ ì§€í‚¤ëŠ”ê°€?

  - MemberServiceê°€ ì¸í„°í˜ì´ìŠ¤ì¸ MemberRepositoryë¥¼ ì˜ì¡´í•˜ê³  ìˆê¸´ í•˜ì§€ë§Œ êµ¬í˜„ì²´ì¸ MemoryMemberRepositoryê¹Œì§€ ì˜ì¡´í•˜ê³  ìˆë‹¤.

    â¡ï¸ ì¶”ìƒí™”, êµ¬ì²´í™” ë‘˜ë‹¤ ì˜ì¡´í•˜ê³  ìˆë‹¤.

## ğŸ“Œ ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì„¤ê³„

- ìƒí’ˆì€ Itemê°™ì€ ê°ì²´ë¥¼ ë”°ë¡œ ë§Œë“œëŠ” ê²Œ ì•„ë‹ˆê³  ì˜ˆì œë¥¼ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ìƒí’ˆëª…ìœ¼ë¡œ êµ¬ë¶„í•˜ë„ë¡ í•œë‹¤.

### <u>í˜‘ë ¥, ì—­í• , ì±…ì„</u>

![image-20221007232441646](./assets/image-20221007232441646.png)

1. ì£¼ë¬¸ ìƒì„±: í´ë¼ì´ì–¸íŠ¸ëŠ” ì£¼ë¬¸ ì„œë¹„ìŠ¤ì— ì£¼ë¬¸ ìƒì„±ì„ ìš”ì²­í•œë‹¤.
2. íšŒì› ì¡°íšŒ: í• ì¸ì„ ìœ„í•´ì„œëŠ” íšŒì› ë“±ê¸‰ì´ í•„ìš”í•˜ë‹¤. ê·¸ë˜ì„œ ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ì €ì¥ì†Œì—ì„œ íšŒì›ì„ ì¡°íšŒí•œë‹¤.
3. í• ì¸ ì ìš©: ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ë“±ê¸‰ì— ë”°ë¥¸ í• ì¸ ì—¬ë¶€ë¥¼ í• ì¸ ì •ì±…ì— ìœ„ì„í•œë‹¤.
4. ì£¼ë¬¸ ê²°ê³¼ ë°˜í™˜: ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” í• ì¸ ê²°ê³¼ë¥¼ í¬í•¨í•œ ì£¼ë¬¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤

### ì—­í•  + êµ¬í˜„

![image-20221007232420132](./assets/image-20221007232420132.png)

<u>**ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬**</u>í•´ì„œ ììœ ë¡­ê²Œ êµ¬í˜„ ê°ì²´ë¥¼ ì¡°ë¦½í•  ìˆ˜ ìˆê²Œ ì„¤ê³„í–ˆë‹¤. ë•ë¶„ì— íšŒì› ì €ì¥ì†ŒëŠ” ë¬¼ë¡ ì´ê³ , í• ì¸ ì •ì±…ë„ ìœ ì—°í•˜ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

- ì˜ˆë¥¼ ë“¤ì–´ ì§€ê¸ˆì€ 1000ì›ìœ¼ë¡œ ì •ì•¡ í• ì¸ì´ë¼ê³  í•´ë„, ì •ë¥  í• ì¸ìœ¼ë¡œ 10%í• ì¸ ë“± ë‹¤ë¥¸ í• ì¸ ì •ì±…ì„ ë§Œë“¤ì–´ ìœ ì—°í•˜ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

### í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![image-20221007232806335](./assets/image-20221007232806335.png)

### ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨

![image-20221007232908156](./assets/image-20221007232908156.png)

- í˜¹ì‹œ êµ¬í˜„ì²´ê°€ ë°”ë€Œë”ë¼ë„ <u>**ì—­í• ë“¤ì˜ í˜‘ë ¥ ê´€ê³„ë¥¼ ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš©**</u>í•  ìˆ˜ ìˆë‹¤.

## ğŸ“Œ ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ

- ë‹¨ì¶•í‚¤
  - `f2`: ì˜¤ë¥˜ ìˆëŠ” ê³³ìœ¼ë¡œ ì´ë™ (íŒ¨í‚¤ì§€ ì„í¬íŠ¸ ëª»í–ˆì„ ë•Œ f2 ëˆ„ë¥´ê³  ì˜µì…˜ ì—”í„° í•˜ëŠ” ì‹ìœ¼ë¡œ ì´ìš©)
  
- DiscountPolicy(Interface): í• ì¸ ì •ì±…

  - ë©¤ë²„ë¥¼ ì¸ìë¡œ ë°›ê³  ë“±ê¸‰ì— ë”°ë¼ì„œ í• ì¸ë˜ëŠ” ê¸ˆì•¡ì„ ë¦¬í„´

  ```java
  public interface DiscountPolicy {
      /**
       * @return í• ì¸ ëŒ€ìƒ ê¸ˆì•¡
       */
      int discount(Member member, int price);
  }
  ```

- FixDiscountPolicy(êµ¬í˜„ì²´)

  ```java
  public class FixDiscountPolicy implements DiscountPolicy {
  
      private int discountFixAmount = 1000; // 1000ì› ì •ì•¡ í• ì¸
  
      @Override
      public int discount(Member member, int price) {
          // enumì€ ==ìœ¼ë¡œ ë¹„êµ
          // ë“±ê¸‰ë§Œ ë°›ì•„ë„ ëì§€ë§Œ í™•ì¥ì„± ë“±ì„ ê³ ë ¤ .. ì´ê±´ ìƒí™©ì— ë”°ë¼ ê³ ë¯¼í•´ë´ì•¼í•¨
          if (member.getGrade() == Grade.VIP) {
              return discountFixAmount;
          } else {
              return 0;
          }
      }
  }
  ```

- Order

  ```java
  public class Order {
      private Long memberId;
      private String itemName;
      private int itemPrice;
      private int discountPrice;
    
    	// ìƒì„±ì, Getter, Setter, toString
    
      // ê³„ì‚°
      public int calculatePrice() {
          return itemPrice - discountPrice;
      }
  }
  ```

- OrderService(ì¸í„°í˜ì´ìŠ¤)

  ```java
  public interface OrderService {
      // ì£¼ë¬¸ ìƒì„± ë©”ì„¸ì§€ -> ì£¼ë¬¸ ê²°ê³¼ ë°˜í™˜
      Order createOrder(Long memberId, String itemName, int itemPrice);
  }
  ```

- OrderServiceImple(êµ¬í˜„ì²´)

  - ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” ì •ë§ <u>**ì£¼ë¬¸ë§Œ**</u>í•´ì„œ ë„˜ê¸´ë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ í• ì¸ ì •ì±…ì— ë³€í™”ê°€ ìƒê²¨ë„ ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.
  - SRP ì›ì¹™ì´ ì˜ ì§€ì¼œì¡Œë‹¤.

  ```java
  public class OrderServiceImpl implements OrderService {
  
      private final MemberRepository memberRepository = new MemoryMemberRepository();
      private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
  
      @Override
      public Order createOrder(Long memberId, String itemName, int itemPrice) {
          Member member = memberRepository.findById(memberId);
          // í• ì¸ì€ ëª¨ë¥´ê² ê³  ë„¤ê°€ ì•Œì•„ì„œ í•´ì¤˜~ ë‚œ ì •ë§ ì£¼ë¬¸ë§Œ. -> SRP good
          int discountPrice = discountPolicy.discount(member, itemPrice);
          return new Order(memberId, itemName, itemPrice, discountPrice);
      }
  }
  ```

  

## ğŸ“Œ ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸

ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì˜ ë§Œë“œëŠ” ê²ƒì´ êµ‰ì¥íˆ ì¤‘ìš”í•˜ë‹¤.

```java
public class OrderServiceTest {
    MemberService memberService = new MemberServiceImpl();
    OrderService orderService = new OrderServiceImpl();

    @Test
    void createOrder(){
        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        // VIP ì¸ ê²½ìš° 1000ì› í• ì¸ì´ ëëŠ”ê°€
        Order order = orderService.createOrder(memberId, "itemA", 10000);
        Assertions.assertThat(order.getDiscountPrice()).isEqualTo(1000);
    }
}
```

-------

## ğŸ„ ì •ë¦¬

ì—­í• ê³¼ êµ¬í˜„ì„ ì˜ ë¶„ë¦¬í•´ì„œ ë§Œë“¤ì.





```toc
```
