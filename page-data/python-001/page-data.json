{"componentChunkName":"component---src-templates-blog-template-js","path":"/python-001/","result":{"data":{"cur":{"id":"3aa138f2-4633-55c4-9177-d4f8e4d3b459","html":"<p><a href=\"https://www.acmicpc.net/problem/18808\">백준 18808번 스티커 붙이기</a>를 풀다가 2차원 배열 회전을 해야 해서 찾아봤는데.. 다 <code class=\"language-text\">list(zip(*matrix[::-1]))</code>를 쓰는데 처음에 이해가 안가서 정리해봤습니다.</p>\n<h1 id=\"-좌표-이용-회전\" style=\"position:relative;\"><a href=\"#-%EC%A2%8C%ED%91%9C-%EC%9D%B4%EC%9A%A9-%ED%9A%8C%EC%A0%84\" aria-label=\" 좌표 이용 회전 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 좌표 이용 회전</h1>\n<p>우선 배열을 오른쪽으로 90도 회전할 때, 방향이 어떻게 바뀌는 지를 봅시다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLElEQVQoz42Sb2+CMBDG/f5fZ++WLJs4F9l0SgsiUGC1tCLLgGH9Q5F2wSVMdMn2e9H0rn1yz/XaU+dI2Y064TW9i6vna8uG7z6ywl/labFrTq/FjWK/V3Utq0pJeeANSikhBF4Sc75IGKOEiKLoVP6uk2cZcV0aRWvGsOsiAKaGoZQ6VsK00Y02W9tW4Dhlnv+ITx5kXioURuGL7mr36FHzBn38cJcmiQEgjZYIxyOLJLaF/UAIcdGzPCoVvJG+DnQYPMPgdmhMFiyO1xDCeEWBRwdTh4IZsu2qLLvik20WJ8OJPXUI8Gh/7DxZjPNNY1scxnM8Mv13y8S+X2ZZO5Se+ou6KnUYDmG4eh1jDzU9X4ullLVs3q7dtHnOeZqmn0XBt9vf5/xfzr7AF0h4Og2A1dNoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221003145136764\"\n        title=\"image-20221003145136764\"\n        src=\"/static/01e245acf548d84e07e0a7c38c5c7ab1/37523/image-20221003145136764.png\"\n        srcset=\"/static/01e245acf548d84e07e0a7c38c5c7ab1/e9ff0/image-20221003145136764.png 180w,\n/static/01e245acf548d84e07e0a7c38c5c7ab1/f21e7/image-20221003145136764.png 360w,\n/static/01e245acf548d84e07e0a7c38c5c7ab1/37523/image-20221003145136764.png 720w,\n/static/01e245acf548d84e07e0a7c38c5c7ab1/302a4/image-20221003145136764.png 1080w,\n/static/01e245acf548d84e07e0a7c38c5c7ab1/07a9c/image-20221003145136764.png 1440w,\n/static/01e245acf548d84e07e0a7c38c5c7ab1/da893/image-20221003145136764.png 2130w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>기존 배열에서 열은 행이 되고, 행은 뒤집은 순서로 열이 되는 걸 볼 수 있습니다.</p>\n<p>따라서 기존 배열에서 인덱스가 <code class=\"language-text\">[i][j]</code>였다면, 회전한 배열에서 인덱스는 <code class=\"language-text\">[뒤집은 j][i]</code>가 됩니다. 즉, 기존 배열에서 열이 n개 있었다면, <code class=\"language-text\">[n-1-j][i]</code>가 됩니다.</p>\n<p>따라서 회전시키는 함수는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>matrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    n <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>matrix<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 기존 배열의 행 길이</span>\n    m <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>matrix<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 기존 배열의 열 길이</span>\n    rotated <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> n <span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            rotated<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>n<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> matrix<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span> rotated</code></pre></div>\n<ul>\n<li>\n<p>이 때 주의해야할 점은, 회전 배열을 채우기 위해 <code class=\"language-text\">[[0] * n for _ in range(m))]</code>로 채울 때, <code class=\"language-text\">[[0]*n]*m</code>을 하면 안된다는 점입니다. 이런 식으로 만든 리스트는 한 리스트를 레퍼런스하고 있어서, 한 리스트의 내용이 바뀌면 다 같이 바뀌게 된다고 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> li <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">2</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 레퍼런스 하고 있어서 [1][1]도 같이 바뀌어버림</span></code></pre></div>\n<blockquote>\n<h3 id=\"python-docs\" style=\"position:relative;\"><a href=\"#python-docs\" aria-label=\"python docs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range\">Python docs</a></h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> lists <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">3</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> lists\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> lists<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> lists\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>What has happened is that <code class=\"language-text\">[[]]</code> is a one-element list containing an empty list, so all three elements of <code class=\"language-text\">[[]] * 3</code> are references to this single empty list. Modifying any of the elements of <code class=\"language-text\">lists</code> modifies this single list. You can create a list of different lists this way:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> lists <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> lists<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> lists<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> lists<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> lists\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n</blockquote>\n</li>\n</ul>\n<h1 id=\"-code-classlanguage-textlistzipmatrix-1code\" style=\"position:relative;\"><a href=\"#-code-classlanguage-textlistzipmatrix-1code\" aria-label=\" code classlanguage textlistzipmatrix 1code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 <code class=\"language-text\">list(zip(*matrix[::-1]))</code></h1>\n<p>배열을 회전하는 또 다른 방법이 있습니다.</p>\n<p>위 방법에서 봤던 것처럼, <u><strong>열은 행</strong></u>이 되고, <u><strong>행을 뒤집은 것이 열이 된다</strong></u>는 것을 볼 수 있습니다.</p>\n<p>그럼 우선 행을 뒤집어볼까요?</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> matrix  <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> matrix\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> matrix<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>이 상태에서 세우면 됩니다. 그렇다는 건, 원래 행으로 나눠져 있던 애들이 새로운 행을 이루면 됩니다.</p>\n<h2 id=\"code-classlanguage-textzipcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textzipcode\" aria-label=\"code classlanguage textzipcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">zip()</code></h2>\n<p>파이썬의 <code class=\"language-text\">zip()</code>함수에 iterable한 객체를 넣으면, 각 객체를 튜플로 접근할 수 있는 iterator를 반환해줍니다.</p>\n<ul>\n<li>(가장 짧은 인자를 기준으로 데이터가 엮이고 나머지는 버려지기 때문에 길이가 다른 객체를 넣을 때는 주의해야 합니다.)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> letters <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> pair <span class=\"token keyword\">in</span> <span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">,</span> letters<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>pair<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">,</span> letters<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>그럼 위에 배열에서 <u><strong>각 행을 따로 따로 넘겨주면, 각 행의 열 순서대로 묶어서 새로 행을 이룬 iterator</strong></u>를 얻을 수 있겠죠?</p>\n<h2 id=\"packing-unpacking-args\" style=\"position:relative;\"><a href=\"#packing-unpacking-args\" aria-label=\"packing unpacking args permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>packing, unpacking (*args)</h2>\n<p><code class=\"language-text\">*</code> 을 이용하면 packing, unpacking을 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>li<span class=\"token punctuation\">)</span> <span class=\"token comment\"># unpacking</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">def</span> <span class=\"token function\">print_packed</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>li<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># packing 해서 받기</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span> <span class=\"token comment\"># packing된 결과</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>li<span class=\"token punctuation\">)</span> <span class=\"token comment\"># unpacking해서 print </span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> print_packed<span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># print(('a','b','c'))와 같은 결과</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 'a', 'b', 'c'가 하나의 튜플로 packing됨</span>\n<span class=\"token comment\"># print('a','b','c')와 같은 결과</span>\na b c <span class=\"token comment\"># 튜플이 unpacking되어서, print('a', 'b', 'c')</span></code></pre></div>\n<p>이를 이용해서, 2차원 배열을 unpacking하고,  zip을 이용하면 열끼리 묶어서 새로운 행이 된 배열을 얻을 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> matrix\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>matrix<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">zip()</code>은 각 iterable 객체에서 인자들을 튜플로 묶어서  zip object로 반환하므로 <code class=\"language-text\">list()</code>를 이용해서 데이터 타입을 바꿔줍니다.</p>\n<p>여기서 주의할 것은 튜플로 묶어서 반환하므로 2차원 배열 안이 리스트가 아닌 튜플임에 주의해야 합니다. list는 mutable하지만 튜플은 immutable합니다.</p>\n<p>따라서 리스트로 얻고 싶다면 아래와 같이 해야합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> matrix\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>row<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> matrix<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>matrix<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>열마다 묶어야 하므로, 열마다 반복을 합니다. 근데 묶을 때는 행에서 각 열번호의 값을 묶어야 하므로,</p>\n<p>기존 배열의 행을 아래서부터 반복하면서 각 행의 해당 열번호(j)의 값을 받아오고 list로 묶습니다.</p>\n<h1 id=\"-전치\" style=\"position:relative;\"><a href=\"#-%EC%A0%84%EC%B9%98\" aria-label=\" 전치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 전치</h1>\n<p>행 ↔️ 열을 바꾸면 되므로, 행인 애들끼리 다시 열로 묶으면 됩니다. 그러므로 그냥 unpacking 후 zip()을 해주면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>matrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<hr>\n<h1 id=\"-etc\" style=\"position:relative;\"><a href=\"#-etc\" aria-label=\" etc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 etc</h1>\n<h2 id=\"unpacking-이용해서-2차원-배열-예쁘게-출력하기\" style=\"position:relative;\"><a href=\"#unpacking-%EC%9D%B4%EC%9A%A9%ED%95%B4%EC%84%9C-2%EC%B0%A8%EC%9B%90-%EB%B0%B0%EC%97%B4-%EC%98%88%EC%81%98%EA%B2%8C-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0\" aria-label=\"unpacking 이용해서 2차원 배열 예쁘게 출력하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>unpacking(*) 이용해서 2차원 배열 예쁘게 출력하기</h2>\n<p>그냥 배열을 출력하면 다음과 같이 나옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> matrix\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>하지만 행마다 줄바꿈을 해서 출력하고 싶다면? 라이브러리 등등 다른 방법도 있지만 그냥 간단하게 출력하려면 아래와 같이 하면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>matrix<span class=\"token punctuation\">,</span> sep<span class=\"token operator\">=</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>unpacking해서 각 리스트를 넘기고, <u><strong>sep 옵션을 통해 기본 띄어쓰기 대신 엔터를 구분자</strong></u>로 넣으면 됩니다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%A2%8C%ED%91%9C-%EC%9D%B4%EC%9A%A9-%ED%9A%8C%EC%A0%84\">📌 좌표 이용 회전</a></p>\n</li>\n<li>\n<p><a href=\"#-listzipmatrix-1\">📌 <code class=\"language-text\">list(zip(*matrix[::-1]))</code></a></p>\n<ul>\n<li><a href=\"#zip\"><code class=\"language-text\">zip()</code></a></li>\n<li><a href=\"#packing-unpacking-args\">packing, unpacking (*args)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%A0%84%EC%B9%98\">📌 전치</a></p>\n</li>\n<li>\n<p><a href=\"#-etc\">📌 etc</a></p>\n<ul>\n<li><a href=\"#unpacking-%EC%9D%B4%EC%9A%A9%ED%95%B4%EC%84%9C-2%EC%B0%A8%EC%9B%90-%EB%B0%B0%EC%97%B4-%EC%98%88%EC%81%98%EA%B2%8C-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0\">unpacking(*) 이용해서 2차원 배열 예쁘게 출력하기</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"백준 18808번 스티커 붙이기를 풀다가 2차원 배열 회전을 해야 해서 찾아봤는데.. 다 를 쓰는데 처음에 이해가 안가서 정리해봤습니다. 📌 좌표 이용 회전 우선 배열을 오른쪽으로 90도 회전할 때, 방향이 어떻게 바뀌는 지를 봅시다.  기존 배열에서 열은 행이 되고, 행은 뒤집은 순서로 열이 되는 걸 볼 수 있습니다. 따라서 기존 배열에서 인덱스가 였다면, 회전한 배열에서 인덱스는 가 됩니다. 즉, 기존 배열에서 열이 n개 있었다면, 가 됩니다. 따라서 회전시키는 함수는 아래와 같습니다. 이 때 주의해야할 점은, 회전 배열을 채우기 위해 로 채울 때, 을 하면 안된다는 점입니다. 이런 식으로 만든 리스트는 한 리스트를 레퍼런스하고 있어서, 한 리스트의 내용이 바뀌면 다 같이 바뀌게 된다고 합니다. Python docs What has happened is that  is a one-element list containing an empty list, so all three ele…","tableOfContents":"<ul>\n<li>\n<p><a href=\"#-%EC%A2%8C%ED%91%9C-%EC%9D%B4%EC%9A%A9-%ED%9A%8C%EC%A0%84\">📌 좌표 이용 회전</a></p>\n</li>\n<li>\n<p><a href=\"#-code-classlanguage-textlistzipmatrix-1code\">📌 <code class=\"language-text\">list(zip(*matrix[::-1]))</code></a></p>\n<ul>\n<li><a href=\"#code-classlanguage-textzipcode\"><code class=\"language-text\">zip()</code></a></li>\n<li><a href=\"#packing-unpacking-args\">packing, unpacking (*args)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%A0%84%EC%B9%98\">📌 전치</a></p>\n</li>\n<li>\n<p><a href=\"#-etc\">📌 etc</a></p>\n<ul>\n<li><a href=\"#unpacking-%EC%9D%B4%EC%9A%A9%ED%95%B4%EC%84%9C-2%EC%B0%A8%EC%9B%90-%EB%B0%B0%EC%97%B4-%EC%98%88%EC%81%98%EA%B2%8C-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0\">unpacking(*) 이용해서 2차원 배열 예쁘게 출력하기</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"October 03, 2022","title":"파이썬으로 2차원 리스트 회전하기 / 그래서 list(zip(*matrix[::-1]))이 뭔데... | zip(), packing, unpacking (*)","categories":"Python","author":"goldggyul","emoji":null,"imageEmoji":"python-logo-only.png"},"fields":{"slug":"/python-001/"}},"next":{"id":"8f083de2-22b5-57e9-8250-b2c5b65d125e","html":"<h1 id=\"-데드락deadlock--교착-상태\" style=\"position:relative;\"><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BDdeadlock--%EA%B5%90%EC%B0%A9-%EC%83%81%ED%83%9C\" aria-label=\" 데드락deadlock  교착 상태 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📓 데드락(deadlock) | 교착 상태</h1>\n<p>시스템 내의 임계 구역(critical section)이 존재할 경우, 프로세스 간 상호 배제(mutual exclusion)를 보장해야 합니다. 이를 보장하기 위해 잠금(lock)을 사용하다보면 작업이 더 이상 진행되지 않는 교착상태(deadlock)에 빠지는 경우가 있습니다. 이 때 이 데드락은 무엇이고, 왜 발생하고, 어떻게 해결할까요?</p>\n<h2 id=\"-데드락이란\" style=\"position:relative;\"><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4%EB%9E%80\" aria-label=\" 데드락이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 데드락이란?</h2>\n<ul>\n<li>\n<p>두 개 이상의 프로세스가 <u><strong>다른 프로세스의 작업이 끝나기만 기다리며 작업을 더 이상 진행하지 못하는 상태</strong></u>입니다.</p>\n<ul>\n<li>\n<p>이 때, ‘더 이상 진행하지 못하는 상태’라는 이유로 <code class=\"language-text\">아사 현상(starvation)</code>과 헷갈리기 쉬우므로 주의해야합니다</p>\n<blockquote>\n<h3 id=\"starvation\" style=\"position:relative;\"><a href=\"#starvation\" aria-label=\"starvation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>starvation</h3>\n<p>작업을 해야 하는 프로세스가 <u><strong>프로세서(CPU)를 할당받지 못해 Ready 상태에서 더 이상 진행하지 못하는 상태</strong></u>입니다. 스케줄링에 대해 공부하다가 나오는 개념입니다.</p>\n<p>starvation은 운영체제가 잘못된 정책을 사용하여 특정 프로세스의 작업이 지연되는 문제고, deadlock은 여러 프로세스가 작업을 진행하다 보니 자연적으로 일어나는 문제입니다.</p>\n<p>또한 starvation은 프로세서를 할당받아야 running 상태로 진행될 수 있지만, deadlock은 필요한 공유 자원(자원, 변수 등)을 얻어야 ready 상태가 되어 프로세서를 할당받게 될 수 있는 것입니다.</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-데드락이-발생하는-경우\" style=\"position:relative;\"><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\" aria-label=\" 데드락이 발생하는 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 데드락이 발생하는 경우</h2>\n<ul>\n<li>프로세스가 어떨 때 다른 프로세스의 작업이 끝나기를 기다리면서 데드락이 발생할까요?</li>\n</ul>\n<h3 id=\"1-시스템-자원을-사용하는-경우\" style=\"position:relative;\"><a href=\"#1-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%9E%90%EC%9B%90%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\" aria-label=\"1 시스템 자원을 사용하는 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 시스템 자원을 사용하는 경우</h3>\n<ul>\n<li>프로세스가 다른 프로세스와 공유할 수 없는 자원을 사용할 때 데드락이 일어날 수 있습니다.</li>\n<li>예) 시스템 자원으로 <strong><u>동시에 사용될 수 없는</u></strong> 프린터, CD 레코더가 있다고 해봅시다. 이 때 프로세스 P1이 프린터를 할당받았고, 프로세스 P2가 CD 레코더를 할당받았습니다. 근데 P1이 CD 레코더를 기다리고, P2가 프린터를 기다린다면 어떨까요? 더 이상 진행되지 않고 데드락이 발생할 것입니다.</li>\n</ul>\n<h3 id=\"2-공유-변수\" style=\"position:relative;\"><a href=\"#2-%EA%B3%B5%EC%9C%A0-%EB%B3%80%EC%88%98\" aria-label=\"2 공유 변수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 공유 변수</h3>\n<ul>\n<li>\n<p>한 공유 변수를 할당받은 상태에서 다른 공유 변수를 기다릴 때 교착 상태가 발생할 수 있습니다.</p>\n</li>\n<li>\n<p>critical section에 진입하려 하는 두 프로세스가 있고, 공유 데이터에 의해 race condition을 방지하기 위해 lock이 사용됐다고 생각해봅시다. 이 때 P1이 lock1을 얻고, P2이 lock2를 얻었습니다. 근데 P1이 lock2를 얻으려고 대기하고, P2가 lock1을 얻으려고 대기합니다. 그럼 둘 모두 critical section에 들어가지 못하고 계속 기다리게 되어 데드락이 발생하게 됩니다.</p>\n</li>\n</ul>\n<h3 id=\"3-응용-프로그램\" style=\"position:relative;\"><a href=\"#3-%EC%9D%91%EC%9A%A9-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8\" aria-label=\"3 응용 프로그램 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 응용 프로그램</h3>\n<ul>\n<li>데이터베이스 같은 응용 프로그램에서도 교착 상태가 발생합니다. 여러 프로세스가 데이터베이스를 접근하므로 데이터베이스 역시 데이터 일관성을 위해서 락을 사용합니다. 이 때 역시 데드락이 발생할 수 있습니다.</li>\n</ul>\n<h3 id=\"식사하는-철학자-문제-dining-philosophers\" style=\"position:relative;\"><a href=\"#%EC%8B%9D%EC%82%AC%ED%95%98%EB%8A%94-%EC%B2%A0%ED%95%99%EC%9E%90-%EB%AC%B8%EC%A0%9C-dining-philosophers\" aria-label=\"식사하는 철학자 문제 dining philosophers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>식사하는 철학자 문제 (Dining Philosophers)</h3>\n<ul>\n<li>\n<p>데드락을 설명하기 위한 유명한 문제입니다.</p>\n<p><img src=\"https://mblogthumb-phinf.pstatic.net/MjAyMDAxMjhfMTE3/MDAxNTgwMjAwOTQ0NDQ0.cbqy0jYGUZvqVhyLv8orp5Aw_wvsc5aBtmBh21RLz40g.UVd5QHW3QlMfBZ7-MFfUhnYyjAHpCO6vXPu0mVmXhfgg.PNG.hirit808/philtable.png?type=w800\" alt=\"img\"></p>\n</li>\n<li>\n<p>위 그림처럼 5명의 철학자가 둥그런 식탁에 둘러앉아서 식사를 합니다. 이 때 식사하기 위해 <u>젓가락을 집어야 하는데, 반드시 왼쪽에 있는 젓가락을 집은 뒤에 오른쪽에 있는 젓가락을 집어야 합니다.</u></p>\n</li>\n<li>\n<p>자 그럼 모두 왼쪽 젓가락을 집었습니다. 이제 그 다음 오른쪽에 있는 젓가락을 집어봅시다. 그런데 집을 수 있을까요? 이미 오른쪽에 있는 젓가락은, 오른쪽 철학자의 왼손에 있는 상태일 것입니다. 그럼 모두 밥을 먹지 못하고 굶게 될 것입니다.</p>\n</li>\n<li>\n<p>위 상황을 자원 할당 그래프로 나타내면 아래와 같습니다. (자원 할당 그래프 <code class=\"language-text\">resource allocation graph</code>에서는 프로세스는 원으로 자원은 사각형으로 표현합니다.)</p>\n<p><img src=\"https://www.cs.cornell.edu/courses/cs4410/2015su/lectures/lec10-deadlock.svg\" alt=\"dining philosophers deadlock\"></p>\n<ul>\n<li>왼쪽에 있는 젓가락은 각 철학자들에게 할당되어 있지만(Chopstick -> Philosopher로 향하는 선), 모든 철학자가 다른 철학자에게 할당된 젓가락을 기다리고 있는 걸 볼 수 있습니다.</li>\n</ul>\n</li>\n<li>\n<p>철학자 문제를 통해 데드락이 발생하는 조건을 살펴볼 수 있습니다.</p>\n<ol>\n<li>철학자들은 젓가락을 공유할 수 없다. ➡️ 같이 쓸 수 없으므로 자원이 남지 않아 데드락 발생</li>\n<li>철학자는 다른 철학자의 젓가락을 뺏을 수 없다. ➡️ 뺏을 수 없으므로 자원을 놓을 때까지 기다려야 해서 데드락 발생</li>\n<li>모든 철학자는 왼쪽 젓가락을 먼저 집고 오른쪽 젓가락을 기다린다. ➡️ 이미 하나를 집은(점유한) 상태에서 다른 자원을 기다리므로 데드락 발생</li>\n<li>자원 할당 그래프가 원을 이루고 있다. ➡️ 서로 선후관계가 없고 원형으로 자원을 기다리고 있으므로 데드락 발생</li>\n</ol>\n</li>\n</ul>\n<blockquote>\n<span style=\"font-size:110%\">\n<p>🙋 식사하는 철학자 문제를 어떻게 해결할 수 있을까요?</p>\n</span>\n<p>👮 여러 방법이 있습니다.</p>\n<ol>\n<li>\n<p>모두가 왼쪽을 집고 오른쪽을 집는 게 아닌, 홀수 번호 철학자들은 왼쪽 젓가락 먼저, 짝수 번호 철학자들은 오른쪽 젓가락을 듭니다.</p>\n</li>\n<li>\n<p>철학자 수에 제한을 둬서, 최대 N명이 앉을 수 있다면 최대 N-1명 까지만 앉을 수 있게 합니다. 혹은 젓가락 개수를 늘립니다.</p>\n</li>\n<li>\n<p>모든 철학자는 양쪽 젓가락이 비선점된 상태일 때만 두 젓가락을 점유합니다.</p>\n</li>\n<li>\n<p>힘이 센 철학자가 잇어서 다른 철학자의 젓가락을 뺏을 수 있습니다.</p>\n</li>\n</ol>\n</blockquote>\n<h2 id=\"--데드락-발생-u필요u조건-4가지\" style=\"position:relative;\"><a href=\"#--%EB%8D%B0%EB%93%9C%EB%9D%BD-%EB%B0%9C%EC%83%9D-u%ED%95%84%EC%9A%94u%EC%A1%B0%EA%B1%B4-4%EA%B0%80%EC%A7%80\" aria-label=\"  데드락 발생 u필요u조건 4가지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌  데드락 발생 <u><strong>필요</strong></u>조건 4가지</h2>\n<ul>\n<li>위 식사하는 철학자 문제에서 본 조건과 똑같은 조건이 충족되어야 데드락이 발생됩니다.</li>\n<li>다만 필요조건이라 하는 이유는, <u><strong>모든 조건이 충족되어야 데드락이 발생</strong></u>하기 때문입니다.</li>\n</ul>\n<h3 id=\"1-상호-배제-code-classlanguage-textmutual-exclusioncode\" style=\"position:relative;\"><a href=\"#1-%EC%83%81%ED%98%B8-%EB%B0%B0%EC%A0%9C-code-classlanguage-textmutual-exclusioncode\" aria-label=\"1 상호 배제 code classlanguage textmutual exclusioncode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 상호 배제 <code class=\"language-text\">Mutual exclusion</code></h3>\n<ul>\n<li>Race Condition을 없애고, Critical section을 보호해서 한번에 한 프로세스만 자원을 사용하도록 락을 사용하는 것 같은 방법을 사용하는데, 이로 인해 데드락 발생합니다.</li>\n</ul>\n<h3 id=\"2-비선점-code-classlanguage-textno-preemptioncode\" style=\"position:relative;\"><a href=\"#2-%EB%B9%84%EC%84%A0%EC%A0%90-code-classlanguage-textno-preemptioncode\" aria-label=\"2 비선점 code classlanguage textno preemptioncode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 비선점 <code class=\"language-text\">No preemption</code></h3>\n<ul>\n<li>한 프로세스가 사용 중인 자원은 중간에 다른 프로세스가 빼앗을 수 없는 비선점 자원이여야 합니다.</li>\n</ul>\n<h3 id=\"3-점유와-대기-code-classlanguage-texthold-and-waitcode\" style=\"position:relative;\"><a href=\"#3-%EC%A0%90%EC%9C%A0%EC%99%80-%EB%8C%80%EA%B8%B0-code-classlanguage-texthold-and-waitcode\" aria-label=\"3 점유와 대기 code classlanguage texthold and waitcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 점유와 대기 <code class=\"language-text\">Hold-and-wait</code></h3>\n<ul>\n<li>프로세스가 <u>어떤 자원을 할당받은 상태</u>에서 다른 자원을 기다리는 상태여야 합니다. 작업을 진행하는 쪽과 기다리는 쪽의 선후 관계가 없이 서로 진행을 방해하게 됩니다.</li>\n</ul>\n<h3 id=\"4-원형-대기-code-classlanguage-textcircular-waitcode\" style=\"position:relative;\"><a href=\"#4-%EC%9B%90%ED%98%95-%EB%8C%80%EA%B8%B0-code-classlanguage-textcircular-waitcode\" aria-label=\"4 원형 대기 code classlanguage textcircular waitcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 원형 대기 <code class=\"language-text\">Circular wait</code></h3>\n<ul>\n<li>점유와 대기를 하는 프로세스 간의 관계가 원을 이루어야 합니다. (자원 할당 그래프가 원)</li>\n</ul>\n<hr>\n<p>위 조건 중 1,2번 상호 배제와 비선점은 <u><strong>자원의 특징</strong></u>을 나타냅니다. 한 자원에 동시에 한 프로세스만 이용할 수 있고, 뺏을 수 없는 자원인 것입니다. <u><strong>critical section을 보호하기 위해 lock을 사용하면 상호 배제와 비선점 조건이 보장</strong></u>되므로 주의하지 않으면 데드락이 발생할 수 있습니다.</p>\n<p>3, 4번 점유와 대기, 원형 대기는 <u><strong>프로세스의 행위</strong></u>입니다. 프로세스가 자원을 점유 대기하는 상태에서 또 서로 원형으로 기다리는 것입니다.</p>\n<blockquote>\n<span style=\"font-size:110%\">\n<p>👮 위 필요조건 측면에서 식사하는 철학자 문제를 한번 살펴볼까요?</p>\n</span>\n<ol>\n<li>상호 배제\n<ul>\n<li>젓가락은 한번에 한 철학자만 사용</li>\n</ul>\n</li>\n<li>비선점\n<ul>\n<li>젓가락을 뺏을 수 없음</li>\n</ul>\n</li>\n<li>점유와 대기\n<ul>\n<li>한 철학자가 왼쪽 젓가락을 집은 상태에서 반대쪽 젓가락을 기다립니다.</li>\n</ul>\n</li>\n<li>원형 대기\n<ul>\n<li>둥그런 식탁에 앉아 식사를 하므로 선후 관계가 없어서 서로 진행을 방해합니다.</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n<h1 id=\"-데드락-해결-방법\" style=\"position:relative;\"><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\" aria-label=\" 데드락 해결 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📓 데드락 해결 방법</h1>\n<p>데드락을 해결하려면 어떻게 해야 할까요? 애초에 <u><strong>예방</strong></u>해서 안일어나게 할 수도 있고, 데드락이 발생할 것 같으면 <u><strong>회피</strong></u>하거나, 데드락이 일어나면 이를 <u><strong>검출하여 회복</strong></u>할 수도 있습니다. 각 방법에 대해서 알아봅시다.</p>\n<h2 id=\"-예방하기-prevention\" style=\"position:relative;\"><a href=\"#-%EC%98%88%EB%B0%A9%ED%95%98%EA%B8%B0-prevention\" aria-label=\" 예방하기 prevention permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 예방하기 (Prevention)</h2>\n<ul>\n<li>위에서 데드락 필요조건 4가지를 살펴봤습니다. 그럼 4가지 중 하나라도 발생하지 않으면 교착 상태가 일어나지 않겠죠?</li>\n<li>하지만 이 방법은 <u>실효성이 적어서 잘 사용되지는 않습니다.</u>\n<ul>\n<li>상호 배제, 비선점을 예방하려면 자원을 보호할 수 없고, 점유와 대기, 원형 대기를 막기 위해선 프로세스 작업 방식을 제한하고 자원을 낭비하게 되므로 사용하기 어렵습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-상호-배제-예방\" style=\"position:relative;\"><a href=\"#1-%EC%83%81%ED%98%B8-%EB%B0%B0%EC%A0%9C-%EC%98%88%EB%B0%A9\" aria-label=\"1 상호 배제 예방 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 상호 배제 예방</h3>\n<ul>\n<li>\n<p>자원이 한번에 한 프로세스만 독점적으로 사용할 수 있기 때문에 발생하는 것입니다. 그렇다면 모든 자원을 공유할 수 있다면 데드락이 발생하지 않을 것입니다.</p>\n<ul>\n<li>하지만 현실적으로 이건 불가능합니다… 분명 공유가 불가능한 자원이 있습니다. 식사하는 철학자 문제에서 젓가락을 같이 사용해서 밥을 먹는 것이 가능할까요? 또한 critical section을 보호하지 못하면 race condition이 발생할 것입니다.</li>\n</ul>\n</li>\n<li>\n<p>혹은  lock을 사용하지 않고, <code class=\"language-text\">Lock-free Programming</code>을 합니다.</p>\n<ul>\n<li>\n<p>일반화된 lock free 알고리즘을 만드는 건 어려우므로 lock free 자료구조를 대신 구현해서 사용한다고 합니다.</p>\n</li>\n<li>\n<p>lock-free 링크드리스트를 만들어봅시다.  공유되는 링크드리스트에 맨 앞에 새 노드를 삽입할 때를 봐봅시다. 그럼 링크드리스트의 헤드에 새 노드를 이을 때 race condition이 발생할 수 있으므로 원래라면 lock을 사용해야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">node_t</span> <span class=\"token operator\">*</span>n <span class=\"token operator\">=</span> <span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">node_t</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tn<span class=\"token operator\">-></span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">pthread_mutex_lock</span><span class=\"token punctuation\">(</span>listlock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// begin critical section</span>\n\tn<span class=\"token operator\">-></span>next <span class=\"token operator\">=</span> head<span class=\"token punctuation\">;</span>\n\thead <span class=\"token operator\">=</span> n<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">pthread_mutex_unlock</span><span class=\"token punctuation\">(</span>listlock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// end critical section</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>하지만 lock을 사용하므로 lock을 사용하지 않게 다른 방식을 사용해봅시다. 하지만 이 방법은 <u><strong>하드웨어의 지원이 필요</strong></u>합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">node_t</span> <span class=\"token operator\">*</span>n <span class=\"token operator\">=</span> <span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">node_t</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tn<span class=\"token operator\">-></span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">do</span> <span class=\"token punctuation\">{</span>\n\t\tn<span class=\"token operator\">-></span>next <span class=\"token operator\">=</span> head<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">CompareAndSwap</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>head<span class=\"token punctuation\">,</span> n<span class=\"token operator\">-></span>next<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>CompareAndSwap함수를 하드웨어가 함수가 Atomic하도록 지원해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">CompareAndSwap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>address<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> expected<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> new<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>address <span class=\"token operator\">==</span> expected<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token operator\">*</span>address <span class=\"token operator\">=</span> new<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// success</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// failure</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>단점은 계속해서 while을 돌면서 확인해야 해서(busy waiting), 자원이 낭비되고 thread가 많을 수록 효율성이 떨어진다는 점이다.</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-비선점-예방\" style=\"position:relative;\"><a href=\"#2-%EB%B9%84%EC%84%A0%EC%A0%90-%EC%98%88%EB%B0%A9\" aria-label=\"2 비선점 예방 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 비선점 예방</h3>\n<ul>\n<li>\n<p><u><strong>모든 자원을 뺏을 수 있게 만들면 됩니다.</strong></u> 식사하는 철학자 문제에서 옆사람의 젓가락을 빼앗을 수 있다면 데드락이 발생하지 않습니다.</p>\n<p>하지만 critical section 보호를 위해 lock을 사용하면 자원을 뺏을 수가 없습니다. 또한 자원을 뺏을 수 있게 하더라도 어떤 기준으로 뺏고, 뺏은 다음 얼마나 사용할지도 정해야합니다. 또 프로세스의 우선순위에 따라서 자원을 뺏게 한다면, 우선순위가 낮은 프로세스는 <code class=\"language-text\">starvation</code>현상에 빠질 것입니다.</p>\n<ul>\n<li>starvation은 <code class=\"language-text\">에이징</code>을 통해, 몇 번 자원을 양보하면 그 뒤에 무조건 자원을 사용할 수 있도록 하면 해결할 수 있지만, 이렇게 하면 또 빼앗을 수 없게 되므로 다시 문제가 생깁니다…</li>\n</ul>\n</li>\n<li>\n<p>혹은 빼앗는 것이 아닌 <u><strong>스스로 갖고 있던 자원을 포기</strong></u>하게 할 수 있습니다. 예를 들어 두가지 lock을 필요로 한다면, L1을 얻은 후에, L2를 얻어야 합니다. 이 때 L1을 얻고 L2를 얻으려다가 실패하면, <u><strong>L1까지 포기하고 다시 처음부터</strong></u> 시도하는 것입니다.</p>\n</li>\n</ul>\n<h3 id=\"3-점유와-대기-예방\" style=\"position:relative;\"><a href=\"#3-%EC%A0%90%EC%9C%A0%EC%99%80-%EB%8C%80%EA%B8%B0-%EC%98%88%EB%B0%A9\" aria-label=\"3 점유와 대기 예방 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 점유와 대기 예방</h3>\n<ul>\n<li>프로세스가 특정 자원을 점유하고 다른 자원을 기다리느라 점유와 대기를 하게 됩니다.</li>\n<li>그렇다면 <u><strong>반드시 전부 할당하거나, 그게 안되면 아예 할당하지 않는 방식</strong></u>을 이용하면 됩니다. 예를 들어 자원에 대한 여러 lock을 하나의 lock으로 관리하는 방식으로 구현할 수 있습니다.</li>\n<li>위에 1,2번은 자원에 대한 제약을 풀어버리는 것으로 현실적으로 어렵지만, 이 방식은 프로세스의 방식을 변화시켜 데드락을 처리하므로 좀 더 의미가 있습니다.\n<ul>\n<li>하지만 그럼에도 단점이 있습니다.\n<ol>\n<li>프로세스가 자신이 필요한 ‘모든 자원’을 알기 어렵다. 만약 자원을 모두 확보했는데 또 필요한 다른 자원이 생긴다면?</li>\n<li>자원의 활용성이 떨어진다. <u><strong>앞으로 사용할</strong></u> 자원까지 모두 확보해버리므로 그 자원을 필요하는 다른 프로세스는 오래 기다려야 합니다. 당장 사용하지 않을 자원을 선점하므로 자원 낭비가 심합니다.</li>\n<li>많은 자원을 사용하는 프로세스는 모두 확보할 때까지 기다려야합니다. 따라서 적은 자원을 사용하는 프로세스보다 불리해서, 계속 작업이 지연되는 starvation 현상이 발생합니다.</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"4-원형-대기-예방\" style=\"position:relative;\"><a href=\"#4-%EC%9B%90%ED%98%95-%EB%8C%80%EA%B8%B0-%EC%98%88%EB%B0%A9\" aria-label=\"4 원형 대기 예방 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 원형 대기 예방</h3>\n<ul>\n<li>자원을 한 방향으로만 사용하도록 하면 원형 대기를 예방할 수 있습니다.</li>\n<li>모든 자원에 숫자를 부여하고, 숫자가 작은 쪽에서 큰 쪽으로만 자원을 할당하도록 해봅시다. 그렇다면 반드시 자원을 순서대로 할당받아야 하므로 원형 대기가 발생하지 않습니다.\n<ul>\n<li>예를 들어 L1, L2가 있을 때, 한 프로세스는 L1을 할당받고 L2를 기다리고, 한 프로세스는 L2를 할당받고 L1를 기다리는 일이 생기지 않을 것입니다.</li>\n</ul>\n</li>\n<li>단점\n<ul>\n<li>번호를 어떻게 부여할 것인지가 문제입니다. 효율적으로 부여해야합니다.</li>\n<li>반드시 순서대로 할당받아야 하므로 유연성이 떨어집니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"--회피하기-avoidance\" style=\"position:relative;\"><a href=\"#--%ED%9A%8C%ED%94%BC%ED%95%98%EA%B8%B0-avoidance\" aria-label=\"  회피하기 avoidance permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌  회피하기 (Avoidance)</h2>\n<ul>\n<li>\n<p>슬슬 데드락이 일어날 것 같다하는 상태를 파악하고, 그 이하로 자원을 나누어주는 방식입니다.</p>\n</li>\n<li>\n<p>즉, 데드락이 발생하지 않는 범위 내에서만 자원을 할당하고, 데드락이 발생하는 범위에 있으면 프로세스를 대기시키는 방식입니다.</p>\n</li>\n<li>\n<p>시스템 내에 여러 자원이 있는데, 1개의 자원을 할당할 때보다 많은 자원을 할당할 수록 데드락이 발생할 확률이 커지므로 자원의 총수, 현재 할당된 자원의 수를 기준으로 상태를 파악해서 안정 상태를 유지할 수 있는 범위 내에서 자원을 할당하는 것입니다.</p>\n<blockquote>\n<h3 id=\"은행원-알고리즘\" style=\"position:relative;\"><a href=\"#%EC%9D%80%ED%96%89%EC%9B%90-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\" aria-label=\"은행원 알고리즘 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>은행원 알고리즘</h3>\n<p>이 특성을 이용한 여러 알고리즘 중 다익스트라가 제안한 은행원 알고리즘이 있습니다.</p>\n<p>은행원이 대출을 하는 방식을 생각해보면, 대출 금액이 대출 가능한 범위 내이면 대출을 해주고 그렇지 않으면 거부합니다. 이 방법과 유사하게, 미리 결정된 자원들의 최대 할당량을 가지고 시뮬레이션해서 안정 상태에 들 수 있는지를 검사하는 것입니다.</p>\n<p>예를 들어 레스토랑에서 예약받는 경우를 생각해봅시다. 레스토랑에 식재료가 우동 10인분, 스파게티 20인분을 만들 수 있는 분량이 있습니다. 그럼 레스토랑은 예약을 받을 때 30명을 받는 것이 아닌 10명을 기준으로 받습니다. 모두 우동을 시킬 수도 있기 때문입니다. 물론 그러지 않을 수도 있지만, 은행원 알고리즘은 최악의 경우를 기준으로 판단해서 데드락을 막습니다.</p>\n<p>그렇다면 프로세스에서는 어떻게 적용할까요? <code class=\"language-text\">현재 실행 중인 프로세스 가운데 하나라도 끝낼 수 있을 때 가용 자원을 할당하는 것</code>이 핵심입니다.</p>\n<p>각 프로세스는 자신이 사용할 자원 최대 수를 운영체제에게 알려줍니다. 각 자원에 할당된 할당 자원 수가 있을 것입니다. 그렇다면 (자원 최대 수)-(할당 자원 수) = (기대 자원 수)가 됩니다. 또한 운영체제가 (전체 자원 수)-(전체 할당된 자원 수)=(가용 자원 수)를 알 수 있습니다.</p>\n<p>따라서 운영체제는 다음과 같은 방식으로 자원을 할당할 수 있습니다.</p>\n<ul>\n<li>\n<p>각 프로세스의 기대 자원과 비교해서 가용 자원이 한 프로세스의 기대자원과 하나라도 크거나 같으면 할당합니다.</p>\n<p>즉, <u><strong>안정 상태</strong></u>라면 할당한다는 뜻입니다.</p>\n<blockquote>\n<p>안정 상태? 각 프로세스의 기대 자원과 비교하여 가용 자원이 크거나 같은 경우가 하나라도 있는 경우</p>\n<p>왜 안정 상태라고 하냐면, <u><strong>그 자원을 이용해서 작업을 끝낼 수 있는 프로세스가 하나라도 있기 때문에</strong></u> 안정 상태라고 합니다.</p>\n</blockquote>\n<p>안정 상태라면, 해당 자원을 할당받은 프로세스는 작업을 끝낼 수 있기 때문에 작업이 끝나고 사용하던 자원을 반납하고, 반납된 자원을 다른 프로세스가 쓰면서 전체 작업이 완료될 수 있습니다.</p>\n</li>\n<li>\n<p>가용 자원이 어떤 기대 자원보다 크지 않으면 할당하지 않습니다.</p>\n<p>이 때는 불안정 상태입니다. 현재 자원을 이용해서 작업을 마칠 수 있는 프로세스가 없기 때문입니다.</p>\n</li>\n</ul>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 64.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJ0lEQVQozy3R2W7bQAwFUP3/e4GiQYrEcRwvkj2SZiFnyFk1kh0nXf6osFPggG8kQd7m1yX8/Sw3H+XPtfx+z5+XdD3H6xLeZ3+p/jzxeaKluDnTnGm51y/Nxzks1X+ZC9fC58nPhaZMKWD08B9D8hgZ2OnIJgecom3eFz8VOs/husTrEqdMQEaDRCWWwtGDgqFXQpmhFV0rOofKqFHKHszYXGZfkl0K1XwTAhorNQxo+ugBcBTyeBDtQbQP6+en7Wsgw6jJGou6OVeOEUtyObla6HK/0JEOHnKAwAZxtDgijBaltRJAWpAOFYBsLpWtU73uheotmRxtiSikGJTwpNmprm/fut2m3Z361lt16o+bbi/V4KxulsmWbJfKKdmP+4evs68RIqmabPFQk2UYvB0TQ3DKW6nGI5FGlM08uVpcTuhY3y6/C6TYyuQhkA6kjRbO9J50YkNWbttt8MCkm5owR+RgLKmluJpvswIpwjEHZNLklJJH0IKdSqTBDN/Xz9Zpz6aZMpaE3htj5X2tm4tjJ406pYCeNbPR6qTkkZ0iKx2Ooj8QKWdVMyVICVO0IUBKttZQJ86FUrIxWvbIDM4pbYTWvTaDNr3SwsBgzNgkrw+7F3HcaXU8dpuHH9/Wq8fD7mW/fXl9edxtV6vnh/X6J+B4678ZlBkABgTZJJbb9c/usAbopezeNk9du+lPu1HsT91bf9rtt6u23bhbwgPg3T1zh+ofN2E0+Kn8kFwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"image-20220928185041419\" title=\"image-20220928185041419\" src=\"/static/5183b36d82924d248a13b705404d9a60/37523/image-20220928185041419.png\" srcset=\"/static/5183b36d82924d248a13b705404d9a60/e9ff0/image-20220928185041419.png 180w,\n/static/5183b36d82924d248a13b705404d9a60/f21e7/image-20220928185041419.png 360w,\n/static/5183b36d82924d248a13b705404d9a60/37523/image-20220928185041419.png 720w,\n/static/5183b36d82924d248a13b705404d9a60/302a4/image-20220928185041419.png 1080w,\n/static/5183b36d82924d248a13b705404d9a60/07a9c/image-20220928185041419.png 1440w,\n/static/5183b36d82924d248a13b705404d9a60/2d912/image-20220928185041419.png 1772w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.55555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+klEQVQoz0WQTZObMBBE+f+nXLLZtR2DwQb0PaMZSUgC7N3kh6XsPaSqr6/6dTd/H2lfw1bpvvJWaKu0V67ZlwVzgiVCiVAS5og5Qg5Yok/J10xrpuZzjyXDfeV75b3QWihnnxOk4MqCS4BAJpBN5MjrQDaQCwwpYnnBYa/0tcevPf7ZYy3eeOtARq/vlT3pmxxvcrzM17e+XeLTZUkYIy7JN59bKBm38rR9rOH+nMBb4T3TuviawHvNZIiMsuJbpyw+sPsPG681Kk/ma4t7ZQUmBFif2m6U41XdJj3lCA7UIG4WVGJXEzaPlZktklEgl4SvwKtKBzLOCeNmIa/KTAAKQCk1OSc9GvamuVdKCWNCZPPY430Ln3usyW3Pt5HZeK+tmZgMkwlsh3FAVIlcJPeE0SvntbAiRBeCSwmsnRCVQ+VAajOP00XpyRihjfxx+OjHAZxmb5u9eEBlQc16JjaetCet9E3p0Tph7CzVOFxbKScpZynnru/mebRWRnbNlpGjiwumBUvluoacKUSICTk4zxa8MlZIPelnszBWGCu1EUy2WRfoL0chBmOmee7b9mOaOqmu1+v5fH7vusPp969ze3gxAlEh6O/nArumJtu178Nw0nocb213/rjdWin6vjucjm/95Xg6/uzaD2Yb2Ea2OcASHJOti/8HfmTvvCkXLqEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"image-20220928185119676\" title=\"image-20220928185119676\" src=\"/static/37c623701545b167801c836131dc19a8/37523/image-20220928185119676.png\" srcset=\"/static/37c623701545b167801c836131dc19a8/e9ff0/image-20220928185119676.png 180w,\n/static/37c623701545b167801c836131dc19a8/f21e7/image-20220928185119676.png 360w,\n/static/37c623701545b167801c836131dc19a8/37523/image-20220928185119676.png 720w,\n/static/37c623701545b167801c836131dc19a8/302a4/image-20220928185119676.png 1080w,\n/static/37c623701545b167801c836131dc19a8/07a9c/image-20220928185119676.png 1440w,\n/static/37c623701545b167801c836131dc19a8/565cc/image-20220928185119676.png 1806w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"문제점\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\"문제점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제점</h3>\n<ul>\n<li>하지만 프로세스가 자신이 사용할 자원을 모두 미리 선언해야하고, 굉장히 정확해야 합니다.</li>\n<li>또한 시스템 전체 자원수가 고정이여야 합니다.</li>\n<li>자원이 낭비됩니다. 예를 들어, 레스토랑에서 우동만 시킬까봐 걱정돼서 예약을 적게 받으면 스파게티 재료가 낭비됩니다.</li>\n</ul>\n<h2 id=\"-검출-및-회복하기\" style=\"position:relative;\"><a href=\"#-%EA%B2%80%EC%B6%9C-%EB%B0%8F-%ED%9A%8C%EB%B3%B5%ED%95%98%EA%B8%B0\" aria-label=\" 검출 및 회복하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 검출 및 회복하기</h2>\n<ul>\n<li>위에서 본 예방 방법은 실제로 구현하기 어렵고, 회피는 구현하더라도 자원이 낭비되고, 또 모두 어떤 자원을 사용하는 지 미리 알고 정해져있어야해서 어렵습니다.</li>\n<li>따라서 <u><strong>가장 현실적인 것은 검출하는 것</strong></u>입니다. 운영체제가 프로세스의 작업을 관찰하면서 데드락이 발생했는 지를 계속 주시하는 것입니다. 그리고 데드락이 검출되면 회복을 합니다.\n<ul>\n<li>OS에서 데드락은 굉장히 드물기 때문에, OS가 한번 멈춰버린다면, 그냥 리부팅하고 행복하게 다시 쓰게 할 수도 있겠죠? * ^^ * 이렇게 데드락이 드물 때는 그냥 솔루션을 따로 안두는 것이 더 효율적일 것입니다.</li>\n<li>하지만 DB의 경우 대부분 데드락을 검출하고 회복합니다. 주기적으로 deadlock detector가 실행되고, 자원 할당 그래프를 유지하면서 확인합니다. -> DB concerruncy, deadlock, 등등은 나중에 db를 다룰 때 더 자세히..</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"검출\" style=\"position:relative;\"><a href=\"#%EA%B2%80%EC%B6%9C\" aria-label=\"검출 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검출</h3>\n<ul>\n<li>\n<p>타임아웃 이용하기 (가벼운 데드락 검출)</p>\n<ul>\n<li>\n<p>일정 시간 동안 작업이 진행되지 않은 프로세스는 데드락이 발생한 것으로 간주하여 처리하는 방법입니다.</p>\n</li>\n<li>\n<p>문제점</p>\n<ul>\n<li>타임아웃이 지난 다음에 작업이 진행되지 않았다고 무조건 데드락은 아닙니다. 다른 문제가 있었던 것일 수도 있습니다. 따라서 엉뚱한 프로세스가 강제 종료될 수가 있습니다.</li>\n<li>모든 시스템에 적용 불가\n<ul>\n<li>전체 시스템을 한 번에 감시할 수가 없는 분산 데이터베이스 같은 경우에, 다른 곳에 있는 프로세스가 응답이 없는 것이 데드락 때문인지, 네트워크 때문인지를 알 수 없습니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>이러한 문제에도 불구하고, 자원 할당 그래프를 유지하면서 감시하는 것은 구현하기가 힘드므로 타임아웃이 더 선호됩니다.</p>\n</li>\n<li>\n<p>예시</p>\n<ul>\n<li>\n<p>윈도우에서 프로그램이 응답없음 되는 경우가 타임아웃을 이용하는 방법의 대표적인 예입니다.</p>\n</li>\n<li>\n<p>데이터베이스의 경우 운영체제보다 데드락 처리가 복잡합니다. 데이터베이스는 일관성이 깨지면 안되므로 데이터 조작 시에 lock을 얻고 작업을 하는데, 여러 lock을 얻고 작업을 하다가 프로세스가 종료되면 데이터에 문제가 생길 수 있습니다.</p>\n<p>따라서 이를 해결하기 위해 데이터베이스는 체크포인트와 롤백을 사용합니다. <code class=\"language-text\">체크포인트</code>는 작업을 하다가 문제가 발생하면 그 상태로 되돌아가기 위한 표시입니다. 체크포인트를 설정하면 현재의 시스템 상태를 저장해야겠죠? 이렇게 하드디스크에 저장된 형태를 <code class=\"language-text\">snap shot</code>이라고 합니다. <code class=\"language-text\">롤백</code>은 문제가 발생하면 저장된 스냅샷을 복원해서 시스템을 체크포인트 시점으로 되돌리는 것입니다.</p>\n</li>\n<li>\n<p>위 방법이 운영체제에도 적용됩니다. 윈도우에서 ‘시스템 복원’이 스냅샷과 롤백을 이용해서 운영체제를 복원시키는 것입니다.</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>자원 할당 그래프 이용하기 (무거운 데드락 검출)</p>\n<ul>\n<li>위에서 언급한 대로, task가 너무 많기 때문에 자주 발생하지 않는 데드락을 찾기 위해 자원 할당 그래프를 유지하면서 모든 자원을 감시하는 것은 어렵습니다. 그래프를 유지하고, 업데이트하고, 사이클이 있는 지 없는 지를 계속해서 확인해야 하기 때문에 오버헤드가 듭니다. (오버헤드를 줄이기 위해서 자원이 할당될 때마다 사이클 검사를 하는 것이 아니고 일정 시간마다 하는 방법도 있습니다.)</li>\n<li>자원 할당 그래프를 이용해서 검출할 때 데드락을 검출하려면, <u><strong>그래프에서 사이클이 있는 지</strong></u>를 확인하면 됩니다.</li>\n<li>하지만 만약 단일 자원이 아닌 여러 프로세스가 동시에 쓸 수 있는 다중 자원인 경우에는 자원 할당 그래프의 사이클만으로는 데드락을 판단할 수 없습니다. <u><strong>기다리는 자원이 없는, 즉 작업이 끝날 수 있는 프로세스에 대해서 화살표를 지우면서, 모두 지운 후에 사이클이 남아 있는 지</strong></u>를 확인해야 합니다. (더 자세한 건 다중 자원일 경우 자원 할당 그래프 알아보기… <a href=\"https://www.geeksforgeeks.org/resource-allocation-graph-rag-in-operating-system/\">Multi-instances RAG</a>)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"회복\" style=\"position:relative;\"><a href=\"#%ED%9A%8C%EB%B3%B5\" aria-label=\"회복 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>회복</h3>\n<ul>\n<li>\n<p>데드락이 일어난 프로세스를 <u><strong>강제종료</strong></u>합니다. 또한 강제 종료된 프로세스가 실행하기 전에 시스템 역시 <u><strong>복구</strong></u>해야 합니다. 복구를 할 때는 명령어가 실행될 때 체크 포인트를 만들어서 가장 최근에 검사 시점으로 돌아가는 식으로 합니다. 물론 계속해서 체크 포인트를 만드는 것도 시스템에 부하를 주기 때문에 체크포인트를 무분별하게 사용하지 않고 선택적으로 사용해야 합니다.</p>\n</li>\n<li>\n<p>이 때 <u><strong>강제종료하는 방법</strong></u>에도 여러가지가 있습니다.</p>\n<ol>\n<li>\n<p>전체를 동시에 강제 종료하기</p>\n<p>하지만 종료된 프로세스들이 다시 동시에 작업을 시작하면 또 데드락이 발생할 수가 있습니다. 그러므로 전체 종료된 후에 순차적으로 실행시켜야 하고, 이 때 순서의 기준도 필요합니다.</p>\n</li>\n<li>\n<p>하나씩 종료하기</p>\n<p>데드락을 일으킨 프로세스 중 하나를 골라서 순서대로 종료하면서, 또 데드락의 상태 파악을 상태합니다. 그렇다면 이 때도 순서대로 종료하기 위해 기준(우선순위가 낮은 프로세스를 먼저 종료한다든가… 우선순위가 같은 경우 작업시간이 짧은 프로세스.. 혹은 자원을 많이 사용하는 프로세스를 먼저 종료시킨다든가)이 필요합니다.</p>\n</li>\n</ol>\n</li>\n</ul>\n<hr>\n<blockquote>\n<p>👀 다음을 참고하여 작성했습니다.</p>\n<ul>\n<li><a href=\"http://www.yes24.com/Product/Goods/62054527\">쉽게 배우는 운영체제</a></li>\n<li>학부 수업</li>\n<li><a href=\"https://github.com/gyoogle/tech-interview-for-developer/\">@gyoogle/tech-interview-for-developer</a></li>\n</ul>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BDdeadlock--%EA%B5%90%EC%B0%A9-%EC%83%81%ED%83%9C\">📓 데드락(deadlock) | 교착 상태</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4%EB%9E%80\">📌 데드락이란?</a></p>\n</li>\n<li>\n<p><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\">📌 데드락이 발생하는 경우</a></p>\n<ul>\n<li><a href=\"#1-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%9E%90%EC%9B%90%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\">1. 시스템 자원을 사용하는 경우</a></li>\n<li><a href=\"#2-%EA%B3%B5%EC%9C%A0-%EB%B3%80%EC%88%98\">2. 공유 변수</a></li>\n<li><a href=\"#3-%EC%9D%91%EC%9A%A9-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8\">3. 응용 프로그램</a></li>\n<li><a href=\"#%EC%8B%9D%EC%82%AC%ED%95%98%EB%8A%94-%EC%B2%A0%ED%95%99%EC%9E%90-%EB%AC%B8%EC%A0%9C-dining-philosophers\">식사하는 철학자 문제 (Dining Philosophers)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#--%EB%8D%B0%EB%93%9C%EB%9D%BD-%EB%B0%9C%EC%83%9D-u%ED%95%84%EC%9A%94u%EC%A1%B0%EA%B1%B4-4%EA%B0%80%EC%A7%80\">📌  데드락 발생 <u><strong>필요</strong></u>조건 4가지</a></p>\n<ul>\n<li><a href=\"#1-%EC%83%81%ED%98%B8-%EB%B0%B0%EC%A0%9C-mutual-exclusion\">1. 상호 배제 <code class=\"language-text\">Mutual exclusion</code></a></li>\n<li><a href=\"#2-%EB%B9%84%EC%84%A0%EC%A0%90-no-preemption\">2. 비선점 <code class=\"language-text\">No preemption</code></a></li>\n<li><a href=\"#3-%EC%A0%90%EC%9C%A0%EC%99%80-%EB%8C%80%EA%B8%B0-hold-and-wait\">3. 점유와 대기 <code class=\"language-text\">Hold-and-wait</code></a></li>\n<li><a href=\"#4-%EC%9B%90%ED%98%95-%EB%8C%80%EA%B8%B0-circular-wait\">4. 원형 대기 <code class=\"language-text\">Circular wait</code></a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\">📓 데드락 해결 방법</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%98%88%EB%B0%A9%ED%95%98%EA%B8%B0-prevention\">📌 예방하기 (Prevention)</a></p>\n<ul>\n<li><a href=\"#1-%EC%83%81%ED%98%B8-%EB%B0%B0%EC%A0%9C-%EC%98%88%EB%B0%A9\">1. 상호 배제 예방</a></li>\n<li><a href=\"#2-%EB%B9%84%EC%84%A0%EC%A0%90-%EC%98%88%EB%B0%A9\">2. 비선점 예방</a></li>\n<li><a href=\"#3-%EC%A0%90%EC%9C%A0%EC%99%80-%EB%8C%80%EA%B8%B0-%EC%98%88%EB%B0%A9\">3. 점유와 대기 예방</a></li>\n<li><a href=\"#4-%EC%9B%90%ED%98%95-%EB%8C%80%EA%B8%B0-%EC%98%88%EB%B0%A9\">4. 원형 대기 예방</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#--%ED%9A%8C%ED%94%BC%ED%95%98%EA%B8%B0-avoidance\">📌  회피하기 (Avoidance)</a></p>\n<ul>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\">문제점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EA%B2%80%EC%B6%9C-%EB%B0%8F-%ED%9A%8C%EB%B3%B5%ED%95%98%EA%B8%B0\">📌 검출 및 회복하기</a></p>\n<ul>\n<li><a href=\"#%EA%B2%80%EC%B6%9C\">검출</a></li>\n<li><a href=\"#%ED%9A%8C%EB%B3%B5\">회복</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"September 27, 2022","title":"데드락(deadlock) | 교착 상태","categories":"운영체제","author":"goldggyul","emoji":"🍽","imageEmoji":null},"fields":{"slug":"/os-003-deadlock/"}},"prev":{"id":"0caf44a9-b549-584b-a296-9b8ccd1f06d7","html":"<blockquote>\n<p>본 게시글은 <a href=\"https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9E%85%EB%AC%B8-%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/\">스프링 입문 - 코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술</a> 강의를 듣고 정리했습니다.</p>\n</blockquote>\n<h1 id=\"️-스프링-웹-개발-기초\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9B%B9-%EA%B0%9C%EB%B0%9C-%EA%B8%B0%EC%B4%88\" aria-label=\"️ 스프링 웹 개발 기초 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>☘️ 스프링 웹 개발 기초</h1>\n<p>웹을 개발한다는 건 <u><strong>크게 세 가지 경우</strong></u>가 있다.</p>\n<ol>\n<li>정적 컨텐츠: 서버에서 뭐 하는 거 없이 그냥 파일 그대로 내보낸다.</li>\n<li>MVC와 템플릿 엔진: JSP같은 소위 템플릿 엔진. html을 동적으로 바꿔서 내보냄. 요즘은 이 패턴</li>\n<li>API\n<ul>\n<li>json 데이터 포맷으로 클라(안드, ios 등등)한테 데이터 넘겨주기.</li>\n<li>서버끼리 통신</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"-정적-컨텐츠\" style=\"position:relative;\"><a href=\"#-%EC%A0%95%EC%A0%81-%EC%BB%A8%ED%85%90%EC%B8%A0\" aria-label=\" 정적 컨텐츠 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 정적 컨텐츠</h2>\n<h3 id=\"스프링-부트-정적-컨텐츠-기능\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%A0%95%EC%A0%81-%EC%BB%A8%ED%85%90%EC%B8%A0-%EA%B8%B0%EB%8A%A5\" aria-label=\"스프링 부트 정적 컨텐츠 기능 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 부트 정적 컨텐츠 기능</h3>\n<ul>\n<li>스프링 부트는 정적 컨텐츠 기능을 기본적으로 제공한다. <code class=\"language-text\">/static</code>에서 static content를 찾는다.</li>\n<li><code class=\"language-text\">url/파일명</code>을 하면 기본적으로 정적 파일을 찾아서 그대로 반환해준다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlklEQVQoz4VSy1KDQBDk/3/GKk8evHjx4EHLS6IG84CE8A4Q2AV2oa2eFJh4caq6ZoHZnu5hHFzFMAw3mGIcR8kv0ROO+QFxlOB0OuFvsM4pyxJEURTo+15eToRN06Cu60s+13hc3cP1v3DwD4jjGG3byvfz+SxZKQXHWguCL0g4Bc9JkiBNU+z3e1RVBaMGRGGM5XIpWCwWyPNcBLE2iiI4E0EQBFi5K8lhGGK324kCEm+3W8nGGmitxW6WZXKeouu6W0J28TxPrLDbZrORIhJRyfF4nMGLVM2GxhhxSAcU4vASZ0TwPAULeZkNaJvz4VhmNA3KshIhJOM/oGqHA+UcmK8tsDutBsEBvu/L9/+CNbNlKmAnEpGYHa0dYcyAPM/m4cv8TgXCqkVc1NBKzSvD+zeE/BHr9RrfrgvP28P9fIf78YowuqwIoVQDpTXqzqLWPawxVwqr37Vhd85xttxZvD7fYfn2AKV7DIOV3aQSgZwv+8r7zOSYF5tWqOBSMMD0PbK8QJrm0ohjoIsZ8qzl/QQu9g9BJk5U6O+QAAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221003220325894\"\n        title=\"image-20221003220325894\"\n        src=\"/static/650c69f3cf6f02b26a8e959e95036084/37523/image-20221003220325894.png\"\n        srcset=\"/static/650c69f3cf6f02b26a8e959e95036084/e9ff0/image-20221003220325894.png 180w,\n/static/650c69f3cf6f02b26a8e959e95036084/f21e7/image-20221003220325894.png 360w,\n/static/650c69f3cf6f02b26a8e959e95036084/37523/image-20221003220325894.png 720w,\n/static/650c69f3cf6f02b26a8e959e95036084/98b29/image-20221003220325894.png 937w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>큰 개념을 설명하자면 대략 이렇다. 자세한 건 다음 강의에서..</li>\n<li>우선 요청이 들어오면, 내장 톰캣 서버가 요청을 받고 넘긴다.</li>\n<li>그럼 스프링은 <u><strong>해당 이름의 컨트롤러를 먼저 찾는다</strong></u>. -> <mark>컨트롤러 우선순위가 더 높다</mark>는 뜻</li>\n<li>컨트롤러가 없으므로, <code class=\"language-text\">resources</code>에 <code class=\"language-text\">static</code>폴더에서 해당 이름의 파일을 찾고, 그대로 리턴해준다.</li>\n</ul>\n<h2 id=\"-mvc와-템플릿-엔진\" style=\"position:relative;\"><a href=\"#-mvc%EC%99%80-%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%97%94%EC%A7%84\" aria-label=\" mvc와 템플릿 엔진 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 MVC와 템플릿 엔진</h2>\n<ul>\n<li>\n<p>과거엔 Controller와 View가 분리되어 있지 않았고, View에서 다 했었다. (JSP)</p>\n<ul>\n<li>이 방식을 모델원 방식이라고 한다.</li>\n</ul>\n</li>\n<li>\n<p>지금은 MVC 스타일로 한다.</p>\n<ul>\n<li>for <u><strong>관심사 분리!</strong></u></li>\n<li>비즈니스 로직과 화면 그리기 등등을 나누자.</li>\n<li>요즘은 V와 C를 쪼개는 게 기본.</li>\n<li>View는 화면 관련 일만, 비즈니스 로직 등 서버 뒷단 관련된 건 Controller나 뒷단 비즈니스 로직에서 다 처리</li>\n<li>화면 쪽에 필요한 건 Model에 담아서 넘겨주기</li>\n</ul>\n</li>\n<li>\n<p>예시로 컨트롤러 추가해보자.</p>\n<ul>\n<li>\n<p>Controller</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello-mvc\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">helloMvc</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Model</span> model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        model<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello-template\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>View: <code class=\"language-text\">resources/template/hello-template.html</code></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">HTML</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>th</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.thymeleaf.org<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\"><span class=\"token namespace\">th:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">'</span>hello ' + ${name}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>hello! empty<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li>타임리프 템플릿 엔진을 쓴다고 상단에 명시해준다.</li>\n<li>이 때 <p> 태그 안에 ‘hello! empty’를 통해 서버 없이 그냥 pure html을 열어봐도 내용(껍데기)를 볼 수 있다. 실제로 템플릿 엔진이 동작을 할 때는 안에 내용이 치환돼서 나온다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">@RequestParam</code>은 기본적으로 <code class=\"language-text\">required = true</code>이므로 값을 넘기지 않으면 당연히 오류</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"동작-방식\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D\" aria-label=\"동작 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동작 방식</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/UlEQVQoz21T24oTQRCdj9JPEPwL8U3wFxTEF33x2R9QHxbcN1lhfTSCsCzrSkwmmRnnfslkMvd7Tx+pDr2bEAsOTXdXV506Va0sl0sQNE0TCIIAZJxP4Jyf4ND+d6/sdjtsNhskSYKyLNG2LaZpEiAHxhjGcQQ4cGGc4Ur/AVO3YJqmOJf3tBKUPM/RdR2KosAwDEfZKQklo6TxJsYf6xama8B1XDiOgyiKEMex8JF+CgUjo2B0QGvf94Itge7poWAJoG1aOKYD27Kh6ZqoiIz8SC7l8GCxWEBVVaxWK8zn8zvWpG0URnj55QUevnuApx+eIK1T8W7ik1iJRBiG9wwlK2lN04gkpAs5jsOIa+can35+xOzvDBNnUpzjgFKnqqoEpH7EzLIs6LqO7XZ7V3KTN6izGk5SQY9LxGV3HFDqRKXLgFLTOKbub0VCxvYBu7xHtavgegEs10fV3Et2UnKapqKz1Ll9gxjYBPi+DzYyfFMv8fbrG5zffgbj49FMEoGTgLZtw/M8MRK+H+L3zQxXs3Os17pg++riNR69f4xnZ8+RlAkwAV3fYxh61HW9D0hlkmbUhMOSJw7Mf33H4uYSYRRjvVLheQk0P4MVVLBMW3SfJsIwDAExNlQmDXeWZYIl/RA59f3AUDf77KR1UeaoygJFkYm9bCRB/rJ/AuSKRII6gTkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221003223626990\"\n        title=\"image-20221003223626990\"\n        src=\"/static/55b86547a0617bd609e2725ab333d080/37523/image-20221003223626990.png\"\n        srcset=\"/static/55b86547a0617bd609e2725ab333d080/e9ff0/image-20221003223626990.png 180w,\n/static/55b86547a0617bd609e2725ab333d080/f21e7/image-20221003223626990.png 360w,\n/static/55b86547a0617bd609e2725ab333d080/37523/image-20221003223626990.png 720w,\n/static/55b86547a0617bd609e2725ab333d080/eb2af/image-20221003223626990.png 954w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>요청이 오면 내장 톰캣 서버를 거치고, 톰캣 서버가 스프링한테 던져준다.</li>\n<li>컨트롤러를 먼저 찾는데, 이번엔 맵핑된 컨트롤러가 있다.</li>\n<li>이제 viewResolver가 View를 찾아주고, 템플릿 엔진을 연결시켜준다.\n<ul>\n<li>viewResolver가 templates에서 리턴된 이름과 같은 파일을 찾아서 타임리프 템플릿 엔진에 처리를 위해 넘긴다.</li>\n</ul>\n</li>\n<li>템플릿 엔진이 변환을 해서 웹 브라우저에 넘긴다.</li>\n</ul>\n<h2 id=\"-api\" style=\"position:relative;\"><a href=\"#-api\" aria-label=\" api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 API</h2>\n<h3 id=\"예시1---문자열-응답\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%8B%9C1---%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%9D%91%EB%8B%B5\" aria-label=\"예시1   문자열 응답 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예시1 - 문자열 응답</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello-string\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@ResponseBody</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">helloString</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">@ResponseBody</code> 의 의미는, HTTP의 헤더, 바디 중 바디 부분에 데이터를 직접 그대로  넣겠다는 뜻이다.</li>\n<li>위에처럼 그냥 문자열을 쓸 일은 많이 없고.. 아래를 보자.</li>\n</ul>\n<h3 id=\"예시2---json-응답\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%8B%9C2---json-%EC%9D%91%EB%8B%B5\" aria-label=\"예시2   json 응답 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예시2 - JSON 응답</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello-api\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@ResponseBody</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Hello</span> <span class=\"token function\">helloApi</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Hello</span> hello <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        hello<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> hello<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Hello</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p><u><strong>nested class는 static으로 만들자.</strong></u></p>\n<ul>\n<li><code class=\"language-text\">static nested class</code></li>\n<li>외부 클래스 없이도 생성 가능</li>\n<li><u><strong>외부 참조가 없음</strong></u></li>\n<li><a href=\"https://siyoon210.tistory.com/141\">참고1</a>, <a href=\"https://velog.io/@agugu95/%EC%99%9C-Inner-class%EC%97%90-Static%EC%9D%84-%EB%B6%99%EC%9D%B4%EB%8A%94%EA%B1%B0%EC%A7%80\">참고2</a></li>\n</ul>\n</li>\n<li>\n<p>위와 같이 객체를 리턴하면? json으로 응답해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// hello-api?name=wow</span>\n<span class=\"token punctuation\">{</span><span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"wow\"</span><span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>과거엔 xml로도 많이 쓰였지만, json이 더 가볍고 간단해서 거의  json을 사용한다.</li>\n<li>따라서 스프링도 기본적으로 <code class=\"language-text\">@ResponseBody</code> + <code class=\"language-text\">객체 반환</code>이라면 json으로 기본적으로 반환해준다.\n<ul>\n<li>getter 만들어두기</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"동작-방식-1\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D-1\" aria-label=\"동작 방식 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동작 방식</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5klEQVQoz2VSTW7TUBDOhbLJDZITQI6SRTagwCaFCwQJxBYOkIJYVBVIWdKC1FbUFY4b27H97Gc7duK/2LE/NM9ycOCTRnFm5n0z8810qqpCY2VZnlgDihEu9TlW9hIO4+AuP/rbeZ0gCLDZbEC/RNImJx/ZdrtFsAlwIZ3jTr6BulJhmEbtb73f7XboNMzkaGO/38NxHOGnx1ma1YEMsFQLD9ID7qV7+L6PKIpEnmmaNSHBtm3IsixMURSoqoo8z5FlmfgfRiE+/viA55+e4d23t/ADH0mcHKWhphhjfwk9z4PruqJSGIYiSF2mWYqlvATzGF5+eYGn75/g1eVrFNXhZKKiKGrCJElARiRtUHdUhHSixAaZZwL+TyTeL8TONWL7O4o8wuFQ1oT0qBGfqjSbi+MYt7c30HUdlmXVRYoCmraCzXSoDofquFCYgzBJUZWlyDuOTB22z4C0O4jzqY6EhLRZzj+gif7TUNM0sQBFWYolWZaJta5CkiRRbD6fYzQaYTKZ4Oxsiul0ivF4jMViIThOtky3RHpRZ7QMzw/x9fMb3F2dQ3nURQ4R9Ho99Pt9DIdDDAYDdLtdzGYzEV+v17WGtF3qqD1ynu+xevwNm5ng3BU3SaMbhiE6ab7JaFQyzjn+ANgZLftG7HCeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221003225604118\"\n        title=\"image-20221003225604118\"\n        src=\"/static/d5d073a9b8feea5e2a0cf60c18bffc0e/37523/image-20221003225604118.png\"\n        srcset=\"/static/d5d073a9b8feea5e2a0cf60c18bffc0e/e9ff0/image-20221003225604118.png 180w,\n/static/d5d073a9b8feea5e2a0cf60c18bffc0e/f21e7/image-20221003225604118.png 360w,\n/static/d5d073a9b8feea5e2a0cf60c18bffc0e/37523/image-20221003225604118.png 720w,\n/static/d5d073a9b8feea5e2a0cf60c18bffc0e/6c2f2/image-20221003225604118.png 767w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>controller에 @ResponseBody가 붙어있으므로, <code class=\"language-text\">viewResolver</code>한테 던지는 게 아니라, <code class=\"language-text\">HttpMessageConverter</code>가 동작한다. 응답된 객체를 보고 단순 문자열이면 <code class=\"language-text\">StringHttpMessageConverter</code>, 객체라면 <code class=\"language-text\">MappingJackson2HttpMessageConverter</code>가 기본으로 동작한다. 이 경우엔 객체이므로 json으로 바꾸고 반환한다.\n<ul>\n<li>Jackson?\n<ul>\n<li>객체를 json으로 바꿔주는 대표적인 라이브러리. 다른 하나는 Gson</li>\n<li>기본으로 스프링은 Jackson을 탑재하고 있다.</li>\n</ul>\n</li>\n<li>원하면 바꿀 수 있지만 실무에서도 그냥 거의 그대로 쓴다.</li>\n<li>이 때 HTTP 요청 헤더에 <code class=\"language-text\">Accept</code> 쪽에 명시된 걸 바탕으로 <code class=\"language-text\">HttpMessageConverter</code>가 선택돼서 동작한다.</li>\n</ul>\n</li>\n</ul>\n<p>​</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9B%B9-%EA%B0%9C%EB%B0%9C-%EA%B8%B0%EC%B4%88\">☘️ 스프링 웹 개발 기초</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%A0%95%EC%A0%81-%EC%BB%A8%ED%85%90%EC%B8%A0\">📌 정적 컨텐츠</a></p>\n<ul>\n<li><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%A0%95%EC%A0%81-%EC%BB%A8%ED%85%90%EC%B8%A0-%EA%B8%B0%EB%8A%A5\">스프링 부트 정적 컨텐츠 기능</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-mvc%EC%99%80-%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%97%94%EC%A7%84\">📌 MVC와 템플릿 엔진</a></p>\n<ul>\n<li><a href=\"#%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D\">동작 방식</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-api\">📌 API</a></p>\n<ul>\n<li><a href=\"#%EC%98%88%EC%8B%9C1---%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%9D%91%EB%8B%B5\">예시1 - 문자열 응답</a></li>\n<li><a href=\"#%EC%98%88%EC%8B%9C2---json-%EC%9D%91%EB%8B%B5\">예시2 - JSON 응답</a></li>\n<li><a href=\"#%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D-1\">동작 방식</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 03, 2022","title":"02. 스프링 웹 개발 기초 - 스프링 입문 | 매일 1시간 👨🏻‍🏫 2일차","categories":"강의","author":"goldggyul","emoji":null,"imageEmoji":"spring-boot-logo.png"},"fields":{"slug":"/spring-hello-001/"}},"site":{"siteMetadata":{"siteUrl":"https://goldggyul.github.io","comments":{"utterances":{"repo":"goldggyul/goldggyul.github.io"}}}}},"pageContext":{"slug":"/python-001/","nextSlug":"/os-003-deadlock/","prevSlug":"/spring-hello-001/"}},"staticQueryHashes":["1956554647","2938748437","3350743975","3454833782"]}