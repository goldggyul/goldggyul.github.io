{"componentChunkName":"component---src-templates-blog-template-js","path":"/spring-hello-002/","result":{"data":{"cur":{"id":"a41a116b-87a5-5fab-8b89-aecc310a4dad","html":"<blockquote>\n<p>본 게시글은 <a href=\"https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9E%85%EB%AC%B8-%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/\">스프링 입문 - 코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술</a> 강의를 듣고 필기용으로 정리했습니다.</p>\n</blockquote>\n<h1 id=\"️-회원-관리-예제---백엔드-개발\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%ED%9A%8C%EC%9B%90-%EA%B4%80%EB%A6%AC-%EC%98%88%EC%A0%9C---%EB%B0%B1%EC%97%94%EB%93%9C-%EA%B0%9C%EB%B0%9C\" aria-label=\"️ 회원 관리 예제   백엔드 개발 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>☘️ 회원 관리 예제 - 백엔드 개발</h1>\n<h2 id=\"-비즈니스-요구사항-정리\" style=\"position:relative;\"><a href=\"#-%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD-%EC%A0%95%EB%A6%AC\" aria-label=\" 비즈니스 요구사항 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 비즈니스 요구사항 정리</h2>\n<ul>\n<li>정말 간단하게!</li>\n<li>데이터: 회원ID, 이름</li>\n<li>기능: 회원 등록, 조회</li>\n<li><u><strong>아직 데이터 저장소가 선정되지 않음(가상의 시나리오)</strong></u></li>\n</ul>\n<h3 id=\"일반적인-웹-애플리케이션-계층-구조\" style=\"position:relative;\"><a href=\"#%EC%9D%BC%EB%B0%98%EC%A0%81%EC%9D%B8-%EC%9B%B9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B0\" aria-label=\"일반적인 웹 애플리케이션 계층 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>일반적인 웹 애플리케이션 계층 구조</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVQoz21RaaqGMBDrHTyFF/GP9/DWgooL7vuKmo8MzEPKCwRtTTJpNVmWoa5rVFUlXJYF7/siz3M0TSPk/rquOM8TRVHIHj183/cdx3HA8zy4rgszDAPathUTP2gQDVzP8yxBHFyWpWi7rhMNvfRFUQTHcWCMgWEABX3fI01TERI0awuaruvCNE2I41i09FDDoc/zIAgC+L4PwwWPqBzHUVoQFOsAtmGI6vVpQwKJ78dt2xCGoTTjCZIkkbYK1X6L3Pct/Av8QpvyR7Ahj8u7tAf/B8NUhn7JPd4d74pkOw20tTZ/MH8PsAnMlIIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221003231038899\"\n        title=\"image-20221003231038899\"\n        src=\"/static/fff89b6ac17f3564e9a75f793ebc8e8c/37523/image-20221003231038899.png\"\n        srcset=\"/static/fff89b6ac17f3564e9a75f793ebc8e8c/e9ff0/image-20221003231038899.png 180w,\n/static/fff89b6ac17f3564e9a75f793ebc8e8c/f21e7/image-20221003231038899.png 360w,\n/static/fff89b6ac17f3564e9a75f793ebc8e8c/37523/image-20221003231038899.png 720w,\n/static/fff89b6ac17f3564e9a75f793ebc8e8c/a016c/image-20221003231038899.png 762w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>컨트롤러: 웹 MVC의 컨트롤러 역할</li>\n<li>서비스: 핵심 비즈니스 로직 구현</li>\n<li>리포지토리: 데이터베이스에 접근, 도메인 객체를 DB에 저장하고 관리</li>\n<li>도메인: 비즈니스 도메인 객체, 예) 회원, 주문, 쿠폰 등등 주로 <u>데이터베이스에 저장하고 관리됨</u></li>\n</ul>\n<h3 id=\"실습-클래스-의존관계\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%9D%98%EC%A1%B4%EA%B4%80%EA%B3%84\" aria-label=\"실습 클래스 의존관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습 클래스 의존관계</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWklEQVQ4y51TXauCQBD1//8eH4LAwoegD8vIB0ssv4voLSIt9cSZWPF668J14LCzw+6Z2TOzGgDUdf0Dysqy/Aja+XzGarVqEASBxLXtdovj8YgkSZCmqSCOI2RZhm6yqqokxvOO48AwDJimicFggPl8DnJpruuirivkeS54PB643+/Y7/f4ZrvdDkVRNAnbcW2z2cC2bSmbWegfDgcwURRFiONYQJ+vYCJd17FYLLBcLjGbzcTnvfF4DE29nRmfz6dUSPBie6/AmO/7cp57yqCqlQpZyVu3uAGTUKdvRn15JstSeZnneRITDZXYXXzqfnsKyurd7cvlgtvtJj7vaepy176RtZtAIxmf/ovwL4IumdKNerLC6/UqPmO9CCk+J4E6n04n0Y++ZVn9CMMwbNb1ei3kNDb0X4TqLOd1Op1iMplgOBzK/HEmR6NRvwo5MqoZ/Nv8YVw5hy/FreK1mpfCpgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221003231300374\"\n        title=\"image-20221003231300374\"\n        src=\"/static/653518b57eb69d07627c7a16387f2e43/37523/image-20221003231300374.png\"\n        srcset=\"/static/653518b57eb69d07627c7a16387f2e43/e9ff0/image-20221003231300374.png 180w,\n/static/653518b57eb69d07627c7a16387f2e43/f21e7/image-20221003231300374.png 360w,\n/static/653518b57eb69d07627c7a16387f2e43/37523/image-20221003231300374.png 720w,\n/static/653518b57eb69d07627c7a16387f2e43/c8e86/image-20221003231300374.png 758w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>아직 데이터 저장소가 선장되지 않았으므로 저장소를 우선 인터페이스로 구현 클래스를 변경할 수 있도록 설계한다.</li>\n<li>일단은 구현체로 메모리 기반의 데이터 저장소를 먼저 구현하고, 나중에 구현체를 바꿔끼운다.</li>\n</ul>\n<h2 id=\"-회원-도메인과-리포지토리-작성과-테스트\" style=\"position:relative;\"><a href=\"#-%ED%9A%8C%EC%9B%90-%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B3%BC-%EB%A6%AC%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC-%EC%9E%91%EC%84%B1%EA%B3%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\" 회원 도메인과 리포지토리 작성과 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 회원 도메인과 리포지토리 작성과 테스트</h2>\n<ul>\n<li>\n<p>회원 리포지토리 인터페이스</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">MemberRepository</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Member</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findByName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>요즘은 null을 그대로 반환하는 것 대신 <code class=\"language-text\">Optional</code>로 감싸서 처리한다. (Java8부터 추가)</li>\n</ul>\n</li>\n<li>\n<p>회원 리포지토리 메모리 구현체</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemoryMemberRepository</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MemberRepository</span> <span class=\"token punctuation\">{</span>\n  \n  \t<span class=\"token comment\">// 동시성 문제 있음</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> store <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">long</span> sequence <span class=\"token operator\">=</span> <span class=\"token number\">0L</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Member</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      \t<span class=\"token comment\">// id는 시스템이 정해주고 이름은 고객이 입력</span>\n        member<span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token operator\">++</span>sequence<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        store<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> member<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// null이 반환될 가능성이 있으니 Optional로 감싸서 반환해주자.</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Optional</span><span class=\"token punctuation\">.</span><span class=\"token function\">ofNullable</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findByName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 하나 찾으면 바로 반환</span>\n        <span class=\"token keyword\">return</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>member <span class=\"token operator\">-></span> member<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">findAny</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  \n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  \n  \t<span class=\"token comment\">// 테스트 후 저장소 지우기</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">clearStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        store<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>멤버를 저장할 때 그냥 <code class=\"language-text\">HashMap</code>으로 저장하고 있는데, 실무에서는 동시성 문제때문에 <code class=\"language-text\">ConcurrentHashMap</code>, <code class=\"language-text\">AtomicLong</code> 등을 고려해야 한다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"테스트-케이스-작성\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BC%80%EC%9D%B4%EC%8A%A4-%EC%9E%91%EC%84%B1\" aria-label=\"테스트 케이스 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트 케이스 작성</h3>\n<ul>\n<li>\n<p>동작하는 지 보기 위해 테스트를 작성해보자.</p>\n</li>\n<li>\n<p>매번 main, controller를 통해 테스트한다면 은 준비하고 실행하는데 오래 걸리고, 반복 실행하기 어렵고 여러 테스트를 한번에 실행하기 어렵다는 단점이 있다. 자바는 JUnit이라는 프레임워크로 테스트를 실행해서 이러한 문제를 해결한다.</p>\n</li>\n<li>\n<p>회원 리포지토리 메모리 구현체 테스트</p>\n<ul>\n<li><code class=\"language-text\">src/test/java</code> 하위 폴더에 같은 패키지에 클래스 이름 + Test를 붙여서 생성한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 굳이 public일 필요는 없다.</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MemoryMemberRepositoryTest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">MemoryMemberRepository</span> repository <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@AfterEach</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        repository<span class=\"token punctuation\">.</span><span class=\"token function\">clearStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//given</span>\n        <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        member<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//when</span>\n        repository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//then</span>\n        <span class=\"token class-name\">Member</span> result <span class=\"token operator\">=</span> repository<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Assertions.assertEquals(result, member);</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findByName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//given</span>\n        <span class=\"token class-name\">Member</span> member1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        member1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        repository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Member</span> member2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        member2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        repository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//when</span>\n        <span class=\"token class-name\">Member</span> result <span class=\"token operator\">=</span> repository<span class=\"token punctuation\">.</span><span class=\"token function\">findByName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//then</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>member1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//given</span>\n        <span class=\"token class-name\">Member</span> member1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        member1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        repository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Member</span> member2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        member2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        repository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//when</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> repository<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//then</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>원랜 <code class=\"language-text\">Optional</code>을 그냥 get()으로 받아오면 별로지만 테스트니까 그냥 받아오자</p>\n</li>\n<li>\n<p>실무에서는 빌드 툴과 엮어서 테스트가 통과하지 못하면 다음 단계로 넘어가지 못하게 한다.</p>\n</li>\n<li>\n<p><u><strong>(단축키: 커맨드+옵션+V -> 선언부 채우기)</strong></u></p>\n</li>\n<li>\n<p><u><strong>각 테스트의 순서는 보장이 안되고, 순서에 상관이 없도록 설계해야 한다.</strong></u></p>\n<ul>\n<li>따라서 서로 영향을 주지 않도록, 테스트 하나가 끝나면 데이터를 클리어해줘야 한다.</li>\n<li><code class=\"language-text\">@AfterEach</code>: 각 테스트가 끝날 때마다 동작됨</li>\n</ul>\n</li>\n<li>\n<p>개발을 끝내고 테스트를 하냐? 테스트를 먼저 만들고 개발을 하냐? -> <mark>TDD…</mark></p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-회원-서비스-개발과-테스트\" style=\"position:relative;\"><a href=\"#-%ED%9A%8C%EC%9B%90-%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B0%9C%EB%B0%9C%EA%B3%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\" 회원 서비스 개발과 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 회원 서비스 개발과 테스트</h2>\n<h3 id=\"회원-서비스\" style=\"position:relative;\"><a href=\"#%ED%9A%8C%EC%9B%90-%EC%84%9C%EB%B9%84%EC%8A%A4\" aria-label=\"회원 서비스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>회원 서비스</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MemberRepository</span> memberRepository <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * 회원가입\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Long</span> <span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">validateDuplicateMember</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//중복 회원 검증</span>\n        memberRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> member<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">validateDuplicateMember</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 같은 이름이 있으면 가입 불가능</span>\n        memberRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findByName</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">ifPresent</span><span class=\"token punctuation\">(</span>m <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalStateException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"이미 존재하는 회원입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * 전체 회원 조회\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findMembers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> memberRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> memberId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> memberRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>Optional을 바로 반환하는 건 권장되지 않는다.  그래서 그냥 바로 <code class=\"language-text\">ifPresent</code>를 해주자.</p>\n</li>\n<li>\n<p>뭔가 다른 로직이 있을 때는 메소드로 빼주는 게 좋다.</p>\n<ul>\n<li><code class=\"language-text\">Ctrl + T</code>: method로 검색하면 그 부분을 메소드로 뽑아낼 수 있다.</li>\n</ul>\n</li>\n<li>\n<p>서비스 클래스의 메소드 네이밍은 좀 더 비즈니스에 가깝게 해야 한다. 그래야 찾아볼 때도 쉽고..</p>\n<ul>\n<li>서비스는 비즈니스를 처리하는 게 서비스의 역할이고, 리포지토리는 데이터 처리하는 게 역할이다.</li>\n</ul>\n</li>\n<li>\n<p>그럼 진짜 이름이 같으면 exception이 터지는 지를 보자.</p>\n</li>\n</ul>\n<h3 id=\"회원-서비스-테스트\" style=\"position:relative;\"><a href=\"#%ED%9A%8C%EC%9B%90-%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"회원 서비스 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>회원 서비스 테스트</h3>\n<ul>\n<li>\n<p>테스트 하고 싶은 클래스에서 <code class=\"language-text\">command+shift+T</code>를 통해 테스트를 만들 수 있다.</p>\n</li>\n<li>\n<p>테스트 메소드 이름은 한글로도 많이 적는다.</p>\n</li>\n<li>\n<p>테스트 코드는 빌드될 때 실제 코드에 포함되지 않는다.</p>\n</li>\n<li>\n<p>테스트 작성 시에는 <u><strong>given, when, then</strong></u>으로 주석을 표시해서 작성하는 게 도움이 된다. 그리고 상황에 안 맞을 때 점점 바꿔나가자.</p>\n</li>\n</ul>\n<h3 id=\"예외-확인\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%99%B8-%ED%99%95%EC%9D%B8\" aria-label=\"예외 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예외 확인</h3>\n<ul>\n<li>\n<p>예외를 확인하는 것이 정상 동작보다 중요할 수도 있다.</p>\n</li>\n<li>\n<p>예외를 확인할 때는 <code class=\"language-text\">try-catch</code>를 이용할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> 중복_회원_예외<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// given</span>\n  <span class=\"token class-name\">Member</span> member1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  member1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Member</span> member2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  member2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// when</span>\n  memberService<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>member1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// 중복 이름이므로 예외가 터져야 한다.</span>\n  <span class=\"token comment\">// try-catch 이용</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    memberService<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>member2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// exception이 발생 안하고 여기 도달하면 실패</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IllegalStateException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"이미 존재하는 회원입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>하지만 try-catch는 애매하니까(?) 제공되는 좋은 문법인 <code class=\"language-text\">assertThrows</code>를 사용해보자.</p>\n<ul>\n<li><code class=\"language-text\">assertThrows(터질 exception, 람다)</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> 중복_회원_예외<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// given</span>\n  <span class=\"token class-name\">Member</span> member1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  member1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Member</span> member2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  member2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// when</span>\n  memberService<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>member1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 중복 이름이므로 예외가 터져야 한다.</span>\n  <span class=\"token comment\">// try-catch 이용</span>\n  <span class=\"token comment\">// try {</span>\n  <span class=\"token comment\">//     memberService.join(member2);</span>\n  <span class=\"token comment\">//     fail(); // exception이 발생 안하고 여기 도달하면 실패</span>\n  <span class=\"token comment\">// } catch (IllegalStateException e) {</span>\n  <span class=\"token comment\">//     assertThat(e.getMessage()).isEqualTo(\"이미 존재하는 회원입니다.\");</span>\n  <span class=\"token comment\">// }</span>\n  <span class=\"token class-name\">IllegalStateException</span> e <span class=\"token operator\">=</span> <span class=\"token function\">assertThrows</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IllegalStateException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>member2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"이미 존재하는 회원입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>중간 코드</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberServiceTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">MemberService</span> memberService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> 회원가입<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//Given</span>\n        <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        member<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//When</span>\n        <span class=\"token class-name\">Long</span> saveId <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//Then</span>\n        <span class=\"token class-name\">Member</span> findMember <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span>saveId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>findMember<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> 중복_회원_예외<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// given</span>\n        <span class=\"token class-name\">Member</span> member1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        member1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Member</span> member2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        member2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"spring\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// when</span>\n        memberService<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>member1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\n      \t<span class=\"token comment\">// then</span>\n        <span class=\"token class-name\">IllegalStateException</span> e <span class=\"token operator\">=</span> <span class=\"token function\">assertThrows</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IllegalStateException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>member2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"이미 존재하는 회원입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre></div>\n</li>\n<li>\n<p>하지만 여기까지 문제점은 역시 테스트 끼리 영향을 줄 수 있다는 것이다. 따라서 repository를 매 메소드마다 비워줘야 한다.</p>\n</li>\n<li>\n<p>어라라? 근데 지금은 <code class=\"language-text\">MemberService</code>밖에 없기 때문에 그 전 리포지토리 테스트처럼 clear를 해줄 수 없다.</p>\n</li>\n<li>\n<p>그럼 <code class=\"language-text\">MemoryMemberRepository</code>를 선언해서 그 전 테스트와 같이 <code class=\"language-text\">@AfterEach</code>를 이용해서 비워주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">MemoryMemberRepository</span> memoryRepository <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@AfterEach</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  memoryRepository<span class=\"token punctuation\">.</span><span class=\"token function\">clearStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>위와 같이 추가하면 매 테스트가 끝나고 다시 clear를 한다.</p>\n</li>\n<li>\n<p>어라라? 근데 <code class=\"language-text\">MemberService</code>와 관련 없이 다른 객체인데 어떻게 clear된 걸까?</p>\n<ul>\n<li><code class=\"language-text\">MemoryMemberRepository</code>에서 데이터를 저장할 때 static 맵을 쓰기 때문이다.</li>\n</ul>\n</li>\n<li>\n<p>근데 사실 그래도 다른 객체를 만드는 건 좀 찝찝하고💦,  <u><strong>static이 아닐 때는 다른 인스턴스로 문제가 생길 것</strong></u>이다.</p>\n</li>\n<li>\n<p>따라서 <code class=\"language-text\">MemberService</code>에서 repository를 <u><strong>외부에서 넣어주는 것</strong></u>으로 변경하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberService</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MemberRepository</span> memberRepository<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberRepository</span> memberRepository<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>memberRepository <span class=\"token operator\">=</span> memberRepository<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberServiceTest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">MemberService</span> memberService<span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">MemoryMemberRepository</span> memoryRepository<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@BeforeEach</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        memoryRepository <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        memberService <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">(</span>memoryRepository<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">@BeforeEach</code>역시 각 메소드 전에 호출된다.</li>\n</ul>\n</li>\n<li>\n<p>이렇게 직접 new를 하지 않고 외부에 넣어 주는 것을 <code class=\"language-text\">Dependency Injection(DI)</code>라고 한다.</p>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-%ED%9A%8C%EC%9B%90-%EA%B4%80%EB%A6%AC-%EC%98%88%EC%A0%9C---%EB%B0%B1%EC%97%94%EB%93%9C-%EA%B0%9C%EB%B0%9C\">☘️ 회원 관리 예제 - 백엔드 개발</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD-%EC%A0%95%EB%A6%AC\">📌 비즈니스 요구사항 정리</a></p>\n<ul>\n<li><a href=\"#%EC%9D%BC%EB%B0%98%EC%A0%81%EC%9D%B8-%EC%9B%B9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B0\">일반적인 웹 애플리케이션 계층 구조</a></li>\n<li><a href=\"#%EC%8B%A4%EC%8A%B5-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%9D%98%EC%A1%B4%EA%B4%80%EA%B3%84\">실습 클래스 의존관계</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%ED%9A%8C%EC%9B%90-%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B3%BC-%EB%A6%AC%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC-%EC%9E%91%EC%84%B1%EA%B3%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8\">📌 회원 도메인과 리포지토리 작성과 테스트</a></p>\n<ul>\n<li><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BC%80%EC%9D%B4%EC%8A%A4-%EC%9E%91%EC%84%B1\">테스트 케이스 작성</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%ED%9A%8C%EC%9B%90-%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B0%9C%EB%B0%9C%EA%B3%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8\">📌 회원 서비스 개발과 테스트</a></p>\n<ul>\n<li><a href=\"#%ED%9A%8C%EC%9B%90-%EC%84%9C%EB%B9%84%EC%8A%A4\">회원 서비스</a></li>\n<li><a href=\"#%ED%9A%8C%EC%9B%90-%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%85%8C%EC%8A%A4%ED%8A%B8\">회원 서비스 테스트</a></li>\n<li><a href=\"#%EC%98%88%EC%99%B8-%ED%99%95%EC%9D%B8\">예외 확인</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"본 게시글은 스프링 입문 - 코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술 강의를 듣고 필기용으로 정리했습니다. ☘️ 회원 관리 예제 - 백엔드 개발 📌 비즈니스 요구사항 정리 정말 간단하게! 데이터: 회원ID, 이름 기능: 회원 등록, 조회 아직 데이터 저장소가 선정되지 않음(가상의 시나리오) 일반적인 웹 애플리케이션 계층 구조  컨트롤러: 웹 MVC의 컨트롤러 역할 서비스: 핵심 비즈니스 로직 구현 리포지토리: 데이터베이스에 접근, 도메인 객체를 DB에 저장하고 관리 도메인: 비즈니스 도메인 객체, 예) 회원, 주문, 쿠폰 등등 주로 데이터베이스에 저장하고 관리됨 실습 클래스 의존관계  아직 데이터 저장소가 선장되지 않았으므로 저장소를 우선 인터페이스로 구현 클래스를 변경할 수 있도록 설계한다. 일단은 구현체로 메모리 기반의 데이터 저장소를 먼저 구현하고, 나중에 구현체를 바꿔끼운다. 📌 회원 도메인과 리포지토리 작성과 테스트 회원 리포지토리 인터페이스 요즘은 null…","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-%ED%9A%8C%EC%9B%90-%EA%B4%80%EB%A6%AC-%EC%98%88%EC%A0%9C---%EB%B0%B1%EC%97%94%EB%93%9C-%EA%B0%9C%EB%B0%9C\">☘️ 회원 관리 예제 - 백엔드 개발</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EB%B9%84%EC%A6%88%EB%8B%88%EC%8A%A4-%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD-%EC%A0%95%EB%A6%AC\">📌 비즈니스 요구사항 정리</a></p>\n<ul>\n<li><a href=\"#%EC%9D%BC%EB%B0%98%EC%A0%81%EC%9D%B8-%EC%9B%B9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B0\">일반적인 웹 애플리케이션 계층 구조</a></li>\n<li><a href=\"#%EC%8B%A4%EC%8A%B5-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%9D%98%EC%A1%B4%EA%B4%80%EA%B3%84\">실습 클래스 의존관계</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%ED%9A%8C%EC%9B%90-%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B3%BC-%EB%A6%AC%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC-%EC%9E%91%EC%84%B1%EA%B3%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8\">📌 회원 도메인과 리포지토리 작성과 테스트</a></p>\n<ul>\n<li><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BC%80%EC%9D%B4%EC%8A%A4-%EC%9E%91%EC%84%B1\">테스트 케이스 작성</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%ED%9A%8C%EC%9B%90-%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B0%9C%EB%B0%9C%EA%B3%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8\">📌 회원 서비스 개발과 테스트</a></p>\n<ul>\n<li><a href=\"#%ED%9A%8C%EC%9B%90-%EC%84%9C%EB%B9%84%EC%8A%A4\">회원 서비스</a></li>\n<li><a href=\"#%ED%9A%8C%EC%9B%90-%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%85%8C%EC%8A%A4%ED%8A%B8\">회원 서비스 테스트</a></li>\n<li><a href=\"#%EC%98%88%EC%99%B8-%ED%99%95%EC%9D%B8\">예외 확인</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"October 03, 2022","title":"회원 관리 예제 - 스프링 입문 | 매일 1시간 👨🏻‍🏫 ＃3","categories":"강의","author":"goldggyul","emoji":null,"imageEmoji":"spring-boot-logo.png"},"fields":{"slug":"/spring-hello-002/"}},"next":{"id":"0caf44a9-b549-584b-a296-9b8ccd1f06d7","html":"<blockquote>\n<p>본 게시글은 <a href=\"https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9E%85%EB%AC%B8-%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/\">스프링 입문 - 코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술</a> 강의를 듣고 필기용으로 정리했습니다.</p>\n</blockquote>\n<h1 id=\"️-스프링-웹-개발-기초\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9B%B9-%EA%B0%9C%EB%B0%9C-%EA%B8%B0%EC%B4%88\" aria-label=\"️ 스프링 웹 개발 기초 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>☘️ 스프링 웹 개발 기초</h1>\n<p>웹을 개발한다는 건 <u><strong>크게 세 가지 경우</strong></u>가 있다.</p>\n<ol>\n<li>정적 컨텐츠: 서버에서 뭐 하는 거 없이 그냥 파일 그대로 내보낸다.</li>\n<li>MVC와 템플릿 엔진: JSP같은 소위 템플릿 엔진. html을 동적으로 바꿔서 내보냄. 요즘은 이 패턴</li>\n<li>API\n<ul>\n<li>json 데이터 포맷으로 클라(안드, ios 등등)한테 데이터 넘겨주기.</li>\n<li>서버끼리 통신</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"-정적-컨텐츠\" style=\"position:relative;\"><a href=\"#-%EC%A0%95%EC%A0%81-%EC%BB%A8%ED%85%90%EC%B8%A0\" aria-label=\" 정적 컨텐츠 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 정적 컨텐츠</h2>\n<h3 id=\"스프링-부트-정적-컨텐츠-기능\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%A0%95%EC%A0%81-%EC%BB%A8%ED%85%90%EC%B8%A0-%EA%B8%B0%EB%8A%A5\" aria-label=\"스프링 부트 정적 컨텐츠 기능 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 부트 정적 컨텐츠 기능</h3>\n<ul>\n<li>스프링 부트는 정적 컨텐츠 기능을 기본적으로 제공한다. <code class=\"language-text\">/static</code>에서 static content를 찾는다.</li>\n<li><code class=\"language-text\">url/파일명</code>을 하면 기본적으로 정적 파일을 찾아서 그대로 반환해준다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlklEQVQoz4VSy1KDQBDk/3/GKk8evHjx4EHLS6IG84CE8A4Q2AV2oa2eFJh4caq6ZoHZnu5hHFzFMAw3mGIcR8kv0ROO+QFxlOB0OuFvsM4pyxJEURTo+15eToRN06Cu60s+13hc3cP1v3DwD4jjGG3byvfz+SxZKQXHWguCL0g4Bc9JkiBNU+z3e1RVBaMGRGGM5XIpWCwWyPNcBLE2iiI4E0EQBFi5K8lhGGK324kCEm+3W8nGGmitxW6WZXKeouu6W0J28TxPrLDbZrORIhJRyfF4nMGLVM2GxhhxSAcU4vASZ0TwPAULeZkNaJvz4VhmNA3KshIhJOM/oGqHA+UcmK8tsDutBsEBvu/L9/+CNbNlKmAnEpGYHa0dYcyAPM/m4cv8TgXCqkVc1NBKzSvD+zeE/BHr9RrfrgvP28P9fIf78YowuqwIoVQDpTXqzqLWPawxVwqr37Vhd85xttxZvD7fYfn2AKV7DIOV3aQSgZwv+8r7zOSYF5tWqOBSMMD0PbK8QJrm0ohjoIsZ8qzl/QQu9g9BJk5U6O+QAAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221003220325894\"\n        title=\"image-20221003220325894\"\n        src=\"/static/650c69f3cf6f02b26a8e959e95036084/37523/image-20221003220325894.png\"\n        srcset=\"/static/650c69f3cf6f02b26a8e959e95036084/e9ff0/image-20221003220325894.png 180w,\n/static/650c69f3cf6f02b26a8e959e95036084/f21e7/image-20221003220325894.png 360w,\n/static/650c69f3cf6f02b26a8e959e95036084/37523/image-20221003220325894.png 720w,\n/static/650c69f3cf6f02b26a8e959e95036084/98b29/image-20221003220325894.png 937w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>큰 개념을 설명하자면 대략 이렇다. 자세한 건 다음 강의에서..</li>\n<li>우선 요청이 들어오면, 내장 톰캣 서버가 요청을 받고 넘긴다.</li>\n<li>그럼 스프링은 <u><strong>해당 이름의 컨트롤러를 먼저 찾는다</strong></u>. -> <mark>컨트롤러 우선순위가 더 높다</mark>는 뜻</li>\n<li>컨트롤러가 없으므로, <code class=\"language-text\">resources</code>에 <code class=\"language-text\">static</code>폴더에서 해당 이름의 파일을 찾고, 그대로 리턴해준다.</li>\n</ul>\n<h2 id=\"-mvc와-템플릿-엔진\" style=\"position:relative;\"><a href=\"#-mvc%EC%99%80-%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%97%94%EC%A7%84\" aria-label=\" mvc와 템플릿 엔진 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 MVC와 템플릿 엔진</h2>\n<ul>\n<li>\n<p>과거엔 Controller와 View가 분리되어 있지 않았고, View에서 다 했었다. (JSP)</p>\n<ul>\n<li>이 방식을 모델원 방식이라고 한다.</li>\n</ul>\n</li>\n<li>\n<p>지금은 MVC 스타일로 한다.</p>\n<ul>\n<li>for <u><strong>관심사 분리!</strong></u></li>\n<li>비즈니스 로직과 화면 그리기 등등을 나누자.</li>\n<li>요즘은 V와 C를 쪼개는 게 기본.</li>\n<li>View는 화면 관련 일만, 비즈니스 로직 등 서버 뒷단 관련된 건 Controller나 뒷단 비즈니스 로직에서 다 처리</li>\n<li>화면 쪽에 필요한 건 Model에 담아서 넘겨주기</li>\n</ul>\n</li>\n<li>\n<p>예시로 컨트롤러 추가해보자.</p>\n<ul>\n<li>\n<p>Controller</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello-mvc\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">helloMvc</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Model</span> model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        model<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello-template\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>View: <code class=\"language-text\">resources/template/hello-template.html</code></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">HTML</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>th</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.thymeleaf.org<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\"><span class=\"token namespace\">th:</span>text</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">'</span>hello ' + ${name}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>hello! empty<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li>타임리프 템플릿 엔진을 쓴다고 상단에 명시해준다.</li>\n<li>이 때 <p> 태그 안에 ‘hello! empty’를 통해 서버 없이 그냥 pure html을 열어봐도 내용(껍데기)를 볼 수 있다. 실제로 템플릿 엔진이 동작을 할 때는 안에 내용이 치환돼서 나온다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">@RequestParam</code>은 기본적으로 <code class=\"language-text\">required = true</code>이므로 값을 넘기지 않으면 당연히 오류</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"동작-방식\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D\" aria-label=\"동작 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동작 방식</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/UlEQVQoz21T24oTQRCdj9JPEPwL8U3wFxTEF33x2R9QHxbcN1lhfTSCsCzrSkwmmRnnfslkMvd7Tx+pDr2bEAsOTXdXV506Va0sl0sQNE0TCIIAZJxP4Jyf4ND+d6/sdjtsNhskSYKyLNG2LaZpEiAHxhjGcQQ4cGGc4Ur/AVO3YJqmOJf3tBKUPM/RdR2KosAwDEfZKQklo6TxJsYf6xama8B1XDiOgyiKEMex8JF+CgUjo2B0QGvf94Itge7poWAJoG1aOKYD27Kh6ZqoiIz8SC7l8GCxWEBVVaxWK8zn8zvWpG0URnj55QUevnuApx+eIK1T8W7ik1iJRBiG9wwlK2lN04gkpAs5jsOIa+can35+xOzvDBNnUpzjgFKnqqoEpH7EzLIs6LqO7XZ7V3KTN6izGk5SQY9LxGV3HFDqRKXLgFLTOKbub0VCxvYBu7xHtavgegEs10fV3Et2UnKapqKz1Ll9gxjYBPi+DzYyfFMv8fbrG5zffgbj49FMEoGTgLZtw/M8MRK+H+L3zQxXs3Os17pg++riNR69f4xnZ8+RlAkwAV3fYxh61HW9D0hlkmbUhMOSJw7Mf33H4uYSYRRjvVLheQk0P4MVVLBMW3SfJsIwDAExNlQmDXeWZYIl/RA59f3AUDf77KR1UeaoygJFkYm9bCRB/rJ/AuSKRII6gTkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221003223626990\"\n        title=\"image-20221003223626990\"\n        src=\"/static/55b86547a0617bd609e2725ab333d080/37523/image-20221003223626990.png\"\n        srcset=\"/static/55b86547a0617bd609e2725ab333d080/e9ff0/image-20221003223626990.png 180w,\n/static/55b86547a0617bd609e2725ab333d080/f21e7/image-20221003223626990.png 360w,\n/static/55b86547a0617bd609e2725ab333d080/37523/image-20221003223626990.png 720w,\n/static/55b86547a0617bd609e2725ab333d080/eb2af/image-20221003223626990.png 954w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>요청이 오면 내장 톰캣 서버를 거치고, 톰캣 서버가 스프링한테 던져준다.</li>\n<li>컨트롤러를 먼저 찾는데, 이번엔 맵핑된 컨트롤러가 있다.</li>\n<li>이제 viewResolver가 View를 찾아주고, 템플릿 엔진을 연결시켜준다.\n<ul>\n<li>viewResolver가 templates에서 리턴된 이름과 같은 파일을 찾아서 타임리프 템플릿 엔진에 처리를 위해 넘긴다.</li>\n</ul>\n</li>\n<li>템플릿 엔진이 변환을 해서 웹 브라우저에 넘긴다.</li>\n</ul>\n<h2 id=\"-api\" style=\"position:relative;\"><a href=\"#-api\" aria-label=\" api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 API</h2>\n<h3 id=\"예시1---문자열-응답\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%8B%9C1---%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%9D%91%EB%8B%B5\" aria-label=\"예시1   문자열 응답 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예시1 - 문자열 응답</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello-string\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@ResponseBody</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">helloString</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">@ResponseBody</code> 의 의미는, HTTP의 헤더, 바디 중 바디 부분에 데이터를 직접 그대로  넣겠다는 뜻이다.</li>\n<li>위에처럼 그냥 문자열을 쓸 일은 많이 없고.. 아래를 보자.</li>\n</ul>\n<h3 id=\"예시2---json-응답\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%8B%9C2---json-%EC%9D%91%EB%8B%B5\" aria-label=\"예시2   json 응답 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예시2 - JSON 응답</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello-api\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@ResponseBody</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Hello</span> <span class=\"token function\">helloApi</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Hello</span> hello <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        hello<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> hello<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Hello</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p><u><strong>nested class는 static으로 만들자.</strong></u></p>\n<ul>\n<li><code class=\"language-text\">static nested class</code></li>\n<li>외부 클래스 없이도 생성 가능</li>\n<li><u><strong>외부 참조가 없음</strong></u></li>\n<li><a href=\"https://siyoon210.tistory.com/141\">참고1</a>, <a href=\"https://velog.io/@agugu95/%EC%99%9C-Inner-class%EC%97%90-Static%EC%9D%84-%EB%B6%99%EC%9D%B4%EB%8A%94%EA%B1%B0%EC%A7%80\">참고2</a></li>\n</ul>\n</li>\n<li>\n<p>위와 같이 객체를 리턴하면? json으로 응답해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// hello-api?name=wow</span>\n<span class=\"token punctuation\">{</span><span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"wow\"</span><span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>과거엔 xml로도 많이 쓰였지만, json이 더 가볍고 간단해서 거의  json을 사용한다.</li>\n<li>따라서 스프링도 기본적으로 <code class=\"language-text\">@ResponseBody</code> + <code class=\"language-text\">객체 반환</code>이라면 json으로 기본적으로 반환해준다.\n<ul>\n<li>getter 만들어두기</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"동작-방식-1\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D-1\" aria-label=\"동작 방식 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동작 방식</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5klEQVQoz2VSTW7TUBDOhbLJDZITQI6SRTagwCaFCwQJxBYOkIJYVBVIWdKC1FbUFY4b27H97Gc7duK/2LE/NM9ycOCTRnFm5n0z8810qqpCY2VZnlgDihEu9TlW9hIO4+AuP/rbeZ0gCLDZbEC/RNImJx/ZdrtFsAlwIZ3jTr6BulJhmEbtb73f7XboNMzkaGO/38NxHOGnx1ma1YEMsFQLD9ID7qV7+L6PKIpEnmmaNSHBtm3IsixMURSoqoo8z5FlmfgfRiE+/viA55+e4d23t/ADH0mcHKWhphhjfwk9z4PruqJSGIYiSF2mWYqlvATzGF5+eYGn75/g1eVrFNXhZKKiKGrCJElARiRtUHdUhHSixAaZZwL+TyTeL8TONWL7O4o8wuFQ1oT0qBGfqjSbi+MYt7c30HUdlmXVRYoCmraCzXSoDofquFCYgzBJUZWlyDuOTB22z4C0O4jzqY6EhLRZzj+gif7TUNM0sQBFWYolWZaJta5CkiRRbD6fYzQaYTKZ4Oxsiul0ivF4jMViIThOtky3RHpRZ7QMzw/x9fMb3F2dQ3nURQ4R9Ho99Pt9DIdDDAYDdLtdzGYzEV+v17WGtF3qqD1ynu+xevwNm5ng3BU3SaMbhiE6ab7JaFQyzjn+ANgZLftG7HCeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221003225604118\"\n        title=\"image-20221003225604118\"\n        src=\"/static/d5d073a9b8feea5e2a0cf60c18bffc0e/37523/image-20221003225604118.png\"\n        srcset=\"/static/d5d073a9b8feea5e2a0cf60c18bffc0e/e9ff0/image-20221003225604118.png 180w,\n/static/d5d073a9b8feea5e2a0cf60c18bffc0e/f21e7/image-20221003225604118.png 360w,\n/static/d5d073a9b8feea5e2a0cf60c18bffc0e/37523/image-20221003225604118.png 720w,\n/static/d5d073a9b8feea5e2a0cf60c18bffc0e/6c2f2/image-20221003225604118.png 767w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>controller에 @ResponseBody가 붙어있으므로, <code class=\"language-text\">viewResolver</code>한테 던지는 게 아니라, <code class=\"language-text\">HttpMessageConverter</code>가 동작한다. 응답된 객체를 보고 단순 문자열이면 <code class=\"language-text\">StringHttpMessageConverter</code>, 객체라면 <code class=\"language-text\">MappingJackson2HttpMessageConverter</code>가 기본으로 동작한다. 이 경우엔 객체이므로 json으로 바꾸고 반환한다.\n<ul>\n<li>Jackson?\n<ul>\n<li>객체를 json으로 바꿔주는 대표적인 라이브러리. 다른 하나는 Gson</li>\n<li>기본으로 스프링은 Jackson을 탑재하고 있다.</li>\n</ul>\n</li>\n<li>원하면 바꿀 수 있지만 실무에서도 그냥 거의 그대로 쓴다.</li>\n<li>이 때 HTTP 요청 헤더에 <code class=\"language-text\">Accept</code> 쪽에 명시된 걸 바탕으로 <code class=\"language-text\">HttpMessageConverter</code>가 선택돼서 동작한다.</li>\n</ul>\n</li>\n</ul>\n<p>​</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%9B%B9-%EA%B0%9C%EB%B0%9C-%EA%B8%B0%EC%B4%88\">☘️ 스프링 웹 개발 기초</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%A0%95%EC%A0%81-%EC%BB%A8%ED%85%90%EC%B8%A0\">📌 정적 컨텐츠</a></p>\n<ul>\n<li><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%A0%95%EC%A0%81-%EC%BB%A8%ED%85%90%EC%B8%A0-%EA%B8%B0%EB%8A%A5\">스프링 부트 정적 컨텐츠 기능</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-mvc%EC%99%80-%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%97%94%EC%A7%84\">📌 MVC와 템플릿 엔진</a></p>\n<ul>\n<li><a href=\"#%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D\">동작 방식</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-api\">📌 API</a></p>\n<ul>\n<li><a href=\"#%EC%98%88%EC%8B%9C1---%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%9D%91%EB%8B%B5\">예시1 - 문자열 응답</a></li>\n<li><a href=\"#%EC%98%88%EC%8B%9C2---json-%EC%9D%91%EB%8B%B5\">예시2 - JSON 응답</a></li>\n<li><a href=\"#%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D-1\">동작 방식</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 03, 2022","title":"스프링 웹 개발 기초 - 스프링 입문 | 매일 1시간 👨🏻‍🏫 ＃2","categories":"강의","author":"goldggyul","emoji":null,"imageEmoji":"spring-boot-logo.png"},"fields":{"slug":"/spring-hello-001/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://goldggyul.github.io","comments":{"utterances":{"repo":"goldggyul/goldggyul.github.io"}}}}},"pageContext":{"slug":"/spring-hello-002/","nextSlug":"/spring-hello-001/","prevSlug":""}},"staticQueryHashes":["1956554647","2938748437","3350743975","3454833782"]}