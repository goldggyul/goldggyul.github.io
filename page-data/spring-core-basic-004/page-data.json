{"componentChunkName":"component---src-templates-blog-template-js","path":"/spring-core-basic-004/","result":{"data":{"cur":{"id":"1a0fe530-96cb-5f28-af44-96c8b6081f4c","html":"<blockquote>\n<p>본 게시글은 <a href=\"https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8\">스프링 핵심 원리 - 기본편</a> 강의를 듣고 정리했습니다.</p>\n</blockquote>\n<h1 id=\"️-스프링-컨테이너와-스프링-빈\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%99%80-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88\" aria-label=\"️ 스프링 컨테이너와 스프링 빈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>☘️ 스프링 컨테이너와 스프링 빈</h1>\n<h2 id=\"-스프링-컨테이너-생성\" style=\"position:relative;\"><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%83%9D%EC%84%B1\" aria-label=\" 스프링 컨테이너 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 스프링 컨테이너 생성</h2>\n<p>그 전에 스프링 컨테이너를 생성하던 걸 생각해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//스프링 컨테이너 생성</span>\n<span class=\"token class-name\">ApplicationContext</span> applicationContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">ApplicationContext</code> 를 스프링 컨테이너라 한다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">ApplicationContext</code> 는 인터페이스이다.</p>\n<ul>\n<li>스프링 컨테이너는 XML을 기반으로 만들 수 있고, 애노테이션 기반의 자바 설정 클래스로 만들 수 있다.</li>\n<li>직전에 AppConfig 를 사용했던 방식이 <u><strong>애노테이션 기반의 자바 설정 클래스</strong></u>로 스프링 컨테이너를 만든 것이다. 따라서 구현체로 <code class=\"language-text\">AnnotationConfigApplicationContext</code>를 자바 설정 클래스를 기반으로 스프링 컨테이너( ApplicationContext )를 만들었다.</li>\n<li>더 정확히는 스프링 컨테이너를 부를 때 <code class=\"language-text\">BeanFactory</code> , <code class=\"language-text\">ApplicationContext</code> 로 구분해서 이야기한다. <code class=\"language-text\">BeanFactory</code>가 좀 더 위에 있고, <code class=\"language-text\">ApplicationContext</code>는 유틸리티성으로 이것 저것 추가된 것이다. BeanFactory 를 직접 사용하는 경우는 거의 없으므로 일반적으로 ApplicationContext 를 스프링 컨테이너라 한다.</li>\n</ul>\n</li>\n<li>\n<h3 id=\"생성-과정\" style=\"position:relative;\"><a href=\"#%EC%83%9D%EC%84%B1-%EA%B3%BC%EC%A0%95\" aria-label=\"생성 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>생성 과정</h3>\n<ol>\n<li>\n<p>컨테이너 생성</p>\n<ul>\n<li>컨테이너 생성 시에 구성 정보를 지정해줘야 한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABJElEQVQoz42SaY6DMAyFuf8BuFFPQH+UVUW07EsBsRZ41bMUxHRmqlqyYmL8JS+2BgDruuKTPZ9PTNMka9u2OJ/PME0ThmEgy7I9P88ztNPpJMDb7YYwDBFFETzPg+u64ixI0xRVVeHxeKAsS/kuigJ5nsvKXF3XSJIEmq7rWJYFvu8LlH69XsW5FwSBQN+NNdu2/dgjVMMXxhsQQFmU7DgObNsW2cyN4yhwATKgU7aKj859SmVR0zSwLEueZhgGkXu5XATKw37d8B2kYgJZ0Pf9Lpcxm8E8czuQAU/n+p8pYNd1UP8fY952B7JjcRxLM5jkJiXxndRIqDdUhQrCVcVUJECOCQH3+30fBXUIgXw3jso3RiUaqbwBQZ+6/FfDjq7G5gW2iQPfOlROtQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008172141522\"\n        title=\"image-20221008172141522\"\n        src=\"/static/59b151f966d13ccd0b80c089e662a234/37523/image-20221008172141522.png\"\n        srcset=\"/static/59b151f966d13ccd0b80c089e662a234/e9ff0/image-20221008172141522.png 180w,\n/static/59b151f966d13ccd0b80c089e662a234/f21e7/image-20221008172141522.png 360w,\n/static/59b151f966d13ccd0b80c089e662a234/37523/image-20221008172141522.png 720w,\n/static/59b151f966d13ccd0b80c089e662a234/302a4/image-20221008172141522.png 1080w,\n/static/59b151f966d13ccd0b80c089e662a234/07a9c/image-20221008172141522.png 1440w,\n/static/59b151f966d13ccd0b80c089e662a234/8170e/image-20221008172141522.png 2132w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>스프링 빈 등록</p>\n<ul>\n<li>\n<p>빈 이름은 메서드 이름을 사용하지만, 직접 부여할 수도 있다.</p>\n<p><code class=\"language-text\">@Bean(name=\"memberService2\")</code></p>\n</li>\n<li>\n<p>하지만 역시 그냥 기본 사용하는 것 추천</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB4UlEQVQoz4WSW08aQRiG+TfL7s66yyyzi65FhAuNhib9t5VeiNzZXwCiHAJoCRGBBYocfJoZkya96iRv5pCZZ97vkGk/tmk2m7TbbeaLBelyRZouWaUrVqtP7XY7o81mw3a75fX11dxvtVr0+31z/v7+bubM9cUZpeIppfMyV1eXfKteUv16QaVaoVypUCqdc3//k/V6zWw2Y7lc8vb2xsvLi9F0OiVNU3M+HA7JqDDAFzaB7+MHPjLwCHI+IvRwpcASFrf1Ww77A4fDwTjUjweDgXE3n8+Nez2088xZIolDn0LhmNMvCeXiCSoJsKWN4ztkjyx+NGosfi/+hqph2rEGd7tdI70ejUZkZBhi21mUiiicnBKqAo4QWK6N4zlYnkWtXmO2mTL6NaLVbNHr9UyYnU7HSH+iwx+Px2SKiUTmfDQ4yEliFZDEkjgKcJSNJbLU7m5YbGYMR0MeHh6Mo8lkYnKm4Rr6/Pz86TCOQqQvCENJqCLiWBFHeaQKcALbOLy5+858M2MwHPD0+GSAuhgapvOo9xqmoSaHKueh8nlUFJEc50kKeY5il6wGCov6XZ3tbvtP63x8fJhZt4uWLpgpSk6GOI6NEC6u5+EKLYHrCBzHJZu1aTQa7Pd7/je06z/Mswc3YpKbmQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008172225612\"\n        title=\"image-20221008172225612\"\n        src=\"/static/d727e9a97e992fbaef51cceeb6ee0800/37523/image-20221008172225612.png\"\n        srcset=\"/static/d727e9a97e992fbaef51cceeb6ee0800/e9ff0/image-20221008172225612.png 180w,\n/static/d727e9a97e992fbaef51cceeb6ee0800/f21e7/image-20221008172225612.png 360w,\n/static/d727e9a97e992fbaef51cceeb6ee0800/37523/image-20221008172225612.png 720w,\n/static/d727e9a97e992fbaef51cceeb6ee0800/302a4/image-20221008172225612.png 1080w,\n/static/d727e9a97e992fbaef51cceeb6ee0800/07a9c/image-20221008172225612.png 1440w,\n/static/d727e9a97e992fbaef51cceeb6ee0800/da893/image-20221008172225612.png 2130w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>스프링 빈 의존관계 설정 - 준비</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAACGElEQVQoz4WSvU8TcRjH7+/QQRo5aO96Lb3fXaWtlrd2ZhK8oguDOrDyNxgX44I6OOrkgjIYoJfARgOBYliuOuApQg0vbfpCj1I+5m7AkSf55HmmT57nyVdaXf3K4uIiX5aW2NzcpFwus7Ozc8329ja1Wg3P82g2m3S9LifHJziOg1NxcF0X79yjc96hXq8jZdMGargfTYsRj8dJiigioaGoUQbDEfpCIVZWV7jwLgLx4ckh9UYdr+MFtNttDo4POGuccfTnCCk/kUUMaQghEIZgOKljJg0SumBI14koCrZt43U95j7NYb4ymXw/yf7pPqftU558eEzqdYr8uxwLxQWkibEMRlwlk8kwMjrG+FiWpCkCkaIo9MsyxWKRXq/H3u891n6sseVu0el2uOxdUj4os/59nY2fGziugzQy+oCB8CDxhE5CGEFXVDUQqtEo8sDAtfCmatVbSPnx+xgJDdM00Q2T9LBBNmOQHhZosRh3Zfn65NmPs2gvNXJvclT+VgLJ/Od5lBcK+bc57G/2/x/6QjN5j3QqSTplIoROVNMYDIcDob/h7q9d7IpNab9E+6IdCJ2qg+3YlNwS7qGLlEkJwnIfSiRMRI0S0xRiWgRZ7udOKMSt27dZXl7m6urqxpNrZzWkp8+eMzX9CKtgYVkW01aBacvCKhQozMzwcGoqyKefQz9nzVYzwI+Ljz83mg1a7RbVapV/ycnxzTLIcHQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008172417929\"\n        title=\"image-20221008172417929\"\n        src=\"/static/239738e43564c053e22e9cfb3972d804/37523/image-20221008172417929.png\"\n        srcset=\"/static/239738e43564c053e22e9cfb3972d804/e9ff0/image-20221008172417929.png 180w,\n/static/239738e43564c053e22e9cfb3972d804/f21e7/image-20221008172417929.png 360w,\n/static/239738e43564c053e22e9cfb3972d804/37523/image-20221008172417929.png 720w,\n/static/239738e43564c053e22e9cfb3972d804/302a4/image-20221008172417929.png 1080w,\n/static/239738e43564c053e22e9cfb3972d804/07a9c/image-20221008172417929.png 1440w,\n/static/239738e43564c053e22e9cfb3972d804/e2cbf/image-20221008172417929.png 2138w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>스프링 빈 의존관계 설정 - 완료</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAACKElEQVQoz2WSy08TARDG908xobVhd2l3292yUNpdXkIgmqgh6tHXiT+Bg0JCxHix6kEPGsSEkBBvaDDtATBwMMETpeIDo8QDYJFuoS3d3f5MV2IkTvJlJjOZL988hM9fPrGez7OxscHe3h62XaJo29il0l/UajUcx6FcKfu+UCiQz6+Ty62x+XWTo6MjH426cG6wm7imYBjtWJZJf6/JmW4TK5UkmUgQ1zQWFxf9hopdoVqu4pQdDg8qlA7LeFWP8kEZt+pSLBQRerpMInIziqoQUVXUaBg9qpCMhOkJy0jBAJlMBtdzGZ8fZ2hyiOGXw3zbWuNge4uR1yNcfn6JazNXebEyhTDQZ6KrMh2GgZVoo8800OMamiQSk0ROBYNks1k8z2N2dZaJ7B0erzxh196h+nObqVf3uJuZ4P5SmoXcAoLV2UnodJCEkcC0+ukwUiRlmWQoSFiWaAoEfYX1ep0TZh/Ar8LJnENDoYWqtKDEdJqNTiKGwUBrmLNaC2I4QlMg4Ct0XZfbc7e4ODnEzWdXeP9xld0KpJceceHpeW7MXGf5wzJCb7eF2iKix6LE4q1oqS5aDR01FkWW5b+EjZGn300z9maMB28f8sPewXVhbm2O0flR0ktp1r/nEAb7LDRFQtd1H23JBO3tcVQljCj9IcwcE/5vJ9dQOawgpEyLUCiEJEmIsowoSjQ34mP8S+j/oefguA5eve7vtXH9mlPDrbvsF/f5DUyE8fDDMMU7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008172429885\"\n        title=\"image-20221008172429885\"\n        src=\"/static/f397aaf40591ed1945da9b2f06edc891/37523/image-20221008172429885.png\"\n        srcset=\"/static/f397aaf40591ed1945da9b2f06edc891/e9ff0/image-20221008172429885.png 180w,\n/static/f397aaf40591ed1945da9b2f06edc891/f21e7/image-20221008172429885.png 360w,\n/static/f397aaf40591ed1945da9b2f06edc891/37523/image-20221008172429885.png 720w,\n/static/f397aaf40591ed1945da9b2f06edc891/302a4/image-20221008172429885.png 1080w,\n/static/f397aaf40591ed1945da9b2f06edc891/07a9c/image-20221008172429885.png 1440w,\n/static/f397aaf40591ed1945da9b2f06edc891/8170e/image-20221008172429885.png 2132w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>설정 정보를 참고해서 의존관계를 주입한다.</p>\n<ul>\n<li>스프링은 빈을 생성하고, 의존관계를 주입하는 단계가 나누어져 있다. 자세한 내용은 의존관계 자동 주입에서 다시 설명하겠다.</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"-컨테이너에-등록된-모든-빈-조회\" style=\"position:relative;\"><a href=\"#-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%97%90-%EB%93%B1%EB%A1%9D%EB%90%9C-%EB%AA%A8%EB%93%A0-%EB%B9%88-%EC%A1%B0%ED%9A%8C\" aria-label=\" 컨테이너에 등록된 모든 빈 조회 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 컨테이너에 등록된 모든 빈 조회</h2>\n<ul>\n<li>\n<p>ApplicationContext에 등록된 모든 빈을 조회해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ApplicationContextInfoTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">AnnotationConfigApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"모든 스프링 빈 출력하기\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">findAllBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> beanDefinitionNames <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBeanDefinitionNames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> beanDefinitionName <span class=\"token operator\">:</span> beanDefinitionNames<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Object</span> bean <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span>beanDefinitionName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"beanDefinitionName = \"</span> <span class=\"token operator\">+</span> beanDefinitionName <span class=\"token operator\">+</span> <span class=\"token string\">\" object = \"</span> <span class=\"token operator\">+</span> bean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>이렇게 하면 내가 등록한 bean이 다 출력된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">beanDefinitionName <span class=\"token operator\">=</span> appConfig object <span class=\"token operator\">=</span> com.ggyul.core.AppConfig<span class=\"token variable\">$$</span>EnhancerBySpringCGLIB<span class=\"token variable\">$$</span>2495162e@5066d65f\nbeanDefinitionName <span class=\"token operator\">=</span> memberRepository object <span class=\"token operator\">=</span> com.ggyul.core.member.MemoryMemberRepository@4233e892\nbeanDefinitionName <span class=\"token operator\">=</span> memberService object <span class=\"token operator\">=</span> com.ggyul.core.member.MemberServiceImpl@77d2e85\nbeanDefinitionName <span class=\"token operator\">=</span> orderService object <span class=\"token operator\">=</span> com.ggyul.core.order.OrderServiceImpl@3ecd267f\nbeanDefinitionName <span class=\"token operator\">=</span> discountPolicy object <span class=\"token operator\">=</span> com.ggyul.core.discount.RateDiscountPolicy@58ffcbd7</code></pre></div>\n</li>\n<li>\n<p>하지만 스프링이 기반으로 등록한 bean도 같이 출력된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">beanDefinitionName <span class=\"token operator\">=</span> org.springframework.context.annotation.internalConfigurationAnnotationProcessor object <span class=\"token operator\">=</span> org.springframework.context.annotation.ConfigurationClassPostProcessor@73173f63\nbeanDefinitionName <span class=\"token operator\">=</span> org.springframework.context.annotation.internalAutowiredAnnotationProcessor object <span class=\"token operator\">=</span> org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor@55562aa9\nbeanDefinitionName <span class=\"token operator\">=</span> org.springframework.context.annotation.internalCommonAnnotationProcessor object <span class=\"token operator\">=</span> org.springframework.context.annotation.CommonAnnotationBeanPostProcessor@655ef322\nbeanDefinitionName <span class=\"token operator\">=</span> org.springframework.context.event.internalEventListenerProcessor object <span class=\"token operator\">=</span> org.springframework.context.event.EventListenerMethodProcessor@7e276594\nbeanDefinitionName <span class=\"token operator\">=</span> org.springframework.context.event.internalEventListenerFactory object <span class=\"token operator\">=</span> org.springframework.context.event.DefaultEventListenerFactory@3401a114</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>내가 진짜 등록한 애플리케이션 빈만 출력해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"모든 애플리케이션 빈 출력하기\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findApplicationBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> beanDefinitionNames <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBeanDefinitionNames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> beanDefinitionName <span class=\"token operator\">:</span> beanDefinitionNames<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">BeanDefinition</span> beanDefinition <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBeanDefinition</span><span class=\"token punctuation\">(</span>beanDefinitionName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 스프링이 뭔가 하려고 등록한 게 아니라, 내가 혹은 외부 라이브러리 등 필요해서 작성한 빈들</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>beanDefinition<span class=\"token punctuation\">.</span><span class=\"token function\">getRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token class-name\">BeanDefinition</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ROLE_APPLICATION</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">Object</span> bean <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span>beanDefinitionName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"beanDefinitionName = \"</span> <span class=\"token operator\">+</span> beanDefinitionName <span class=\"token operator\">+</span> <span class=\"token string\">\" object = \"</span> <span class=\"token operator\">+</span> bean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>등록한 5개만 출력이 된다.</li>\n<li><code class=\"language-text\">ac.getBeanDefinitionNames()</code> : 스프링에 등록된 모든 빈 이름을 조회한다.</li>\n<li><code class=\"language-text\">ac.getBean(String)</code> : 빈 이름으로 빈 객체(인스턴스)를 조회한다.\n<ul>\n<li>타입을 안줘서 <code class=\"language-text\">Object</code>로 반환된다.</li>\n</ul>\n</li>\n<li><u><strong>Role</strong></u>\n<ul>\n<li><code class=\"language-text\">ROLE_APPLICATION</code>: 직접 등록한 애플리케이션 빈</li>\n<li><code class=\"language-text\">ROLE_INFRASTRUCTURE</code>: 스프링이 내부에서 사용하는 빈</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-스프링-빈-조회---기본\" style=\"position:relative;\"><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EA%B8%B0%EB%B3%B8\" aria-label=\" 스프링 빈 조회   기본 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 스프링 빈 조회 - 기본</h2>\n<ul>\n<li>\n<p>스프링 컨테이너에서 스프링 빈을 찾는 가장 기본적인 조회 방법</p>\n<ul>\n<li><code class=\"language-text\">ac.getBean(빈이름, 타입)</code></li>\n<li><code class=\"language-text\">ac.getBean(타입)</code></li>\n</ul>\n</li>\n<li>\n<p>조회 대상 스프링 빈이 없으면 예외 발생</p>\n<p><code class=\"language-text\">NoSuchBeanDefinitionException</code>: No bean named ‘xxxxx’ available</p>\n</li>\n<li>\n<p>테스트 코드</p>\n<ul>\n<li>\n<p>빈 이름, 타입으로 조회</p>\n<ul>\n<li><code class=\"language-text\">ac.getBean(이름, 타입)</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"빈 이름으로 조회\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">MemberService</span> memberService <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService = \"</span> <span class=\"token operator\">+</span> memberService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService.getClass() = \"</span> <span class=\"token operator\">+</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>빈 타입으로 조회</p>\n<ul>\n<li><code class=\"language-text\">ac.getBean(타입)</code></li>\n<li><a href=\"./#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EB%8F%99%EC%9D%BC%ED%95%9C-%ED%83%80%EC%9E%85%EC%9D%B4-%EB%91%98-%EC%9D%B4%EC%83%81\">물론 같은 타입이 여러개 있으면..? (뒤에서)</a></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"타입으로 조회\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">MemberService</span> memberService <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService = \"</span> <span class=\"token operator\">+</span> memberService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService.getClass() = \"</span> <span class=\"token operator\">+</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>구체 타입으로 조회</p>\n<ul>\n<li>AppConfig에서 memberService() 반환을 MemberService로 했어도 컨테이너에 등록된 인스턴스 타입을 보고 결정하므로 조회가 가능하다.</li>\n<li>물론 <u><strong>구체적으로 적는 건 구현에 의존하므로 유연성이 떨어져서 좋진 않지만</strong></u>.. 가능하다!</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"구체 타입으로 조회\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByName2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">MemberServiceImpl</span> memberService <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService = \"</span> <span class=\"token operator\">+</span> memberService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService.getClass() = \"</span> <span class=\"token operator\">+</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><strong>실패 테스트</strong></p>\n<ul>\n<li>조회해서 없을 때 <code class=\"language-text\">NoSuchBeanDefinitionException</code> exception이 발생한다.</li>\n<li>참고: 이 때는 <code class=\"language-text\">assertj</code>가 아니라 <code class=\"language-text\">junit</code>의 <code class=\"language-text\">assertThrows(예외 타입, 발생 상황)</code>을 넣어준다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"빈 이름으로 조회X\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByNameX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">assertThrows</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">NoSuchBeanDefinitionException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n               <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"xxxxx\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-스프링-빈-조회---동일한-타입이-둘-이상\" style=\"position:relative;\"><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EB%8F%99%EC%9D%BC%ED%95%9C-%ED%83%80%EC%9E%85%EC%9D%B4-%EB%91%98-%EC%9D%B4%EC%83%81\" aria-label=\" 스프링 빈 조회   동일한 타입이 둘 이상 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 스프링 빈 조회 - 동일한 타입이 둘 이상</h2>\n<p>당연히 동일한 타입의 빈이 여러개인데 이름이 없으면 오류가 발생한다.</p>\n<ul>\n<li>\n<p>동일한 타입의 빈을 여러개 넣기 위해서 설정 클래스를 만들자.</p>\n<ul>\n<li>동일한 타입의 빈이 여러개인데 이름을 정하지 않으면 <code class=\"language-text\">NoUniqueBeanDefinitionException</code>이 발생한다.</li>\n<li><u><strong>static</strong></u> inner class: <u><strong>외부 참조</strong></u>가 없다. 내부에서만 쓰겠다는 뜻</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ApplicationContextSameBeanFindTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">AnnotationConfigApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SameBeanConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"타입으로 조회 시 같은 타입이 둘 이상 있으면, 중복 오류가 발생한다\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByTypeDuplicate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span><span class=\"token function\">assertThrows</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">NoUniqueBeanDefinitionException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberRepository</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Configuration</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SameBeanConfig</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token annotation punctuation\">@Bean</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberRepository</span> <span class=\"token function\">memberRepository1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token annotation punctuation\">@Bean</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberRepository</span> <span class=\"token function\">memberRepository2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>그렇다면 이름을 지정하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"타입으로 조회 시 같은 타입이 둘 이상 있으면, 빈 이름을 지정하면 된다\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByTypeDuplicateUsingName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">MemberRepository</span> memberRepository1 <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberRepository1\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberRepository</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberRepository1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>모든 빈도 꺼낼 수 있다.</p>\n<ul>\n<li><code class=\"language-text\">getBeansOfType(타입)</code>을 통해 맵의 형태로 해당 객체들을 받을 수 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"해당 타입의 모든 빈 꺼낸다\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findBeansByType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberRepository</span><span class=\"token punctuation\">></span></span> beansOfType <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBeansOfType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberRepository</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key <span class=\"token operator\">:</span> beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">keySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key  = \"</span> <span class=\"token operator\">+</span> key <span class=\"token operator\">+</span><span class=\"token string\">\" value = \"</span> <span class=\"token operator\">+</span> beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"beansOfType = \"</span> <span class=\"token operator\">+</span> beansOfType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>단축키:</p>\n<ul>\n<li><code class=\"language-text\">Command+Shift+Enter</code>: 현재 줄 완성하고 아래로</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-스프링-빈-조회---상속-관계-\" style=\"position:relative;\"><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EC%83%81%EC%86%8D-%EA%B4%80%EA%B3%84-\" aria-label=\" 스프링 빈 조회   상속 관계  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 스프링 빈 조회 - 상속 관계 ✨✨✨</h2>\n<blockquote>\n<h3 id=\"부모-타입으로-조회하면-자식-타입도-함께-조회한다\" style=\"position:relative;\"><a href=\"#%EB%B6%80%EB%AA%A8-%ED%83%80%EC%9E%85%EC%9C%BC%EB%A1%9C-%EC%A1%B0%ED%9A%8C%ED%95%98%EB%A9%B4-%EC%9E%90%EC%8B%9D-%ED%83%80%EC%9E%85%EB%8F%84-%ED%95%A8%EA%BB%98-%EC%A1%B0%ED%9A%8C%ED%95%9C%EB%8B%A4\" aria-label=\"부모 타입으로 조회하면 자식 타입도 함께 조회한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>부모 타입으로 조회하면, 자식 타입도 함께 조회한다</h3>\n<p>그래서 모든 자바 객체의 최고 부모인 Object 타입으로 조회하면, 모든 스프링 빈을 조회한다.</p>\n</blockquote>\n<ul>\n<li>\n<p>같은 부모 타입의 두개 자식 클래스를 만들어보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ApplicationContextExtendsFindTest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">AnnotationConfigApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Configuration</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestConfig</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token annotation punctuation\">@Bean</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">DiscountPolicy</span> <span class=\"token function\">rateDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token annotation punctuation\">@Bean</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">DiscountPolicy</span> <span class=\"token function\">fixDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FixDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>그냥 당연히 부모 타입으로 조회시 자식 타입 모두 조회되며, 자식 타입으로도 조회할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모 타입으로 조회시, 자식이 둘 이상 있으면 중복 오류 발생\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByParentTypeDuplicate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">assertThrows</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">NoUniqueBeanDefinitionException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n               <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모 타입으로 조회시, 자식이 둘 이상 있으면, 빈 이름을 지정하면 된다\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findBeanByParentTypeBeanName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">DiscountPolicy</span> rateDiscountPolicy <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rateDiscountPolicy\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>rateDiscountPolicy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"특정 하위 타입으로 조회\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findBeanBySubType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">RateDiscountPolicy</span> bean <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>bean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모 타입으로 모두 조회하기\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findAllBeanByParentType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DiscountPolicy</span><span class=\"token punctuation\">></span></span> beansOfType <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBeansOfType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DiscountPolicy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key <span class=\"token operator\">:</span> beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">keySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key = \"</span> <span class=\"token operator\">+</span> key <span class=\"token operator\">+</span> <span class=\"token string\">\" value=\"</span> <span class=\"token operator\">+</span> beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모 타입으로 모두 조회하기 - Object\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findAllBeanByObjectType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> beansOfType <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBeansOfType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> key <span class=\"token operator\">:</span> beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">keySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"key = \"</span> <span class=\"token operator\">+</span> key <span class=\"token operator\">+</span> <span class=\"token string\">\" value=\"</span> <span class=\"token operator\">+</span>\n                       beansOfType<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><u><strong>실제 테스트 케이스에는 출력문을 넣지 말자</strong></u>. 시스템이 테스트를 확인하게 해야 하기 때문. (물론 디버깅용은 ㄱㅊ~)</p>\n</li>\n</ul>\n<blockquote>\n<p>실제 개발을 하면서 <code class=\"language-text\">ac.getBean()</code>으로 직접 빈을 꺼낼 일은 거의 없다. 거의 주입받기 때문이다.</p>\n<p>하지만 이런 <u><strong>스프링이 어디까지 조회해서 빈을 찾는 지 알아야 후에 자동 의존 관계 주입 시 문제 없이 해결</strong></u>할 수 있기 때문에 알아두자!</p>\n</blockquote>\n<h2 id=\"-beanfactory와-applicationcontext\" style=\"position:relative;\"><a href=\"#-beanfactory%EC%99%80-applicationcontext\" aria-label=\" beanfactory와 applicationcontext permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 BeanFactory와 ApplicationContext</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABNElEQVQ4y6VU2YqDQBDM//+SRFARHzxeJXhE8ETUxBNDjl6qYUXMJJvdbWh67Jkpu2p6Zne73eh+vz/59XqlaZo4Yg38crnQOI70ag/yOwxEdjqdqG1bOhwOpCgK6bpOURRR3/c8JzJgLYCPx2NxWFVVDGjbNpmmSZZlkeu6XCHmRHueANdxnmc6n89Mw/M88n2f6SMH6qI9QsDtGAYt4WsTrX9bIWjlec66QT/DMCiOY8qybNHwowq/Y5IkDKKqKu33e474dhyHf/RrQGg4DAMvgn5hGPIYuX9r2HUd+5803PYVDO0DX+dE4G8po4HruqayLJkuvCgKzoH2R5TXTdo0DZ+oJEkkyzJpmsYRoJj7sbG3hirSNKUgCOh4PHL7IOKEcVteXj10v+iiizRda/bqcfgCn21AOGq6yBYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008220420796\"\n        title=\"image-20221008220420796\"\n        src=\"/static/f4c1db97e8801fac580fbf679caff3c9/37523/image-20221008220420796.png\"\n        srcset=\"/static/f4c1db97e8801fac580fbf679caff3c9/e9ff0/image-20221008220420796.png 180w,\n/static/f4c1db97e8801fac580fbf679caff3c9/f21e7/image-20221008220420796.png 360w,\n/static/f4c1db97e8801fac580fbf679caff3c9/37523/image-20221008220420796.png 720w,\n/static/f4c1db97e8801fac580fbf679caff3c9/302a4/image-20221008220420796.png 1080w,\n/static/f4c1db97e8801fac580fbf679caff3c9/07a9c/image-20221008220420796.png 1440w,\n/static/f4c1db97e8801fac580fbf679caff3c9/191e2/image-20221008220420796.png 1836w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>BeanFactory가 있고, BeanFactory를 상속받은 ApplicationContext가 있다. (인터페이스끼리는 상속한다고 표현)</p>\n</li>\n<li>\n<h3 id=\"beanfactory\" style=\"position:relative;\"><a href=\"#beanfactory\" aria-label=\"beanfactory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BeanFactory</h3>\n<ul>\n<li>스프링 컨테이너의 최상위 인터페이스다.</li>\n<li><u><strong>스프링 빈을 관리하고 조회하는 역할</strong></u>을 담당한다.</li>\n<li>getBean() 을 제공한다.</li>\n<li>지금까지 우리가 사용했던 대부분의 기능은 BeanFactory가 제공하는 기능이다.</li>\n</ul>\n</li>\n<li>\n<h3 id=\"applicationcontext\" style=\"position:relative;\"><a href=\"#applicationcontext\" aria-label=\"applicationcontext permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ApplicationContext</h3>\n<ul>\n<li>\n<p>BeanFactory 기능을 모두 상속받아서 제공한다.</p>\n</li>\n<li>\n<p>빈을 관리하고 검색하는 기능을 BeanFactory가 제공해주는데, 그러면 둘의 차이가 뭘까?</p>\n</li>\n<li>\n<p>애플리케이션을 개발할 때는 빈을 관리하고 조회하는 기능은 물론이고, <u><strong>수 많은 부가기능</strong></u>이 필요하다.</p>\n</li>\n<li>\n<p><strong>부가기능</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABAElEQVQoz3VR2aqDUAz0/z/K14I+iPqmgvuObd33TpmAl95ybyCccDKZTBLlPE9c9nq9fpw2jiPSNIWqqrjdbiiKAtu2/cJ+GrkUFvV9j+fziWmasCyLELVti6ZpUFUVgiAQZ3y/3yVHzIVl7TAMmOcZSl3XsCxLFIRhKCqyLINhGNB1XRR2XYeyLBFFETRNg23b8H1fGnieJ398H48HFHah7/uOPM8FRALKj+NYYqqgs4AY5qiKWDY6jkM41nWF8tceKJ9jcV+MCeQ6rphkbPBt5FJI8H0MGrtyXxyT4ziOgyRJpNF/h5SjXMmL7JOYxSTijkzThOu6ovAbd70kfANGJxe3BCNv6gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008220844856\"\n        title=\"image-20221008220844856\"\n        src=\"/static/37f8a6550f0cf83703d23bc562604094/37523/image-20221008220844856.png\"\n        srcset=\"/static/37f8a6550f0cf83703d23bc562604094/e9ff0/image-20221008220844856.png 180w,\n/static/37f8a6550f0cf83703d23bc562604094/f21e7/image-20221008220844856.png 360w,\n/static/37f8a6550f0cf83703d23bc562604094/37523/image-20221008220844856.png 720w,\n/static/37f8a6550f0cf83703d23bc562604094/302a4/image-20221008220844856.png 1080w,\n/static/37f8a6550f0cf83703d23bc562604094/07a9c/image-20221008220844856.png 1440w,\n/static/37f8a6550f0cf83703d23bc562604094/bcec6/image-20221008220844856.png 1834w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>메시지소스를 활용한 국제화 기능</p>\n<p>예를 들어서 한국에서 들어오면 한국어로, 영어권에서 들어오면 영어로 출력</p>\n</li>\n<li>\n<p>환경변수</p>\n<p>로컬, 개발, 운영등을 구분해서 처리</p>\n</li>\n<li>\n<p>애플리케이션 이벤트</p>\n<p>이벤트를 발행하고 구독하는 모델을 편리하게 지원</p>\n</li>\n<li>\n<p>편리한 리소스 조회</p>\n<p>파일, 클래스패스, 외부 등에서 리소스를 편리하게 조회</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<ul>\n<li>\n<p>ApplicationContext는 BeanFactory의 기능을 상속받는다.</p>\n</li>\n<li>\n<p>ApplicationContext는 빈 관리기능 + 편리한 부가 기능을 제공한다.</p>\n</li>\n<li>\n<p>BeanFactory를 직접 사용할 일은 거의 없다. 부가기능이 포함된 ApplicationContext를 사용한다.</p>\n</li>\n<li>\n<p><u><strong>BeanFactory나 ApplicationContext를 스프링 컨테이너</strong></u>라 한다</p>\n</li>\n</ul>\n<h2 id=\"-다양한-설정-형식-지원---자바-코드-xml\" style=\"position:relative;\"><a href=\"#-%EB%8B%A4%EC%96%91%ED%95%9C-%EC%84%A4%EC%A0%95-%ED%98%95%EC%8B%9D-%EC%A7%80%EC%9B%90---%EC%9E%90%EB%B0%94-%EC%BD%94%EB%93%9C-xml\" aria-label=\" 다양한 설정 형식 지원   자바 코드 xml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 다양한 설정 형식 지원 - 자바 코드, XML</h2>\n<ul>\n<li>스프링 컨테이너는 다양한 형식의 설정 정보를 받아드릴 수 있게 유연하게 설계되어 있다.\n<ul>\n<li>자바 코드, XML, Groovy 등등</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeElEQVQoz5WT16oCQRBE9/8/yQD6IIKighHMGDDnHOtyGloWFeEWNDsznarDBvf7XY/H4yXcn8+n9vu9JpOJarWaotGoksmkOp2OptOpDoeD2XzzDTiEgSE4nU5arVZqNpvKZDLK5/Pq9/tar9emC9s6iPUKiNLF7+fz2c6z2cyYAd7CtmGfj4Dh7+Vy0WAw0HA4VDabVS6X03g81mg0Mt03n58McSqVSorFYorH40okEib1ev3F/F8MwXK5NEYwgy1nevje74+APPikANOiZ+7MxBFPQk/d1v09RqA3XK9XC+Z9AqwJ4qBkbLz0MAIyoqSkXq+narWq+XxuATabjUm73bb12e12doftYrGwPUW2262Ox6OtWcBDKpVSJBKxprPA7Js7MGFf7GKxaMkQpl8ul5VOp1UoFNRqtawVgUfHgD+BMni73W7GBqbdbteSwBChx/SXc6PRMF98uFsPKZdSyUhQgnnT0fFeqVRsID4IQCJ0/J4+tD+NPJPTwJ5b9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008221215738\"\n        title=\"image-20221008221215738\"\n        src=\"/static/ea555b981aab3a1617ae6c8ca59002e4/37523/image-20221008221215738.png\"\n        srcset=\"/static/ea555b981aab3a1617ae6c8ca59002e4/e9ff0/image-20221008221215738.png 180w,\n/static/ea555b981aab3a1617ae6c8ca59002e4/f21e7/image-20221008221215738.png 360w,\n/static/ea555b981aab3a1617ae6c8ca59002e4/37523/image-20221008221215738.png 720w,\n/static/ea555b981aab3a1617ae6c8ca59002e4/302a4/image-20221008221215738.png 1080w,\n/static/ea555b981aab3a1617ae6c8ca59002e4/07a9c/image-20221008221215738.png 1440w,\n/static/ea555b981aab3a1617ae6c8ca59002e4/161ec/image-20221008221215738.png 1840w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>요즘은 자바 코드 기반을 많이 사용한다. 과거엔  XML을 많이 사용했다.</p>\n</li>\n<li>\n<h3 id=\"애노테이션-기반-자바-코드-설정-사용\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98-%EA%B8%B0%EB%B0%98-%EC%9E%90%EB%B0%94-%EC%BD%94%EB%93%9C-%EC%84%A4%EC%A0%95-%EC%82%AC%EC%9A%A9\" aria-label=\"애노테이션 기반 자바 코드 설정 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애노테이션 기반 자바 코드 설정 사용</h3>\n<ul>\n<li>클래스를 생성하면서 자바 코드로된 설정 정보를 넘기면 된다.</li>\n</ul>\n</li>\n<li>\n<h3 id=\"xml-설정-사용\" style=\"position:relative;\"><a href=\"#xml-%EC%84%A4%EC%A0%95-%EC%82%AC%EC%9A%A9\" aria-label=\"xml 설정 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>XML 설정 사용</h3>\n<p>아직 많은 레거시 프로젝트 들이 XML로 되어 있고, 또 XML을 사용하면 컴파일 없이 빈 설정 정보를 변경할 수 있는 장점도 있으므로 한번쯤 배워두는 것도 괜찮다</p>\n<ul>\n<li>\n<p>resources에 (자바 코드가 아닌건 다 여기!) xml 파일을 작성하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>beans</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans<span class=\"token punctuation\">\"</span></span>\n       <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span>\n       <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>memberService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.ggyul.core.member.MemberServiceImpl<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>constructor-arg</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>memberRepository<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>memberRepository<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>memberRepository<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.ggyul.core.member.MemoryMemberRepository<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>orderService<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.ggyul.core.order.OrderServiceImpl<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>constructor-arg</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>memberRepository<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>memberRepository<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>constructor-arg</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>discountPolicy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>discountPolicy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>discountPolicy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.ggyul.core.discount.RateDiscountPolicy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>beans</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">AppConfig</code> 에서 xml로만 바뀐 것 뿐이지 나머지는 정말 같다.</li>\n<li><bean>으로 생성하고,  <constructor-arg> 로 생성자 인자를 넣어주면 된다.</li>\n</ul>\n</li>\n<li>\n<p>테스트 코드</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">XmlAppContext</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">xmlAppContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// resources 아래 xml을 읽는다.</span>\n        <span class=\"token class-name\">ApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GenericXmlApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"appConfig.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MemberService</span> memberService <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span><span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInstanceOf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>나머지는 다 동일!</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<ul>\n<li>xml 기반의 appConfig.xml 스프링 설정 정보와 자바 코드로 된 AppConfig.java 설정 정보를 비교해보면 거의 비슷하다는 것을 알 수 있다.</li>\n<li>xml 기반으로 설정하는 것은 최근에 잘 사용하지 않으므로 이정도로 마무리 하고, 필요하면 스프링 공식 레퍼런스 문서를 확인하자.\n<ul>\n<li><a href=\"https://spring.io/projects/spring-framework\">https://spring.io/projects/spring-framework</a></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h2 id=\"-스프링-빈-설정-메타-정보---beandefinition\" style=\"position:relative;\"><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%84%A4%EC%A0%95-%EB%A9%94%ED%83%80-%EC%A0%95%EB%B3%B4---beandefinition\" aria-label=\" 스프링 빈 설정 메타 정보   beandefinition permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 스프링 빈 설정 메타 정보 - BeanDefinition</h2>\n<p>어떻게 이렇게 java기반에서 xml기반으로 쉽게 바꾸고, 심지어 커스텀 클래스로도 가능한 것일까? 그 중심에는 <code class=\"language-text\">BeanDefinition</code>이라는 추상화가 있다.</p>\n<ul>\n<li>\n<p>역할과 구현을 개념적으로 나눈 것이다!</p>\n<p>XML을 읽어서 BeanDefinition을 만들면 된다. 자바 코드를 읽어서 BeanDefinition을 만들면 된다. 스프링 컨테이너는 자바 코드인지, XML인지 몰라도 된다. 오직 BeanDefinition만 알면 된다.</p>\n</li>\n</ul>\n<p><code class=\"language-text\">BeanDefinition</code> 을 빈 설정 메타정보라 한다. <code class=\"language-text\">@Bean</code>, <code class=\"language-text\">&lt;bean></code>  당 각각 하나씩 메타 정보가 생성된다. 스프링 컨테이너는 이 메타정보를 기반으로 스프링 빈을 생성한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA2UlEQVQY04WRyQqEQBBD+/9/TVwQPaggetCD+75rhhQowzDDNATaWCTPUvm+D9M0YRgGoihCmqao6xpVVSHPcwRBINI0Dbquw7ZtmVnXFdd14TzPR8dxQDVNg6IoRLwPw4B937Ftm2gcR8RxDMuy4LouHMeRuW+HoQp/Ttd16PteiEhOirIsMc+zvCflLQl8Nz7bSE3C+7lt2+fOlbDoJyGbl2URIop7Yhg/nz7psizDNE1Cy3numKWcJzHnFFNJR4Ot/ElUGIYSSCqG3X6SJM8abt/zPAmn9wIPG8u4RjkpHAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008224225917\"\n        title=\"image-20221008224225917\"\n        src=\"/static/dd8067448b819c4266ba266b4287f2a1/37523/image-20221008224225917.png\"\n        srcset=\"/static/dd8067448b819c4266ba266b4287f2a1/e9ff0/image-20221008224225917.png 180w,\n/static/dd8067448b819c4266ba266b4287f2a1/f21e7/image-20221008224225917.png 360w,\n/static/dd8067448b819c4266ba266b4287f2a1/37523/image-20221008224225917.png 720w,\n/static/dd8067448b819c4266ba266b4287f2a1/302a4/image-20221008224225917.png 1080w,\n/static/dd8067448b819c4266ba266b4287f2a1/07a9c/image-20221008224225917.png 1440w,\n/static/dd8067448b819c4266ba266b4287f2a1/c95f0/image-20221008224225917.png 1842w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABfUlEQVQoz12T2arCQBBE5///KKAPQUTxIbiCgrihuO+7UetyGjrkOtBklu6q6ppJeL/f+nw+8m9+fr/f1ev11Gg01Gw2Ldrtttbrtb7f778arwtMGCTkg8FZp9NRq9XScDjUaDRSv9/X8XiUj9/8DPB3oG632+l8PlvB4/GwfVQwJxwoDx48meLpdKrZbKbBYGBzQAG43W7WJuCv18vicrnYmrPr9Wp74ASQD4eDtVUoFBTHscrlshaLhQFS6CSTyUT7/V7P5zMTwRnkm81Gp9NJAW8qlYpKpZKq1aoloRp2mF1JvnX2OAOAgCC7lCRJFEWRarWaxXK5ND9QyCUQzLfbre1zIShFMeqwAkD3N8A8Ho8tkbaLxaIVsKYN94m2sAYbUAcBalerlRG6l4EWaaHb7Qq19XrdngpJ+AWgF/FljzbZB5SOCCcPTJCPlwQF/gRg9XZg95Gmabbm3HPsHSIbJvzgL0AhFuCHPxm6mM/npoLnARkg2OIKIQDwD5lCQ2w5pLRZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008224249074\"\n        title=\"image-20221008224249074\"\n        src=\"/static/7032b846c4bd657c7399d7a8d1f5e032/37523/image-20221008224249074.png\"\n        srcset=\"/static/7032b846c4bd657c7399d7a8d1f5e032/e9ff0/image-20221008224249074.png 180w,\n/static/7032b846c4bd657c7399d7a8d1f5e032/f21e7/image-20221008224249074.png 360w,\n/static/7032b846c4bd657c7399d7a8d1f5e032/37523/image-20221008224249074.png 720w,\n/static/7032b846c4bd657c7399d7a8d1f5e032/302a4/image-20221008224249074.png 1080w,\n/static/7032b846c4bd657c7399d7a8d1f5e032/07a9c/image-20221008224249074.png 1440w,\n/static/7032b846c4bd657c7399d7a8d1f5e032/84a78/image-20221008224249074.png 1832w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>AnnotationConfigApplicationContext 는 AnnotatedBeanDefinitionReader 를 사용해서 AppConfig.class 를 읽고 BeanDefinition 을 생성한다.</p>\n</li>\n<li>\n<p>GenericXmlApplicationContext 는 XmlBeanDefinitionReader 를 사용해서 appConfig.xml 설정 정보를 읽고 BeanDefinition 을 생성한다.</p>\n</li>\n<li>\n<p>∴ 새로운 형식의 설정 정보가 추가되면, XxxBeanDefinitionReader를 만들어서 BeanDefinition 을 생성하면 된다.</p>\n</li>\n<li>\n<p>BeanDefinition 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BeanDefinitionTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">AnnotationConfigApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"빈 설정 메타정보 확인\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">findApplicationBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> beanDefinitionNames <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBeanDefinitionNames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> beanDefinitionName <span class=\"token operator\">:</span> beanDefinitionNames<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">BeanDefinition</span> beanDefinition <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBeanDefinition</span><span class=\"token punctuation\">(</span>beanDefinitionName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>beanDefinition<span class=\"token punctuation\">.</span><span class=\"token function\">getRole</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token class-name\">BeanDefinition</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ROLE_APPLICATION</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"beanDefinitionName = \"</span> <span class=\"token operator\">+</span> beanDefinitionName <span class=\"token operator\">+</span>\n                        <span class=\"token string\">\" beanDefinition = \"</span> <span class=\"token operator\">+</span> beanDefinition<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>결과</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">beanDefinitionName = appConfig beanDefinition = Generic bean: class [com.ggyul.core.AppConfig$$EnhancerBySpringCGLIB$$6a31343]; scope=singleton; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null\nbeanDefinitionName = memberRepository beanDefinition = Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=memberRepository; initMethodName=null; destroyMethodName=(inferred); defined in com.ggyul.core.AppConfig\nbeanDefinitionName = memberService beanDefinition = Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=memberService; initMethodName=null; destroyMethodName=(inferred); defined in com.ggyul.core.AppConfig\nbeanDefinitionName = orderService beanDefinition = Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=orderService; initMethodName=null; destroyMethodName=(inferred); defined in com.ggyul.core.AppConfig\nbeanDefinitionName = discountPolicy beanDefinition = Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=discountPolicy; initMethodName=null; destroyMethodName=(inferred); defined in com.ggyul.core.AppConfig</code></pre></div>\n</li>\n<li>\n<p>BeanDefiniion을 살펴볼 수 있다.</p>\n<ul>\n<li>BeanClassName: 생성할 빈의 클래스 명(자바 설정 처럼 팩토리 역할의 빈을 사용하면 없음)</li>\n<li>factoryBeanName: 팩토리 역할의 빈을 사용할 경우 이름, 예) appConfig</li>\n<li>factoryMethodName: 빈을 생성할 팩토리 메서드 지정, 예) memberService</li>\n<li>Scope: 싱글톤(기본값)</li>\n<li>lazyInit: 스프링 컨테이너를 생성할 때 빈을 생성하는 것이 아니라, 실제 빈을 사용할 때 까지 최대한 생성을 지연처리 하는지 여부</li>\n<li>InitMethodName: 빈을 생성하고, 의존관계를 적용한 뒤에 호출되는 초기화 메서드 명</li>\n<li>DestroyMethodName: 빈의 생명주기가 끝나서 제거하기 직전에 호출되는 메서드 명</li>\n<li>Constructor arguments, Properties: 의존관계 주입에서 사용한다. (자바 설정 처럼 팩토리 역할의 빈을 사용하면 없음)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"정리-1\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC-1\" aria-label=\"정리 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<ul>\n<li>BeanDefinition을 직접 생성해서 스프링 컨테이너에 등록할 수 도 있다. 하지만 실무에서 BeanDefinition을 직접 정의하거나 사용할 일은 거의 없다. ➡️ 어려우면 그냥 넘어가면 된다^^!</li>\n<li>BeanDefinition에 대해서는 너무 깊이있게 이해하기 보다는, <u><strong>스프링이 다양한 형태의 설정 정보를 BeanDefinition으로 추상화해서 사용</strong></u>하는 것 정도만 이해하면 된다.</li>\n<li>가끔 스프링 코드나 스프링 관련 오픈 소스의 코드를 볼 때, BeanDefinition 이라는 것이 보일 때가 있다. 이때 이러한 메커니즘을 떠올리면 된다</li>\n</ul>\n<blockquote>\n<h3 id=\"참고-스프링-빈을-등록하는-방법\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88%EC%9D%84-%EB%93%B1%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"참고 스프링 빈을 등록하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고: 스프링 빈을 등록하는 방법</h3>\n<p>스프링 빈을 등록하는 방법은 크게 2가지가 있다.</p>\n<ol>\n<li>\n<p>직접 등록</p>\n<p>예) Xml</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 497px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVQY02WPWw6FIAxEWRGCrxAVRYQP9r+g3pwmmJv4cWKmnRmqsdZKCEGcczJNkwzDIN57Bc2862VZVK/rqrtxHJV5noUePGbbNnmeR0kpKcdxyH3fSs5ZruvSea31Q2tNYY/fECYQY9Qh16L3fX/L2Z3n+XoI8uWIUsrrBcP5GAgS4mIMXfdC4CFm0P+Akv/dD2heh+h1AmtLAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008225704195\"\n        title=\"image-20221008225704195\"\n        src=\"/static/c12232768acf5ecc1ab2c98d0994a51c/15d25/image-20221008225704195.png\"\n        srcset=\"/static/c12232768acf5ecc1ab2c98d0994a51c/e9ff0/image-20221008225704195.png 180w,\n/static/c12232768acf5ecc1ab2c98d0994a51c/f21e7/image-20221008225704195.png 360w,\n/static/c12232768acf5ecc1ab2c98d0994a51c/15d25/image-20221008225704195.png 497w\"\n        sizes=\"(max-width: 497px) 100vw, 497px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이 때는 명확하게 클래스로 등록이 되어 있다.</p>\n</li>\n<li>\n<p><u><strong>팩토리 역할의 빈</strong></u>을 이용해서 등록</p>\n<p>예) Java 코드의  AppConfig</p>\n<p>이 때는 빈에서 팩토리 메서드를 통해 객체를 제공한다. 외부에서 메서드를 호출해서 생성이 되는 방식.</p>\n<table>\n<thead>\n<tr>\n<th><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 363px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxElEQVQY0z2QSZLFIAxDc6TMIwlDIFnm/qdR13MXf0GBZVmyaO771jRN2vddvL33Oo5DORcty6Jt2wznTikphGj967p0nqee51EIQTFGfd+nppTHCsC2bZVz1umcUroVU1Lf9zbknDMBuOu62vt9XxPHjDl6DWTccAbsus4aHO+DYeM42nbUCNcUJEAULhy0GgrI8zz/YtcoDIAhylY1GkngVTPeaHAaSLhQ0HQWN5lQKUXDMFgCMAy42Y4FmK1z//8b9AdoG6ysKJjwjAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008225930691\"\n        title=\"image-20221008225930691\"\n        src=\"/static/fbbe87b58f93dd798a1042f42f979168/4e786/image-20221008225930691.png\"\n        srcset=\"/static/fbbe87b58f93dd798a1042f42f979168/e9ff0/image-20221008225930691.png 180w,\n/static/fbbe87b58f93dd798a1042f42f979168/f21e7/image-20221008225930691.png 360w,\n/static/fbbe87b58f93dd798a1042f42f979168/4e786/image-20221008225930691.png 363w\"\n        sizes=\"(max-width: 363px) 100vw, 363px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></th>\n<th><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 486px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqElEQVQY00WPUQ7DIAxDOVXVUkqAJFB19z+PJ6eT9oFI8EuwU+8dtQpUDWYG9mMoWusQ6di2LXQRQWsNvQ/MuaJ++YFaK0QajiMj5ZxDGIPgxH3fMHO4e/QcIEOdn7gvmP05MrzNPYwkVYWpBvBCFpCahYvzLFHT+VoL7hPP84nlZJmM9cueSKUUXNcVA2/cEaK0FlH2/cCR8y+WRHw6oXPO8Z03D3d9AQT4jMxjKu4eAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008225953520\"\n        title=\"image-20221008225953520\"\n        src=\"/static/ee445e455a2c5475275d86fae469d233/4ee7f/image-20221008225953520.png\"\n        srcset=\"/static/ee445e455a2c5475275d86fae469d233/e9ff0/image-20221008225953520.png 180w,\n/static/ee445e455a2c5475275d86fae469d233/f21e7/image-20221008225953520.png 360w,\n/static/ee445e455a2c5475275d86fae469d233/4ee7f/image-20221008225953520.png 486w\"\n        sizes=\"(max-width: 486px) 100vw, 486px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></th>\n</tr>\n</thead>\n</table>\n<ul>\n<li>class는  null이고 대신 factoryBean과 factoryMethod 이름이 등록되어 있다.</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%99%80-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88\">☘️ 스프링 컨테이너와 스프링 빈</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%83%9D%EC%84%B1\">📌 스프링 컨테이너 생성</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%97%90-%EB%93%B1%EB%A1%9D%EB%90%9C-%EB%AA%A8%EB%93%A0-%EB%B9%88-%EC%A1%B0%ED%9A%8C\">📌 컨테이너에 등록된 모든 빈 조회</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EA%B8%B0%EB%B3%B8\">📌 스프링 빈 조회 - 기본</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EB%8F%99%EC%9D%BC%ED%95%9C-%ED%83%80%EC%9E%85%EC%9D%B4-%EB%91%98-%EC%9D%B4%EC%83%81\">📌 스프링 빈 조회 - 동일한 타입이 둘 이상</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EC%83%81%EC%86%8D-%EA%B4%80%EA%B3%84-\">📌 스프링 빈 조회 - 상속 관계 ✨✨✨</a></p>\n</li>\n<li>\n<p><a href=\"#-beanfactory%EC%99%80-applicationcontext\">📌 BeanFactory와 ApplicationContext</a></p>\n<ul>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%8B%A4%EC%96%91%ED%95%9C-%EC%84%A4%EC%A0%95-%ED%98%95%EC%8B%9D-%EC%A7%80%EC%9B%90---%EC%9E%90%EB%B0%94-%EC%BD%94%EB%93%9C-xml\">📌 다양한 설정 형식 지원 - 자바 코드, XML</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%84%A4%EC%A0%95-%EB%A9%94%ED%83%80-%EC%A0%95%EB%B3%B4---beandefinition\">📌 스프링 빈 설정 메타 정보 - BeanDefinition</a></p>\n<ul>\n<li><a href=\"#%EC%A0%95%EB%A6%AC-1\">정리</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"본 게시글은 스프링 핵심 원리 - 기본편 강의를 듣고 정리했습니다. ☘️ 스프링 컨테이너와 스프링 빈 📌 스프링 컨테이너 생성 그 전에 스프링 컨테이너를 생성하던 걸 생각해보자.  를 스프링 컨테이너라 한다.  는 인터페이스이다. 스프링 컨테이너는 XML을 기반으로 만들 수 있고, 애노테이션 기반의 자바 설정 클래스로 만들 수 있다. 직전에 AppConfig 를 사용했던 방식이 애노테이션 기반의 자바 설정 클래스로 스프링 컨테이너를 만든 것이다. 따라서 구현체로 를 자바 설정 클래스를 기반으로 스프링 컨테이너( ApplicationContext )를 만들었다. 더 정확히는 스프링 컨테이너를 부를 때  ,  로 구분해서 이야기한다. 가 좀 더 위에 있고, 는 유틸리티성으로 이것 저것 추가된 것이다. BeanFactory 를 직접 사용하는 경우는 거의 없으므로 일반적으로 ApplicationContext 를 스프링 컨테이너라 한다. 생성 과정 컨테이너 생성 컨테이너 생성 시에 구성 정보…","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%99%80-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88\">☘️ 스프링 컨테이너와 스프링 빈</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%83%9D%EC%84%B1\">📌 스프링 컨테이너 생성</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%97%90-%EB%93%B1%EB%A1%9D%EB%90%9C-%EB%AA%A8%EB%93%A0-%EB%B9%88-%EC%A1%B0%ED%9A%8C\">📌 컨테이너에 등록된 모든 빈 조회</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EA%B8%B0%EB%B3%B8\">📌 스프링 빈 조회 - 기본</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EB%8F%99%EC%9D%BC%ED%95%9C-%ED%83%80%EC%9E%85%EC%9D%B4-%EB%91%98-%EC%9D%B4%EC%83%81\">📌 스프링 빈 조회 - 동일한 타입이 둘 이상</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%A1%B0%ED%9A%8C---%EC%83%81%EC%86%8D-%EA%B4%80%EA%B3%84-\">📌 스프링 빈 조회 - 상속 관계 ✨✨✨</a></p>\n</li>\n<li>\n<p><a href=\"#-beanfactory%EC%99%80-applicationcontext\">📌 BeanFactory와 ApplicationContext</a></p>\n<ul>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%8B%A4%EC%96%91%ED%95%9C-%EC%84%A4%EC%A0%95-%ED%98%95%EC%8B%9D-%EC%A7%80%EC%9B%90---%EC%9E%90%EB%B0%94-%EC%BD%94%EB%93%9C-xml\">📌 다양한 설정 형식 지원 - 자바 코드, XML</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88-%EC%84%A4%EC%A0%95-%EB%A9%94%ED%83%80-%EC%A0%95%EB%B3%B4---beandefinition\">📌 스프링 빈 설정 메타 정보 - BeanDefinition</a></p>\n<ul>\n<li><a href=\"#%EC%A0%95%EB%A6%AC-1\">정리</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"October 08, 2022","title":"04. 스프링 컨테이너와 스프링 빈 - 스프링 핵심 원리 기본편","categories":"강의","author":"goldggyul","emoji":null,"imageEmoji":"spring-logo.png"},"fields":{"slug":"/spring-core-basic-004/"}},"next":{"id":"38b9189e-0133-55a7-b6b0-936a28f05241","html":"<blockquote>\n<p>본 게시글은 <a href=\"https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8\">스프링 핵심 원리 - 기본편</a> 강의를 듣고 정리했습니다.</p>\n</blockquote>\n<h1 id=\"️-스프링-핵심-원리-이해2---객체-지향-원리-적용\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EC%9D%B4%ED%95%B42---%EA%B0%9D%EC%B2%B4-%EC%A7%80%ED%96%A5-%EC%9B%90%EB%A6%AC-%EC%A0%81%EC%9A%A9\" aria-label=\"️ 스프링 핵심 원리 이해2   객체 지향 원리 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>☘️ 스프링 핵심 원리 이해2 - 객체 지향 원리 적용</h1>\n<h2 id=\"-새로운-할인-정책-개발\" style=\"position:relative;\"><a href=\"#-%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%95%A0%EC%9D%B8-%EC%A0%95%EC%B1%85-%EA%B0%9C%EB%B0%9C\" aria-label=\" 새로운 할인 정책 개발 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 새로운 할인 정책 개발</h2>\n<p>기획자가 정률 할인 정책으로 변경해달라고 했다.</p>\n<p>하지만 우린 유연한 설계가 가능하도록 인터페이스를 이용해서 객체지향 설계 원칙을 준수했으므로 문제가 없다! 과연 그럴 지 한  번 해보자.</p>\n<ul>\n<li>\n<p>단축키</p>\n<ul>\n<li><code class=\"language-text\">command + shift + T</code>: 테스트 생성</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">RateDiscountPolicy</code></p>\n<ul>\n<li>할인과 관련된 부분을 잘 떼어 놨기 때문에 할인 부분만 떼서 테스트를 할 수 있다!</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RateDiscountPolicy</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">DiscountPolicy</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> discountPercent <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">discount</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span><span class=\"token function\">getGrade</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token class-name\">Grade</span><span class=\"token punctuation\">.</span><span class=\"token constant\">VIP</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> price <span class=\"token operator\">*</span> discountPercent <span class=\"token operator\">/</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 굉장히 불안</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">RateDiscountPolicyTest</code></p>\n<ul>\n<li>성공 테스트만큼 실패 테스트도 중요하다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">RateDiscountPolicyTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">RateDiscountPolicy</span> discountPolicy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"VIP는 10% 할인이 적용되어야 한다\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">vip_o</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// given</span>\n        <span class=\"token class-name\">Long</span> memberId <span class=\"token operator\">=</span> <span class=\"token number\">1L</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span>memberId<span class=\"token punctuation\">,</span> <span class=\"token string\">\"memberA\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Grade</span><span class=\"token punctuation\">.</span><span class=\"token constant\">VIP</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// when</span>\n        <span class=\"token keyword\">int</span> discount <span class=\"token operator\">=</span> discountPolicy<span class=\"token punctuation\">.</span><span class=\"token function\">discount</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// then</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>discount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 성공 테스트만큼 실패 테스트도 중요하다</span>\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"VIP가 아니면 할인이 적용되지 않아야 한다\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">vip_x</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// given</span>\n        <span class=\"token class-name\">Long</span> memberId <span class=\"token operator\">=</span> <span class=\"token number\">2L</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span>memberId <span class=\"token punctuation\">,</span><span class=\"token string\">\"memberBasic\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Grade</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BASIC</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// when</span>\n        <span class=\"token keyword\">int</span> discount <span class=\"token operator\">=</span> discountPolicy<span class=\"token punctuation\">.</span><span class=\"token function\">discount</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// then</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>discount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"-새로운-할인-정책-적용과-문제점\" style=\"position:relative;\"><a href=\"#-%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%95%A0%EC%9D%B8-%EC%A0%95%EC%B1%85-%EC%A0%81%EC%9A%A9%EA%B3%BC-%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\" 새로운 할인 정책 적용과 문제점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 새로운 할인 정책 적용과 문제점</h2>\n<p>이제 위에서 만든 <code class=\"language-text\">RateDiscountPolicy</code>를 실제로 적용해보자.</p>\n<p>어라라? 근데 할인 정책을 변경하려면 클라이언트인 <code class=\"language-text\">OrderServiceImpl</code>코드를 고쳐야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// private final DiscountPolicy discountPolicy = new FixDiscountPolicy();</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">DiscountPolicy</span> discountPolicy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RateDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"문제점\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\"문제점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제점</h3>\n<p>그렇다. 사실 OCP, DIP를 지킨 것 같았지만 아니다.</p>\n<p>DIP -> 인터페이스에만 의존하고 있는가? 아니다. 구체 클래스에도 의존하고 있다.</p>\n<p>OCP -> 클라이언트를 변경하지 않고 확장할 수 있는가? 아니다. 클라이언트 코드를 변경해야 한다.</p>\n<ul>\n<li>\n<p>의존관계</p>\n<table>\n<thead>\n<tr>\n<th>기대했던 의존관계</th>\n<th>실제 의존관계</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA5ElEQVQoz32S2QqEMAxF/f9fE3wWRMEFnwT3fclwAhHpOBO4TZu0N7dpvWVZZBgGGcdRwfw8T7mu6wvE+76XeZ5vz5l1Xe+8RyDPc8myTH2aplJV1RfqupYoitSzx/d9CcNQSQEGqecqpPKbQuw4Dum6TsqylCAIlLhpGtm2TfOqkMHY7eCbuTlUuzFV+CR0iV3PXuszyuxm9PCnQlfpc86VrV/P2DRN7wrfYJV5DPqLRxm9Z01P27ZVT7Gb8J+xhwcwFEWhpPyMOI7VJ0mixTwkP/+ZC4tzLfsiYN93VWlr8vTyA2d9vUFTxEepAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008041208548\"\n        title=\"image-20221008041208548\"\n        src=\"/static/6ee60a32f962cc0d3713cecb9a5d62d9/37523/image-20221008041208548.png\"\n        srcset=\"/static/6ee60a32f962cc0d3713cecb9a5d62d9/e9ff0/image-20221008041208548.png 180w,\n/static/6ee60a32f962cc0d3713cecb9a5d62d9/f21e7/image-20221008041208548.png 360w,\n/static/6ee60a32f962cc0d3713cecb9a5d62d9/37523/image-20221008041208548.png 720w,\n/static/6ee60a32f962cc0d3713cecb9a5d62d9/302a4/image-20221008041208548.png 1080w,\n/static/6ee60a32f962cc0d3713cecb9a5d62d9/07a9c/image-20221008041208548.png 1440w,\n/static/6ee60a32f962cc0d3713cecb9a5d62d9/5e1f2/image-20221008041208548.png 2134w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/klEQVQoz4WSyYqFQAxF/f9Pc+FaUMQB3TjPs2lOQV77lKYDl8SYSm5ulbUsiwzDIOM4GhCf5ynXdb1Avu97mefZ+GmazJl1XQU7jkMsGsRxLEmSGBAXRfFCXdfieZ7xYRiKbdviuq5pDjAGWnwwpSxL6bruwxC7s1MG1GRZJo7jmOFN08i2bb8NKcKqqhLW/8u0qRqsn7mvhqyiWmjh03OADQDMVHs992/DZ0yt6nXPcTmvhmioKz+1I48k3CyDYUWObzRt2/Zz65ZeAAV5npvGCnSiURAE4vu+eQVRFEmapqKvg3/k8QwzDO9a7fv+BQbiYQBgBxNyrE+sQLIfne+6AucQGc0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008041220170\"\n        title=\"image-20221008041220170\"\n        src=\"/static/1f040c2f5311c1b45d04935d6ed63a39/37523/image-20221008041220170.png\"\n        srcset=\"/static/1f040c2f5311c1b45d04935d6ed63a39/e9ff0/image-20221008041220170.png 180w,\n/static/1f040c2f5311c1b45d04935d6ed63a39/f21e7/image-20221008041220170.png 360w,\n/static/1f040c2f5311c1b45d04935d6ed63a39/37523/image-20221008041220170.png 720w,\n/static/1f040c2f5311c1b45d04935d6ed63a39/302a4/image-20221008041220170.png 1080w,\n/static/1f040c2f5311c1b45d04935d6ed63a39/07a9c/image-20221008041220170.png 1440w,\n/static/1f040c2f5311c1b45d04935d6ed63a39/da893/image-20221008041220170.png 2130w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>\n<p>따라서 변경하려면 의존관계를 클라이언트에서 변경해야 하는 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABUklEQVQoz52TW6vCMBCE+///Vt/0wWdBsdDWXrQtjbde1JFvIT09gnI4C0OTTTo7yWyC2+2mru8NjB+Phz7FOI66XC7q+17DMNh+5vf73f5jPciyTEkcK00SMc7zXE3TqK7rCcyLolAcx7per4qiSOv1Wm3b2tyL4BuUda1yuVS9WqlyTq5tTUHXdROYo6SqKu33ey0WC4VhqO12K+fcRIjSgCp5FKl3Tn8NyDmNJ/FhhFTIi0LDOFry+Xx+BEr4CdWn08nGwK//EGaZHesbIXE+n00dZnhwwl93CCHy59LfgzUKspcvbnq15CDGdXOZCsfjUYfDwRzl4j1wN01TbTYbK8oYp8lDtNvtzCTyAPUBi1SAnepzUJVjlmU5FaM4IsgzTpLEWoo1Wihgo7+//wSKKTC5DOtcwSfMG32e4yF408wUJr6R3xv6G/xergUi//RedD6gYgG7mQ4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008041254850\"\n        title=\"image-20221008041254850\"\n        src=\"/static/a6bae763a4252dd27ca5bc721da91762/37523/image-20221008041254850.png\"\n        srcset=\"/static/a6bae763a4252dd27ca5bc721da91762/e9ff0/image-20221008041254850.png 180w,\n/static/a6bae763a4252dd27ca5bc721da91762/f21e7/image-20221008041254850.png 360w,\n/static/a6bae763a4252dd27ca5bc721da91762/37523/image-20221008041254850.png 720w,\n/static/a6bae763a4252dd27ca5bc721da91762/302a4/image-20221008041254850.png 1080w,\n/static/a6bae763a4252dd27ca5bc721da91762/07a9c/image-20221008041254850.png 1440w,\n/static/a6bae763a4252dd27ca5bc721da91762/5e1f2/image-20221008041254850.png 2134w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"해결\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0\" aria-label=\"해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결?</h3>\n<p>그럼 진짜 인터페이스만 의존하도록 하면 된다!</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderServiceImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OrderService</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">//private final DiscountPolicy discountPolicy = new RateDiscountPolicy();</span>\n <span class=\"token keyword\">private</span> <span class=\"token class-name\">DiscountPolicy</span> discountPolicy<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>음.. 그렇지만 당연히 할당을 안해줬으므로 NPE가 발생하고 실행이 불가능하다.</p>\n<h2 id=\"-관심사의-분리\" style=\"position:relative;\"><a href=\"#-%EA%B4%80%EC%8B%AC%EC%82%AC%EC%9D%98-%EB%B6%84%EB%A6%AC\" aria-label=\" 관심사의 분리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 관심사의 분리</h2>\n<blockquote>\n<p>애플리케이션을 하나의 공연이라 생각해보자. 각각의 인터페이스를 배역(배우 역할)이라 생각하자. 그런데! 실제 배역 맞는 배우를 선택하는 것은 누가 하는가?</p>\n<p>로미오와 줄리엣 공연을 하면 로미오 역할을 누가 할지 줄리엣 역할을 누가 할지는 배우들이 정하는게 아니다. 이전 코드는 마치 로미오 역할(인터페이스)을 하는 레오나르도 디카프리오(구현체, 배우)가 줄리엣 역할(인터페이스)을 하는 여자 주인공(구현체, 배우)을 직접 초빙하는 것과 같다. 디카프리오는 공연도 해야하고 동시에 여자 주인공도 공연에 직접 초빙해야 하는 다양한 책임을 가지고 있다.</p>\n</blockquote>\n<p>지금 우리 애플리케이션도 마찬가지다. 주문서비스가 직접 할인 정책을 선택하고 있는 것이다.</p>\n<h3 id=\"관심사를-분리하자\" style=\"position:relative;\"><a href=\"#%EA%B4%80%EC%8B%AC%EC%82%AC%EB%A5%BC-%EB%B6%84%EB%A6%AC%ED%95%98%EC%9E%90\" aria-label=\"관심사를 분리하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>관심사를 분리하자</h3>\n<p>객체 세상도 똑같다. 실제 실행되는 객체는 본인의 역할만 수행하고, 어떤 구현체가 할당할 지는 공연 기획자가 해야 한다.</p>\n<h3 id=\"code-classlanguage-textappconfigcode-등장\" style=\"position:relative;\"><a href=\"#code-classlanguage-textappconfigcode-%EB%93%B1%EC%9E%A5\" aria-label=\"code classlanguage textappconfigcode 등장 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">AppConfig</code> 등장</h3>\n<p>기획자를 만들어보자.</p>\n<blockquote>\n<p>애플리케이션의 전체 동작 방식을 구성(config)하기 위해, 구현 객체를 생성하고, 연결하는 책임을 가지는 별도의 설정 클래스를 만들자.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppConfig</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberService</span> <span class=\"token function\">memberService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   \t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">OrderService</span> <span class=\"token function\">orderService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   \t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OrderServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FixDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">AppConfig</code>는 생성한 객체 인스턴스의 레퍼런스를 생성자를 통해서 주입(연결)해준다.</p>\n</li>\n<li>\n<p>객체의 생성과 연결은 <code class=\"language-text\">AppConfig</code>가 담당한다. 이제 <code class=\"language-text\">MemberServiceImpl</code>과 <code class=\"language-text\">OrderServiceImpl</code>은 추상에만 의존하면 되고, 이제 진짜로 구체 클래스를 몰라도 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABQ0lEQVQ4y52T3YqDQAyF5/3fywt7KXinVrSK/bXaVttqTfmypMiyLNKBMBkmczw5J7rn8yl938vj8RDyrutkHEd5vV5fhQPgdDpJHMeyXq/lfD7rxbfLwS5JEvE8T1arlWRZJtM0fR1uGAZFhuX1etV8yUNb81wZWnv3+121W7rmsgBqZ3e73ZTd4XCQuq5lv9+rSRhkRlnYmfrL5SJVVUkURfoWHO5d27aSpqlqVxSF6rnb7RSch38FNdQGQSC+70sYhnI8Hn8A0RC6MGuaZnHbdIHmTAY706JjYwDb7Vapmz5LTTEjP6YASAGt85Xfrv1nCrXG7DM2UEdQ2DHUAKMFHyLIuSdHHnb0ItATvc1UsPRPITabjbqGjrQBEKPEuSxLzakDHGepz/NcdwJTeeeMgQGQz1uYz5qdYUktbyw4M1JvYor0A8CBrBwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008043709373\"\n        title=\"image-20221008043709373\"\n        src=\"/static/a3003a438bc982cfb278064fc6988e7b/37523/image-20221008043709373.png\"\n        srcset=\"/static/a3003a438bc982cfb278064fc6988e7b/e9ff0/image-20221008043709373.png 180w,\n/static/a3003a438bc982cfb278064fc6988e7b/f21e7/image-20221008043709373.png 360w,\n/static/a3003a438bc982cfb278064fc6988e7b/37523/image-20221008043709373.png 720w,\n/static/a3003a438bc982cfb278064fc6988e7b/302a4/image-20221008043709373.png 1080w,\n/static/a3003a438bc982cfb278064fc6988e7b/07a9c/image-20221008043709373.png 1440w,\n/static/a3003a438bc982cfb278064fc6988e7b/c27e7/image-20221008043709373.png 2144w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li><u><strong>관심사의 분리</strong></u>: 객체를 생성하고 연결하는 역할과 실행하는 역할이 명확히 분리되었다.</li>\n<li>클라이언트인 memberServiceImpl 입장에서 보면 의존관계를 마치 외부에서 주입해주는 것 같다고 해서 DI(Dependency Injection) 우리말로 <u><strong>의존관계 주입</strong></u> 또는 <strong>의존성 주입</strong>이라 한다.\n<ul>\n<li>이 경우엔 생성자를 통해 주입해주므로 생성자 주입이라고 한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>단축키</p>\n<ul>\n<li><code class=\"language-text\">Command + E</code>: 이전으로 돌아감</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<ul>\n<li>AppConfig를 통해서 관심사를 확실하게 분리했다.</li>\n<li>AppConfig는 공연 기획자다. AppConfig는 구체 클래스를 선택한다. 배역에 맞는 담당 배우를 선택한다. 애플리케이션이 어떻게 동작해야 할지 전체 구성을 책임진다.</li>\n<li>이제 각 배우들은 <u><strong>담당 기능을 실행</strong></u>하는 책임만 지면 된다.\n<ul>\n<li>OrderServiceImpl 은 기능을 실행하는 책임만 지면 된다</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-appconfig-리팩터링\" style=\"position:relative;\"><a href=\"#-appconfig-%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81\" aria-label=\" appconfig 리팩터링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 AppConfig 리팩터링</h2>\n<p>어떤 역할이 있고, 역할에 따른 구현을 어떤 것이 하는 지 잘 보여야 하는데 잘 보이지 않는다.</p>\n<ul>\n<li>단축키\n<ul>\n<li><code class=\"language-text\">Command + Option + M</code>: 함수로 만들고 싶은 곳 블럭 처리해서 메소드로 빼기</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppConfig</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberRepository</span> <span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberService</span> <span class=\"token function\">memberService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">OrderService</span> <span class=\"token function\">orderService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OrderServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">discountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DiscountPolicy</span> <span class=\"token function\">discountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FixDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>이제 메서드 명만 봐도 역할이 다 드러난다. 그리고 현재 구현 클래스도 잘 보인다.</li>\n<li>설계 그림이 그대로 AppConfig에 드러나게 된다. 애플리케이션 전체 구성이 어떻게 되어있는지 빠르게 파악할 수 있다.</li>\n</ul>\n<h2 id=\"-새로운-구조와-할인-정책-적용\" style=\"position:relative;\"><a href=\"#-%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B5%AC%EC%A1%B0%EC%99%80-%ED%95%A0%EC%9D%B8-%EC%A0%95%EC%B1%85-%EC%A0%81%EC%9A%A9\" aria-label=\" 새로운 구조와 할인 정책 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 새로운 구조와 할인 정책 적용</h2>\n<p>이제 진짜로 정률 할인 정책으로 변경해보자. 이제 진짜진짜 클라이언트 쪽은 변경하지 않아도 된다.</p>\n<blockquote>\n<p>AppConfig의 등장으로 애플리케이션이 크게 <u><strong>사용 영역</strong></u>과, <u><strong>객체를 생성하고 구성(Configuration)하는 영역</strong></u>으로 분리되었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABhElEQVQ4y32T646CQAyFef/30j8+gGFj1BAQvKMjDKDSzdfYyay76yQn05m2Z3paSLquk7qu5Xg8yuVyEe+9om3bPxH7Yxuex+Mhyf1+lzRNZTKZyHq9FhZ34zj+Aouk2Cb2+XwqIUi4ZHF5Op0UVEvVvNw0jQIbHyqqqpLlcqkxkBg5MVohC0dZlpJlmez3+yDfpOI/n89KOp/PZTababwRwkN8qBAZ2CSZpP/WMAxKbHlW4Q9Ck02wBb4Dv1V8u91C3z4SEvhOGPtJYrfhQP6RcLvdBpJYzmazkaIoQo+dc2pzn+e5nnXKfd+HSuyVMaoAXK9X2e12ujNZBsbk6SOPsEMIVwIBMgkGDMV3nfi+V3u1WmmyxcWfETuKrDoUJhiLxUKm06l8pam0fS++KMRlmdTOaRKDMlCFgTNFwGF/TQIri8PhcJAsz6WGsKpCH+1PYI+Bj7x4YKGH7JROf1zTKNqXPKQizeTGsIfI1z+FCw72TSm8l+ElycCQ4vN7C8jj/A1BHj8d5P1f1QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008054517288\"\n        title=\"image-20221008054517288\"\n        src=\"/static/c69b5482fa89c1ec3080ce77af09114e/37523/image-20221008054517288.png\"\n        srcset=\"/static/c69b5482fa89c1ec3080ce77af09114e/e9ff0/image-20221008054517288.png 180w,\n/static/c69b5482fa89c1ec3080ce77af09114e/f21e7/image-20221008054517288.png 360w,\n/static/c69b5482fa89c1ec3080ce77af09114e/37523/image-20221008054517288.png 720w,\n/static/c69b5482fa89c1ec3080ce77af09114e/302a4/image-20221008054517288.png 1080w,\n/static/c69b5482fa89c1ec3080ce77af09114e/07a9c/image-20221008054517288.png 1440w,\n/static/c69b5482fa89c1ec3080ce77af09114e/5e1f2/image-20221008054517288.png 2134w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppConfig</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//...</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">DiscountPolicy</span> <span class=\"token function\">discountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FixDiscountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>이제 할인 정책을 변경해도, 애플리케이션의 구성 역할을 담당하는 AppConfig만 변경하면 된다. 클라이언트 코드인 OrderServiceImpl 를 포함해서 사용 영역의 어떤 코드도 변경할 필요가 없다.</p>\n</li>\n<li>\n<p>구성 영역은 당연히 변경된다. (누군가는 해야하잖아~)</p>\n<p>구성 역할을 담당하는 AppConfig를 애플리케이션이라는 공연의 기획자로 생각하자. 공연 기획자는 공연 참여자인 구현 객체들을 모두 알아야 한다.</p>\n</li>\n</ul>\n<p><code class=\"language-text\">DIP</code>와 <code class=\"language-text\">OCP</code>를 모두 만족한다!</p>\n<ul>\n<li>클라이언트가 구현체를 모르고, 클라이언트 코드를 변경할 필요가 없다.</li>\n</ul>\n<h2 id=\"-좋은-객체-지향-설계의-5가지-원칙의-적용\" style=\"position:relative;\"><a href=\"#-%EC%A2%8B%EC%9D%80-%EA%B0%9D%EC%B2%B4-%EC%A7%80%ED%96%A5-%EC%84%A4%EA%B3%84%EC%9D%98-5%EA%B0%80%EC%A7%80-%EC%9B%90%EC%B9%99%EC%9D%98-%EC%A0%81%EC%9A%A9\" aria-label=\" 좋은 객체 지향 설계의 5가지 원칙의 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 좋은 객체 지향 설계의 5가지 원칙의 적용</h2>\n<p>적용된 3가지 SRP, DIP, OCP를 살펴보자</p>\n<ul>\n<li>\n<h3 id=\"srp-단일-책임-원칙\" style=\"position:relative;\"><a href=\"#srp-%EB%8B%A8%EC%9D%BC-%EC%B1%85%EC%9E%84-%EC%9B%90%EC%B9%99\" aria-label=\"srp 단일 책임 원칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SRP 단일 책임 원칙</h3>\n<p>한 클래스는 하나의 책임만 가져야 한다.</p>\n<ul>\n<li>클라이언트 객체가 직접 <u>구현 객체를 생성하고 연결</u>하고 <u><strong>실행</strong></u>까지 하는, 여러 책임을 가지고 있었음</li>\n<li>SRP 원칙을 따르면서 관심사를 분리</li>\n<li>구현 객체를 생성하고 연결하는 책임은 AppConfig가 담당</li>\n<li>클라이언트 객체 실행하는 책임만 담당!</li>\n</ul>\n</li>\n<li>\n<h3 id=\"dip-의존관계-역전-원칙\" style=\"position:relative;\"><a href=\"#dip-%EC%9D%98%EC%A1%B4%EA%B4%80%EA%B3%84-%EC%97%AD%EC%A0%84-%EC%9B%90%EC%B9%99\" aria-label=\"dip 의존관계 역전 원칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DIP 의존관계 역전 원칙</h3>\n<p>프로그래머는 “추상화에 의존해야지, 구체화에 의존하면 안된다.” 의존성 주입은 이 원칙을 따르는 방법 중 하나다.</p>\n<ul>\n<li>구체화가 아닌 추상화에 의존해야 유연하게 변경할 수 있다.</li>\n<li>클라이언트 코드가 DiscountPolicy 추상화 인터페이스에만 의존하도록 코드를 변경했다. 하지만 클라이언트 코드는 인터페이스만으로는 아무것도 실행할 수 없다.</li>\n<li>AppConfig가 클라이언트 코드 대신 구현 객체를 생성해서 클라이언트 코드에 의존관계를 주입했다. 이렇게해서 DIP 원칙을 따르면서 문제도 해결했다.</li>\n</ul>\n</li>\n<li>\n<h3 id=\"ocp-개방-폐쇄-원칙\" style=\"position:relative;\"><a href=\"#ocp-%EA%B0%9C%EB%B0%A9-%ED%8F%90%EC%87%84-%EC%9B%90%EC%B9%99\" aria-label=\"ocp 개방 폐쇄 원칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OCP 개방 폐쇄 원칙</h3>\n<p>소프트웨어 요소는 확장에는 열려 있으나 변경에는 닫혀 있어야 한다</p>\n<ul>\n<li>다형성을 사용하고, 클라이언트가 DIP를 잘 지킨다.</li>\n<li>애플리케이션을 <u><strong>사용 영역</strong></u>과 <u><strong>구성 영역</strong></u>으로 나누면서 클라이언트 코드는 변경하지 않아도 된다.</li>\n<li>따라서 소프트웨어 요소를 새롭게 확장해도 사용 영역의 변경은 닫혀 있다. (변경할 필요가 없다.)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-ioc-di-그리고-컨테이너\" style=\"position:relative;\"><a href=\"#-ioc-di-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88\" aria-label=\" ioc di 그리고 컨테이너 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 IoC, DI, 그리고 컨테이너</h2>\n<ul>\n<li>\n<h3 id=\"제어의-역전-iocinversion-of-control\" style=\"position:relative;\"><a href=\"#%EC%A0%9C%EC%96%B4%EC%9D%98-%EC%97%AD%EC%A0%84-iocinversion-of-control\" aria-label=\"제어의 역전 iocinversion of control permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>제어의 역전 IoC(Inversion of Control)</h3>\n<p>기존 프로그램은 <u><strong>클라이언트</strong></u> 구현 객체가 스스로 필요한 <u><strong>서버</strong></u> 구현 객체를 생성, 연결하여 실행했다. <u><strong>구현 객체가 프로그램의 제어 흐름을 조종</strong></u>한 것이다.</p>\n<p>반면 AppConfig가 등장한 후엔 AppConfig가 프로그램에 대한 제어 흐름 권하을 가지고 있다. 이렇듯 프로그램의 제어 흐름을 직접 제어하는 것이 아니라 <u><strong>외부에서 관리하는 것을 제어의 역전(IoC)</strong></u>이라 한다.</p>\n</li>\n<li>\n<h3 id=\"프레임워크--라이브러리\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC--%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC\" aria-label=\"프레임워크  라이브러리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프레임워크 / 라이브러리</h3>\n<ul>\n<li>프레임워크: 내가 작성한 코드를 제어하고, 대신 실행해준다. (예: JUnit이 자신만의 라이프사이클(BeforeEach, Test, …)에 맞게 내가 작성한 테스트 코드를 실행해준다.)</li>\n<li>라이브러리: 내가 불러다가 직접 호출하는 것. 즉, 내가 작성한 코드가 직접 제어의 흐름을 담당한다.</li>\n</ul>\n</li>\n<li>\n<h3 id=\"의존관계-주입-di-dependency-injection\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EC%A1%B4%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9E%85-di-dependency-injection\" aria-label=\"의존관계 주입 di dependency injection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>의존관계 주입 DI (Dependency Injection)</h3>\n<ul>\n<li>\n<p>의존관계</p>\n<p>의존관계는 <u><strong>정적인 클래스 의존 관계</strong></u>와, <u><strong>실행 시점에 결정되는 동적인 객체(인스턴스) 의존 관계</strong></u> 둘을 분리해서 생각해야 한다.</p>\n<blockquote>\n<p><code class=\"language-text\">정적인 클래스 의존관계</code></p>\n<ul>\n<li>\n<p>클래스가 사용하는 import 코드만 보고 의존관계를 쉽게 판단 가능</p>\n</li>\n<li>\n<p>애플리케이션을 실행하지 않아도 분석 가능</p>\n</li>\n<li>\n<p>클래스 다이어그램</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABeklEQVQ4y32TWavCQAyF5///reKTfRREkFpcW6vWrdpFm8sXiASXGwg2mcyZk5MYns+nmPV9r/4thzVNI/f7Xc7ns+z3e/2u6/p15/F4SCBxuVy04Hq9Std1enm322muLEv14/Eo8/lcZrOZxHEsg8FAkiSRqqpejwMaSEwmE4miSNI0VUBeBIwC7zCAAGeLxUIZGwFjGUjcbjdZLpfagl2G0btxDgj1tN22reZMEgW0Yg69AWj6wQynG/s2B5y7fEMuoFuWZbJer/UXPU10jAu0t9lstGa1WklRFFpDjhinngcDAHmeaxGAp9NJ3QBpkTPiw+Ggw4I9rRL7HPoGqHrhzZisaeONetPr/Y5q6BM2Lb82MLD1YQvIj8djGQ6Hst1uVRK/vy9AS35jZYboaM7+jUYjfcTW5oOhB/Pg/gHbQ1ihM9Ml/hfwGxg1BmLiw8xiWDM86j80/NUqm8Dy8/dDR9ZmOp3q6pBjW7CPKf9yGHjnEZj6mJb/AAc+P7cUSnQKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008154822744\"\n        title=\"image-20221008154822744\"\n        src=\"/static/b88cee4c31bba48d916a61672fe2aca0/37523/image-20221008154822744.png\"\n        srcset=\"/static/b88cee4c31bba48d916a61672fe2aca0/e9ff0/image-20221008154822744.png 180w,\n/static/b88cee4c31bba48d916a61672fe2aca0/f21e7/image-20221008154822744.png 360w,\n/static/b88cee4c31bba48d916a61672fe2aca0/37523/image-20221008154822744.png 720w,\n/static/b88cee4c31bba48d916a61672fe2aca0/302a4/image-20221008154822744.png 1080w,\n/static/b88cee4c31bba48d916a61672fe2aca0/07a9c/image-20221008154822744.png 1440w,\n/static/b88cee4c31bba48d916a61672fe2aca0/bcec6/image-20221008154822744.png 1834w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ul>\n<p><code class=\"language-text\">동적인 객체 인스턴스 의존 관계</code></p>\n<ul>\n<li>\n<p>애플리케이션 실행 시점에 실제로! 생성된 객체 인스턴스의 참조가 연결된 의존 관계다.</p>\n</li>\n<li>\n<p>객체 다이어그램</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAsElEQVQY05WRWQrEMAxDc//T9bMXKKX7SrrXwxO4lPmaMQgRK5acNlzXZfd9P+DsePddg4/jsBijDcNg0zRZXdfidV0tIPrF8zztXd8BXl3XyRCjsiwtSRLL89y2bbOwLIu1bSuBlHEclcQQA2hN00iHq6rSZl4sQRgMZMjFoihkCOgxhKEDnTD6hFBu5Mxrw/spv1bf9zLOskxhaZqK9Q094R/4T2J2nmeZsf2+7/YBipfTMmGpoaIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008154925869\"\n        title=\"image-20221008154925869\"\n        src=\"/static/290e6b45a9ffd534be02dd6360676f1d/37523/image-20221008154925869.png\"\n        srcset=\"/static/290e6b45a9ffd534be02dd6360676f1d/e9ff0/image-20221008154925869.png 180w,\n/static/290e6b45a9ffd534be02dd6360676f1d/f21e7/image-20221008154925869.png 360w,\n/static/290e6b45a9ffd534be02dd6360676f1d/37523/image-20221008154925869.png 720w,\n/static/290e6b45a9ffd534be02dd6360676f1d/302a4/image-20221008154925869.png 1080w,\n/static/290e6b45a9ffd534be02dd6360676f1d/07a9c/image-20221008154925869.png 1440w,\n/static/290e6b45a9ffd534be02dd6360676f1d/bcec6/image-20221008154925869.png 1834w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>의존관계 주입</p>\n<p>애플리케이션 실행 시점(런타임)에 <u><strong>외부에서</strong></u> 실제 구현 객체를 생성하고, 클라이언트에 전달해서 클라이언트와 서버의 실제 의존관계가 연결되는 것</p>\n<p>객체 인스턴스를 생성하고 참조값을 전달해서 연결한다.</p>\n<p>의존관계 주입을 사용하면 <u><strong>클라이언트 코드를 변경하지 않고, 클라이언트가 호출하는 대상의 타입 인스턴스를 변경</strong></u>할 수 있다 ➡️ 의존관계 주입을 사용하면 정<u><strong>적인 클래스 의존관계를 변경하지 않고, 동적인 객체 인스턴스 의존관계를 쉽게 변경</strong></u>할 수 있다.</p>\n</li>\n<li>\n<p><u><strong>IoC 컨테이너, DI 컨테이너</strong></u></p>\n<ul>\n<li>이렇게 <code class=\"language-text\">AppConfig</code>처럼 객체를 생성, 관리하면서 의존관계를 연결해주는 것을 IoC 컨테이너 혹은 DI 컨테이너라고 한다.</li>\n<li>하지만 IoC를 해주는 곳이 많이 범용적이라서(예: JUnit 등등..) 최근에는 주로 <u><strong>DI 컨테이너</strong></u>라고 한다.</li>\n<li>또는 어셈블러(조립해준다고) 또는 오브젝트 팩토리 등으로 부른다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-스프링으로-전환하기\" style=\"position:relative;\"><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%A0%84%ED%99%98%ED%95%98%EA%B8%B0\" aria-label=\" 스프링으로 전환하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 스프링으로 전환하기</h2>\n<ul>\n<li>\n<p><code class=\"language-text\">@Configuration</code>: 애플리케이션의 구성, 설정 정보</p>\n</li>\n<li>\n<p><code class=\"language-text\">@Bean</code>: 스프링 컨테이너에 등록이 된다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">AppConfig</code></p>\n<ul>\n<li>\n<p>AppConfig에 @Configuration을 붙이고, 구현 객체를 반환하던 함수에 @Bean을 붙인다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppConfig</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberRepository</span> <span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\t\t<span class=\"token comment\">// 쭈욱..</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">ApplicationContext</code></p>\n<ul>\n<li>\n<p>스프링은 모든게 ApplicationContext에서 시작한다. 이게 스프링 컨테이너라고 보면 된다. 스프링 Bean 등 모든 걸 관리해준다.</p>\n<ul>\n<li>구현체로 <code class=\"language-text\">AnnotationConfigApplicationContext</code> 사용하자.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">MemberApp</code>: 회원 테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberApp</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// AppConfig appConfig = new AppConfig();</span>\n        <span class=\"token comment\">// MemberService memberService = appConfig.memberService();</span>\n\n        <span class=\"token class-name\">ApplicationContext</span> applicationContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MemberService</span> memberService <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 테스트 코드..</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>기존과 똑같이 작동한다!</p>\n<ul>\n<li>스프링이 빈 객체를 생성해서 등록해준다. (appConfig 역시 마찬가지)</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.333333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAf0lEQVQI142NzQ6CMBCE+0JwUC5YELrd3WJKisbE93+TIV3Fm4mHyezfN+vGJeJ6YwwaMa9i9ZgivJJ57auoCHoKuPB7Xjkv9PWDc3FT0KYWJs8EfqjBcxaEIqCiiHdFei329AivzJT5c8sIqxjrJs7oekJz8mi7Ae35t5o/djthPWiDphcgSgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221008160221121\"\n        title=\"image-20221008160221121\"\n        src=\"/static/47e764b6c57c656ad2ac8240c550c326/37523/image-20221008160221121.png\"\n        srcset=\"/static/47e764b6c57c656ad2ac8240c550c326/e9ff0/image-20221008160221121.png 180w,\n/static/47e764b6c57c656ad2ac8240c550c326/f21e7/image-20221008160221121.png 360w,\n/static/47e764b6c57c656ad2ac8240c550c326/37523/image-20221008160221121.png 720w,\n/static/47e764b6c57c656ad2ac8240c550c326/302a4/image-20221008160221121.png 1080w,\n/static/47e764b6c57c656ad2ac8240c550c326/f09ab/image-20221008160221121.png 1250w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>key는 함수 이름, value는 객체 인스턴스로 등록되는 것이다.</p>\n</li>\n<li>\n<p>따라서 위에 <code class=\"language-text\">MemberService memberService = applicationContext.getBean(\"memberService\", MemberService.class);</code> 부분을 보면, “memberService”로 MemberService 클래스 인스턴스를 받아오는 것이다.</p>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">OrderApp</code>: 주문 테스트</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderApp</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// AppConfig appConfig = new AppConfig();</span>\n        <span class=\"token comment\">// MemberService memberService = appConfig.memberService();</span>\n        <span class=\"token comment\">// OrderService orderService = appConfig.orderService();</span>\n\n        <span class=\"token class-name\">ApplicationContext</span> applicationContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MemberService</span> memberService <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">OrderService</span> orderService <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"orderService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">OrderService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 테스트 코드..</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>역시 그대로 동작!</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"스프링-컨테이너\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88\" aria-label=\"스프링 컨테이너 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 컨테이너</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">ApplicationContext</code> 를 스프링 컨테이너라 한다.</p>\n</li>\n<li>\n<p>기존에는 개발자가 <code class=\"language-text\">AppConfig</code>를 사용해서 직접 객체를 생성하고 DI를 했지만, 이제부터는 <u><strong>스프링 컨테이너</strong></u>를 통해서 사용한다.</p>\n</li>\n<li>\n<p>스프링 컨테이너는 <code class=\"language-text\">@Configuration</code> 이 붙은 AppConfig 를 설정(구성) 정보로 사용한다. 여기서 <u><strong><code class=\"language-text\">@Bean</code> 이라 적힌 메서드를 모두 호출해서 반환된 객체를 스프링 컨테이너</strong></u>에 등록한다. 이렇게 <u><strong>스프링 컨테이너에 등록된 객체를 스프링 빈</strong></u>이라 한다. 스프링 빈은 @Bean 이 붙은 메서드의 명을 스프링 빈의 이름으로 사용한다. ( memberService , orderService )</p>\n</li>\n<li>\n<p>이전에는 개발자가 필요한 객체를 <code class=\"language-text\">AppConfig</code> 를 사용해서 직접 조회했지만, 이제부터는 <u><strong>스프링 컨테이너를 통해서 필요한 스프링 빈(객체)를 찾아야 한다</strong></u>. 스프링 빈은 applicationContext.getBean() 메서드를 사용해서 찾을 수 있다.</p>\n</li>\n<li>\n<p>기존에는 개발자가 직접 자바코드로 모든 것을 했다면 이제부터는 스프링 컨테이너에 객체를 스프링 빈으로 등록하고, 스프링 컨테이너에서 스프링 빈을 찾아서 사용하도록 변경되었다.</p>\n<blockquote>\n<h3 id=\"코드가-약간-더-복잡해진-것-같은데-스프링-컨테이너를-사용하면-어떤-장점이-있을까\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C%EA%B0%80-%EC%95%BD%EA%B0%84-%EB%8D%94-%EB%B3%B5%EC%9E%A1%ED%95%B4%EC%A7%84-%EA%B2%83-%EA%B0%99%EC%9D%80%EB%8D%B0-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%A9%B4-%EC%96%B4%EB%96%A4-%EC%9E%A5%EC%A0%90%EC%9D%B4-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"코드가 약간 더 복잡해진 것 같은데 스프링 컨테이너를 사용하면 어떤 장점이 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>코드가 약간 더 복잡해진 것 같은데, 스프링 컨테이너를 사용하면 어떤 장점이 있을까?</h3>\n<p>이제부터 알아보자~</p>\n</blockquote>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EC%9D%B4%ED%95%B42---%EA%B0%9D%EC%B2%B4-%EC%A7%80%ED%96%A5-%EC%9B%90%EB%A6%AC-%EC%A0%81%EC%9A%A9\">☘️ 스프링 핵심 원리 이해2 - 객체 지향 원리 적용</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%95%A0%EC%9D%B8-%EC%A0%95%EC%B1%85-%EA%B0%9C%EB%B0%9C\">📌 새로운 할인 정책 개발</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%95%A0%EC%9D%B8-%EC%A0%95%EC%B1%85-%EC%A0%81%EC%9A%A9%EA%B3%BC-%EB%AC%B8%EC%A0%9C%EC%A0%90\">📌 새로운 할인 정책 적용과 문제점</a></p>\n<ul>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\">문제점</a></li>\n<li><a href=\"#%ED%95%B4%EA%B2%B0\">해결?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EA%B4%80%EC%8B%AC%EC%82%AC%EC%9D%98-%EB%B6%84%EB%A6%AC\">📌 관심사의 분리</a></p>\n<ul>\n<li><a href=\"#%EA%B4%80%EC%8B%AC%EC%82%AC%EB%A5%BC-%EB%B6%84%EB%A6%AC%ED%95%98%EC%9E%90\">관심사를 분리하자</a></li>\n<li><a href=\"#appconfig-%EB%93%B1%EC%9E%A5\"><code class=\"language-text\">AppConfig</code> 등장</a></li>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-appconfig-%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81\">📌 AppConfig 리팩터링</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B5%AC%EC%A1%B0%EC%99%80-%ED%95%A0%EC%9D%B8-%EC%A0%95%EC%B1%85-%EC%A0%81%EC%9A%A9\">📌 새로운 구조와 할인 정책 적용</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%A2%8B%EC%9D%80-%EA%B0%9D%EC%B2%B4-%EC%A7%80%ED%96%A5-%EC%84%A4%EA%B3%84%EC%9D%98-5%EA%B0%80%EC%A7%80-%EC%9B%90%EC%B9%99%EC%9D%98-%EC%A0%81%EC%9A%A9\">📌 좋은 객체 지향 설계의 5가지 원칙의 적용</a></p>\n</li>\n<li>\n<p><a href=\"#-ioc-di-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88\">📌 IoC, DI, 그리고 컨테이너</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8A%A4%ED%94%84%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%A0%84%ED%99%98%ED%95%98%EA%B8%B0\">📌 스프링으로 전환하기</a></p>\n<ul>\n<li><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88\">스프링 컨테이너</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 08, 2022","title":"03. 객체 지향 원리 적용 - 스프링 핵심 원리 기본편","categories":"강의","author":"goldggyul","emoji":null,"imageEmoji":"spring-logo.png"},"fields":{"slug":"/spring-core-basic-003/"}},"prev":{"id":"79da52e7-0186-5fa8-aa41-3b282b617451","html":"<blockquote>\n<p>본 게시글은 <a href=\"https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8\">스프링 핵심 원리 - 기본편</a> 강의를 듣고 정리했습니다.</p>\n</blockquote>\n<h1 id=\"️-싱글톤-컨테이너\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%8B%B1%EA%B8%80%ED%86%A4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88\" aria-label=\"️ 싱글톤 컨테이너 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>☘️ 싱글톤 컨테이너</h1>\n<p>‘싱글톤 패턴’이라고 말하는 그 싱글톤이다! 객체가 JVM 안에 딱 하나 있는 것.</p>\n<h2 id=\"-웹-애플리케이션과-싱글톤\" style=\"position:relative;\"><a href=\"#-%EC%9B%B9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EA%B3%BC-%EC%8B%B1%EA%B8%80%ED%86%A4\" aria-label=\" 웹 애플리케이션과 싱글톤 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 웹 애플리케이션과 싱글톤</h2>\n<p>대부분의 스프링 애플리케이션은 웹 애플리케이션이다. (데몬, 배치 등 다른 개발도 얼마든지 할 수 있다.)</p>\n<ul>\n<li>\n<p>그런데 웹 애플리케이션은 보통 여러 고객이 동시에 요청을 한다. 우리가 지금 만든 Bean들은 어떻게 동작을 할까?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABz0lEQVQoz2VSTWvbUBDUj0n7L9p7zi0E8lPaW8ghF1/ingqF4h5acnVKL7VCfTNOaQ42lmyBUSzLSLYlP8mSsC1pyqwqN6UPhuV97O7MvNWKogBXnucC7p+CZ/v9XhCGIQaDAYbDIayJJdEwDUwmE+x2O4GWJAnSNMXTVZblEVzr9Rqr1QqbzQZBEEAFCo7rwHVdrP21RN6xoabrOprNplSfz+ewLAvj8Ri2bcueD5fLpdwXeQEVKbz9+gYv373A6ftT3Dv3FQlUzTXS7na7kuh5njBhx9lsJmDh6XQqRcmA8c68w5efn3Hz6wZe5Emhoqws0qh/NBodpR4OB5FFdovFQhpRci1f/C5zPAaPCJLgmFdHrdPpoNFoSBIZmaYJwzBEOpnWjOkzP4Yqzj6c4eTyBM8vn0Ef61WTIq8KUhI9I93tdiuJWZYJuCfYqJYcxzGKokSYhsj22f8M+/0+2u22HFAumZKF7/sil2OjlPqbhBK3w1tcfb/C9Y9r2IFdefhnzLRer4dWqyXSKJMgI8epxoI+MnK8WJjeXny7wOuPr3D+6RwP7sM/I6fxAdnUQ0yWlBVFkRRgoboR3y39JVKVQoUKiUoQb2Kxg4QYfwNraeDHQV6BYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221010044454432\"\n        title=\"image-20221010044454432\"\n        src=\"/static/2caf16de2a9137a733e28df0ecf9b8b8/37523/image-20221010044454432.png\"\n        srcset=\"/static/2caf16de2a9137a733e28df0ecf9b8b8/e9ff0/image-20221010044454432.png 180w,\n/static/2caf16de2a9137a733e28df0ecf9b8b8/f21e7/image-20221010044454432.png 360w,\n/static/2caf16de2a9137a733e28df0ecf9b8b8/37523/image-20221010044454432.png 720w,\n/static/2caf16de2a9137a733e28df0ecf9b8b8/302a4/image-20221010044454432.png 1080w,\n/static/2caf16de2a9137a733e28df0ecf9b8b8/07a9c/image-20221010044454432.png 1440w,\n/static/2caf16de2a9137a733e28df0ecf9b8b8/098d4/image-20221010044454432.png 2142w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>우린 지금 <u><strong>요청이 올 때마다 객체를 새로 만들고 있다</strong></u>! 이런 식으로 계속 생성하는 건 말이 안된다.</p>\n<ul>\n<li>\n<p>테스트 코드: 실제로 테스트해봐도 둘은 다른 객체다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"스프링 없는 순수한 DI 컨테이너의 문제점\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">pureContainer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">AppConfig</span> appConfig <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 조회: 호출할 때마다 객체를 생성하는지 확인</span>\n  <span class=\"token class-name\">MemberService</span> memberService1 <span class=\"token operator\">=</span> appConfig<span class=\"token punctuation\">.</span><span class=\"token function\">memberService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">MemberService</span> memberService2 <span class=\"token operator\">=</span> appConfig<span class=\"token punctuation\">.</span><span class=\"token function\">memberService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 참조값이 다르다.</span>\n  <span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span><span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotSameAs</span><span class=\"token punctuation\">(</span>memberService2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>따라서 해결방안은 <u><strong>해당 객체가 딱 1개만 생성되고, 공유하도록 설계하면 된다.</strong></u> ➡️ <code class=\"language-text\">싱글톤 패턴</code></p>\n</li>\n</ul>\n<h2 id=\"-싱글톤-패턴\" style=\"position:relative;\"><a href=\"#-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4\" aria-label=\" 싱글톤 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 싱글톤 패턴</h2>\n<p>싱글톤 패턴을 적용한 예제 코드를 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SingletonService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// 내부에 자기 자신을 static으로 하나 갖고 있는다.</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">SingletonService</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SingletonService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">SingletonService</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">SingletonService</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">logic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"싱글톤 객체 로직 호출\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol>\n<li>static 영역에 객체 instance를 <u><strong>미리 하나 생성</strong></u>해서 올려둔다. (자바가 뜰 때)</li>\n<li>이 객체 인스턴스가 필요하면 오직 getInstance() 메서드를 통해서만 조회할 수 있다. 이 메서드를 호출하면 항상 같은 인스턴스를 반환한다.</li>\n<li>딱 1개의 객체 인스턴스만 존재해야 하므로, <u><strong>생성자를 private으로 막아서 혹시라도 외부에서 new 키워드로 객체 인스턴스가 생성되는 것을 막는다.</strong></u>\n<ul>\n<li>가장 좋은 건 컴파일 오류. 잘 설계한 객체는 웬만하면 컴파일 과정에서 오류가 나야 한다.</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>\n<p>테스트 코드</p>\n<ul>\n<li><code class=\"language-text\">isEqualTo</code> vs. <code class=\"language-text\">isSameAs</code>\n<ul>\n<li>Same은 진짜 자바 <code class=\"language-text\">==</code> 비교. 즉, 참조 비교</li>\n<li>Equal은 Equals 비교.</li>\n<li>이 경우 같은 객체인지 비교해야하므로 참조를 비교한다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"싱글톤 패턴을 적용한 객체 사용\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">singletonServiceTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">//private으로 생성자를 막아두었다. 컴파일 오류가 발생한다.</span>\n   <span class=\"token comment\">//new SingletonService();</span>\n   <span class=\"token comment\">//1. 조회: 호출할 때 마다 같은 객체를 반환</span>\n   <span class=\"token class-name\">SingletonService</span> singletonService1 <span class=\"token operator\">=</span> <span class=\"token class-name\">SingletonService</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">//2. 조회: 호출할 때 마다 같은 객체를 반환</span>\n   <span class=\"token class-name\">SingletonService</span> singletonService2 <span class=\"token operator\">=</span> <span class=\"token class-name\">SingletonService</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">//참조값이 같은 것을 확인</span>\n   <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"singletonService1 = \"</span> <span class=\"token operator\">+</span> singletonService1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"singletonService2 = \"</span> <span class=\"token operator\">+</span> singletonService2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">// singletonService1 == singletonService2</span>\n   <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>singletonService1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isSameAs</span><span class=\"token punctuation\">(</span>singletonService2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   singletonService1<span class=\"token punctuation\">.</span><span class=\"token function\">logic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>private으로 new 키워드를 막아두어서 외부에서 객체 생성이 안된다.</li>\n<li>호출할 때 마다 같은 객체 인스턴스를 반환하는 것을 확인할 수 있다</li>\n</ul>\n<blockquote>\n<p>참고: 싱글톤 패턴을 구현하는 방법은 여러가지가 있다. 여기서는 <u><strong>객체를 미리 생성</strong></u>해두는 가장 단순하고 안전한 방법을 선택했다.</p>\n<p>지연 생성해두는 방법도 있지만, 객체 인스턴스가 메모리를 많이 잡아먹는 게 아니면 로딩할 때 만드는 게 가장 간편하고 안전하다.</p>\n<blockquote>\n<h3 id=\"이른-초기화-eager-initialization\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%A5%B8-%EC%B4%88%EA%B8%B0%ED%99%94-eager-initialization\" aria-label=\"이른 초기화 eager initialization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이른 초기화: Eager Initialization.</h3>\n<p>클래스 static 특징을 이용해서, 클래스 로더가 초기화하는 시점에 인스턴스를 메모리해두는 방법.</p>\n<p>(null인지 체크하고 생성하는 방법 말고) static 변수 <u><strong>선언과 동시에 초기화</strong></u>를 해주면 클래스 로더가 객체를 생성해주므로 동시성 문제가 해결된다.</p>\n<p>이게 위에서 적용한 방법이다.</p>\n<h3 id=\"lazy-initialization-lazyholder\" style=\"position:relative;\"><a href=\"#lazy-initialization-lazyholder\" aria-label=\"lazy initialization lazyholder permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lazy Initialization, LazyHolder.</h3>\n<p>클래스 안에 static inner class로 helper를 이용해서 생성한다. 미리 올려두는 게 아니고 해당 이너클래스에서 인스턴스를 받아올 때, <u><strong>이너클래스 호출 시점에 이너클래스가 로딩</strong></u>돼서 호출되기 전에 미리 메모리에 올라가지 않는다. 또한 클래스 로더에 의해 객체가 생성되므로 Thread-safe를 보장한다.</p>\n<ul>\n<li>초기화 비용이 큰 클래스들의 경우 클래스 로드 시점에 한꺼번에 초기화돼서 메모리의 부담을 줄일 수 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CardCompany</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">CardCompany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//...</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CardCompanyHelper</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">CardCompany</span> cardCompany <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CardCompany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">CardCompany</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">CardCompanyHelper</span><span class=\"token punctuation\">.</span>cardCompany<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  \n    <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</blockquote>\n</blockquote>\n</li>\n<li>\n<p>그럼 이제 모든 클래스를 싱글톤 패턴을 적용시키면 되겠죠? 하지만! 스프링 컨테이너를 쓰면 기본적으로 객체를 다 싱글톤으로 만들어서 관리해준다.</p>\n</li>\n<li>\n<p>싱글톤 패턴을 적용하면 고객의 요청이 올 때 마다 객체를 생성하는 것이 아니라, 이미 만들어진 객체를 공유해서 효율적으로 사용할 수 있다. 하지만 <u><strong>싱글톤 패턴은 다음과 같은 수 많은 문제점들</strong></u>을 가지고 있다.</p>\n<ul>\n<li>싱글톤 패턴을 <u><strong>구현하는 코드 자체가 많이</strong></u> 들어간다.</li>\n<li>의존관계상 클라이언트가 구체 클래스에 의존한다. (구체 클래스에서 getInstance를 해서 객체를 받아와야 하기 때문) ➡️ DIP를 위반한다.\n<ul>\n<li>클라이언트가 구체 클래스에 의존해서 OCP 원칙을 위반할 가능성이 높다.</li>\n</ul>\n</li>\n<li>테스트하기 어렵다.\n<ul>\n<li>인스턴스를 설정을 끝내고 받아오므로 유연하게 테스트하기가 어렵다.</li>\n</ul>\n</li>\n<li>내부 속성을 변경하거나 초기화 하기 어렵다.</li>\n<li>private 생성자로 <u><strong>자식 클래스를 만들기 어렵다.</strong></u></li>\n<li><code class=\"language-text\">결론적으로 유연성이 떨어진다.</code></li>\n<li>안티패턴으로 불리기도 한다.</li>\n</ul>\n</li>\n<li>\n<p>그런데 스프링 프레임워크는 <u><strong>이 단점은 모두 해결</strong></u>하고! 객체를 싱글톤으로 관리해준다.</p>\n</li>\n</ul>\n<h2 id=\"-싱글톤-컨테이너-스프링-컨테이너\" style=\"position:relative;\"><a href=\"#-%EC%8B%B1%EA%B8%80%ED%86%A4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88\" aria-label=\" 싱글톤 컨테이너 스프링 컨테이너 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 싱글톤 컨테이너 (스프링 컨테이너)</h2>\n<blockquote>\n<p>스프링 컨테이너는 싱글톤 패턴의 문제점을 해결하면서, 객체 인스턴스를 싱글톤(1개만 생성)으로 관리한다. 지금까지 우리가 학습한 스프링 빈이 바로 싱글톤으로 관리되는 빈이다.</p>\n<p>스프링 컨테이너는 싱글턴 패턴을 적용하지 않아도, 객체 인스턴스를 싱글톤으로 관리한다.</p>\n<p>스프링 컨테이너는 싱글톤 컨테이너 역할을 한다. 이렇게 싱글톤 객체를 생성하고 관리하는 기능을 <code class=\"language-text\">싱글톤 레지스트리</code>라 한다. 스프링 컨테이너의 이런 기능 덕분에 싱글턴 패턴의 모든 <u><strong>단점</strong></u>을 해결하면서 객체를 싱글톤으로 유지할 수 있다.</p>\n<ul>\n<li>싱글톤 패턴을 위한 지저분한 코드가 들어가지 않아도 된다.</li>\n<li>DIP, OCP, 테스트, private 생성자로 부터 자유롭게 싱글톤을 사용할 수 있다.\n<ul>\n<li>유연성 떨어지고, 상속 안되고 등등..</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<ul>\n<li>\n<p>테스트 코드</p>\n</li>\n<li>\n<p>둘이 같은 객체(참조)다!</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"스프링 컨테이너와 싱글톤\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">springContainer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">ApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">MemberService</span> memberService1 <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">MemberService</span> memberService2 <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MemberService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isSameAs</span><span class=\"token punctuation\">(</span>memberService2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>싱글톤 컨테이너 적용 후</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABhElEQVQoz41SQYrCQBDMfzztP3zYwt7dk1eP4gc8iBdBEDSiKArGxBhjEmOi0cQktVTLuOuyyDY0w/TMVFdVj1YUBcqyxO12Q57nkqwx1Z5n1+sVWZZhv99D13Usl0uMRiMsFgukaSp5uVygnU4nufgqCHI4HBCGIXzfh+u68DxP6lx5FkURVqsVtFarhXq9LhfX67V0nEwmmM/nsG1bHgdBgP8EwbXBYIBerycsWSAAO6vcbDbYbrcPdsfjEVEYIYkToLwD0R6lRBuPx0JVBf1UnipvyJSXHceRhk7gQDd12KGNorzP4AHYbDZRq9XEB7KZTqcimatlWTBNE7vdDiVKZGkG13NR/ayi8l7B28cb+kb/yWuNXtE3TpGgHNL5fJaVRlOmYRgimXvWZ8YMQ2sIIzCQF/kzw06ng263K4XfPhKYkgnEiOMYnu89vLt79O0h32ntdhuNRkNkUaKSyeQwyI4ecxhJkrycMtVo/CoE4xDIgGx+JqUSVP1FKvgreUbrvgB0te7FjddNlAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221010175716380\"\n        title=\"image-20221010175716380\"\n        src=\"/static/d60c4113ff842c8e208c195490675e7c/37523/image-20221010175716380.png\"\n        srcset=\"/static/d60c4113ff842c8e208c195490675e7c/e9ff0/image-20221010175716380.png 180w,\n/static/d60c4113ff842c8e208c195490675e7c/f21e7/image-20221010175716380.png 360w,\n/static/d60c4113ff842c8e208c195490675e7c/37523/image-20221010175716380.png 720w,\n/static/d60c4113ff842c8e208c195490675e7c/302a4/image-20221010175716380.png 1080w,\n/static/d60c4113ff842c8e208c195490675e7c/07a9c/image-20221010175716380.png 1440w,\n/static/d60c4113ff842c8e208c195490675e7c/e2cbf/image-20221010175716380.png 2138w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>스프링 컨테이너 덕분에 고객의 요청이 올 때 마다 객체를 생성하는 것이 아니라, 이미 만들어진 객체를 공유해서 효율적으로 재사용할 수 있다.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>참고: 스프링의 기본 빈 등록 방식은 싱글톤이지만, 싱글톤 방식만 지원하는 것은 아니다. 요청할 때 마다 새로운 객체를 생성해서 반환하는 기능도 제공한다.</p>\n<p>거의 99%는 싱글톤 빈만 쓰지만, 가끔 HttpRequest에 맞춰서 고객이 들어올 때 만들고 나갈 때 없앤다든가 그럴 일이 있는데, 자세한 걸 뒤에 빈 스코프에서 설명!</p>\n</blockquote>\n<h2 id=\"-싱글톤-방식의-주의점-\" style=\"position:relative;\"><a href=\"#-%EC%8B%B1%EA%B8%80%ED%86%A4-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EC%A3%BC%EC%9D%98%EC%A0%90-\" aria-label=\" 싱글톤 방식의 주의점  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 싱글톤 방식의 주의점 ✨</h2>\n<p>객체 인스턴스를 하나만 생성해서 공유하는 싱글톤 방식은 여러 클라이언트가 하나의 같은 객체 인스턴스를 공유하기 때문에 <u><strong>싱글톤 객체는 상태를 유지(stateful)하게 설계하면 안된다</strong></u>.</p>\n<p>실무에서 자주 발생하니까 조심하기!</p>\n<h3 id=\"스프링-빈은-항상-code-classlanguage-text무상태statelesscode로-설계하기\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88%EC%9D%80-%ED%95%AD%EC%83%81-code-classlanguage-text%EB%AC%B4%EC%83%81%ED%83%9Cstatelesscode%EB%A1%9C-%EC%84%A4%EA%B3%84%ED%95%98%EA%B8%B0\" aria-label=\"스프링 빈은 항상 code classlanguage text무상태statelesscode로 설계하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 빈은 항상 <code class=\"language-text\">무상태(stateless)</code>로 설계하기!</h3>\n<ul>\n<li>\n<p>특정 클라이언트에 의존적인 필드가 있으면 안된다.</p>\n</li>\n<li>\n<p>특정 클라이언트가 값을 변경할 수 있는 필드가 있으면 안된다! 가급적 읽기만 가능해야 한다.</p>\n</li>\n<li>\n<p>필드 대신에 자바에서 공유되지 않는, 지역변수, 파라미터, ThreadLocal 등을 사용해야 한다.</p>\n</li>\n<li>\n<p>스프링 빈(싱글톤 객체)의 <u><strong>필드에 공유 값을 설정</strong></u>하면 정말 큰 장애가 발생할 수 있다!!!</p>\n</li>\n<li>\n<h3 id=\"테스트-코드\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C\" aria-label=\"테스트 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트 코드</h3>\n<ul>\n<li>\n<p>단축키</p>\n<p><code class=\"language-text\">command + shift + T</code>: 테스트 생성</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">statefulServiceSingleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">ApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token class-name\">StatefulService</span> statefulService1 <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StatefulService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">StatefulService</span> statefulService2 <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StatefulService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">//ThreadA: A사용자 10000원 주문</span>\n  statefulService1<span class=\"token punctuation\">.</span><span class=\"token function\">order</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"menu1\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//ThreadB: B사용자 20000원 주문</span>\n  statefulService2<span class=\"token punctuation\">.</span><span class=\"token function\">order</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"menu2\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">//ThreadA: 사용자A 주문 금액 조회</span>\n  <span class=\"token keyword\">int</span> price <span class=\"token operator\">=</span> statefulService1<span class=\"token punctuation\">.</span><span class=\"token function\">getPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//ThreadA: 사용자A는 10000원을 기대했지만, 기대와 다르게 20000원 출력</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"price = \"</span> <span class=\"token operator\">+</span> price<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span><span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>statefulService1<span class=\"token punctuation\">.</span><span class=\"token function\">getPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">20000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">statefulService1</code>이든, <code class=\"language-text\">statefulService2</code>이든, 결국 같은 객체이다.</li>\n</ul>\n</li>\n<li>\n<p>실제로는 <u><strong>멀티쓰레드 환경</strong></u>이므로, 외부에서 <code class=\"language-text\">getPrice()</code>하는 것 뿐만 아니라 내부에서 같은 변수를 접근할 때에도 당연히 문제가 생긴다.</p>\n<ul>\n<li><u><strong>공유되는 필드인데, 특정 클라이언트가 값을 변경해버린다!!</strong></u></li>\n</ul>\n</li>\n<li>\n<p>실무에서 이런 경우를 종종 보는데, 이로인해 정말 해결하기 어려운 큰 문제들이 터진다.(몇년에 한번씩 꼭 만난다.)</p>\n</li>\n<li>\n<p>진짜 공유필드는 조심해야 한다! 스프링 빈은 항상 <code class=\"language-text\">무상태(stateless)</code>로 설계하자.</p>\n</li>\n<li>\n<p>해결?</p>\n<ul>\n<li>위 같은 경 그냥 <u><strong>order에서 금액을 리턴해서 지역변수로 사용</strong></u>하는 식으로 해야 한다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-code-classlanguage-textconfigurationcode과-싱글톤\" style=\"position:relative;\"><a href=\"#-code-classlanguage-textconfigurationcode%EA%B3%BC-%EC%8B%B1%EA%B8%80%ED%86%A4\" aria-label=\" code classlanguage textconfigurationcode과 싱글톤 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 <code class=\"language-text\">@Configuration</code>과 싱글톤</h2>\n<ul>\n<li>\n<p><code class=\"language-text\">AppConfig</code></p>\n<p>어라라?</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppConfig</span> <span class=\"token punctuation\">{</span>\n <span class=\"token annotation punctuation\">@Bean</span>\n <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberService</span> <span class=\"token function\">memberService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n <span class=\"token annotation punctuation\">@Bean</span>\n <span class=\"token keyword\">public</span> <span class=\"token class-name\">OrderService</span> <span class=\"token function\">orderService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OrderServiceImpl</span><span class=\"token punctuation\">(</span>\n <span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n <span class=\"token function\">discountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n <span class=\"token annotation punctuation\">@Bean</span>\n <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberRepository</span> <span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span>  </code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">memberService</code>빈을 만드는 코드를 보면 <code class=\"language-text\">memberRepository()</code> 를 호출한다. 이 메서드를 호출하면 <code class=\"language-text\">new MemoryMemberRepository()</code> 를 호출한다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">orderService</code> 빈을 만드는 코드도 동일하게 <code class=\"language-text\">memberRepository()</code> 를 호출한다. 이 메서드를 호출하면 <code class=\"language-text\">new MemoryMemberRepository()</code> 를 호출한다.</p>\n</li>\n<li>\n<p>그럼 결론적으로 <code class=\"language-text\">Memory..</code>가 두 번 new 돼서 새롭게 생성돼서 싱글톤이 깨지지 않을까? 스프링은 어떻게 되는 걸까?</p>\n</li>\n<li>\n<p>테스트 코드</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">configurationTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">ApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">MemberServiceImpl</span> memberService <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">OrderServiceImpl</span> orderService <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OrderServiceImpl</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">MemoryMemberRepository</span> repository <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span><span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService<span class=\"token punctuation\">.</span><span class=\"token function\">getMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">isSameAs</span><span class=\"token punctuation\">(</span>orderService<span class=\"token punctuation\">.</span><span class=\"token function\">getMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Assertions</span><span class=\"token punctuation\">.</span><span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberService<span class=\"token punctuation\">.</span><span class=\"token function\">getMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">isSameAs</span><span class=\"token punctuation\">(</span>repository<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><u><strong>분명 다 같다! 어떻게 다 같지?</strong></u></li>\n</ul>\n</li>\n<li>\n<p>실험</p>\n<ul>\n<li>\n<p><code class=\"language-text\">AppConfig</code>에 생성될 때 출력문을 넣어보자.</p>\n<ul>\n<li>단축키: <code class=\"language-text\">soutm</code> 하면 함수 이름 출력해준다</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Bean</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberRepository</span> <span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberRepository 생성\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemoryMemberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Bean</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberService</span> <span class=\"token function\">memberService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberService 생성\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemberServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Bean</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">OrderService</span> <span class=\"token function\">orderService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"orderService 생성\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OrderServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">discountPolicy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>결과 (순서는 보장되지 않음. 횟수만 보세용)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAiklEQVQI1z2OWxaEMAhD3dLMWKvWFmjxvf/1ZA718UW4gUAj5wY+VoS5YFoK0q4Ic8aoGWHJVce1gA6FJ67c5qwORao3lGumDYQm7yeiLnCR0CWGZ4aL/PamOzIu+I0Jbno4oTVNXKvtfXxCw9uOoHqHCYYs9ZMn3BZ6ubh98PL7mHkW2LPg2yf8AUL6Z3rW3hGqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221010182721390\"\n        title=\"image-20221010182721390\"\n        src=\"/static/c7fdaf70acead369621b3c149764d52a/37523/image-20221010182721390.png\"\n        srcset=\"/static/c7fdaf70acead369621b3c149764d52a/e9ff0/image-20221010182721390.png 180w,\n/static/c7fdaf70acead369621b3c149764d52a/f21e7/image-20221010182721390.png 360w,\n/static/c7fdaf70acead369621b3c149764d52a/37523/image-20221010182721390.png 720w,\n/static/c7fdaf70acead369621b3c149764d52a/302a4/image-20221010182721390.png 1080w,\n/static/c7fdaf70acead369621b3c149764d52a/d93d9/image-20221010182721390.png 1243w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>이걸 어떻게 하는 걸까? 분명 자바 코드로 호출하는데…</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-code-classlanguage-textconfigurationcode과-바이트코드-조작의-마법\" style=\"position:relative;\"><a href=\"#-code-classlanguage-textconfigurationcode%EA%B3%BC-%EB%B0%94%EC%9D%B4%ED%8A%B8%EC%BD%94%EB%93%9C-%EC%A1%B0%EC%9E%91%EC%9D%98-%EB%A7%88%EB%B2%95\" aria-label=\" code classlanguage textconfigurationcode과 바이트코드 조작의 마법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 <code class=\"language-text\">@Configuration</code>과 바이트코드 조작의 마법</h2>\n<p>스프링 컨테이너는 <code class=\"language-text\">싱글톤 레지스트리</code>다. (싱글톤 객체를 생성하고 관리하는 기능) 따라서 스프링 빈이 싱글톤이 되도록 보장해주어야 한다. 그런데 스<u><strong>프링이 자바 코드까지 어떻게 하기는 어렵다.</strong></u> 저 자바 코드를 보면 분명 3번 호출되어야 하는 것이 맞다.</p>\n<ul>\n<li>\n<p>그래서 스프링은 <em><strong>클래스의 바이트코드를 조작</strong></em>하는 라이브러리를 사용한다.</p>\n</li>\n<li>\n<p>모든 비밀은 <code class=\"language-text\">@Configuration</code> 을 적용한 <code class=\"language-text\">AppConfig</code> 에 있다.</p>\n</li>\n<li>\n<p>스프링 컨테이너에 의해 생성된 <code class=\"language-text\">AppConfig</code> 빈을 출력해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">configurationDeep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">ApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">AppConfig</span> bean <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bean.getClass() = \"</span> <span class=\"token operator\">+</span> bean<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 644px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 3.3333333333333335%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAS0lEQVQI1x2LQQqAMAwEfZQHL0VNo01Da00Rwf8/ZKW5DczMxGKYF8IaCyg1BFIcuePUjrArNq5guSHlwWirfdDr9YazOcfU3I/nB7eqJRf/sBJ5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221010184016955\"\n        title=\"image-20221010184016955\"\n        src=\"/static/01eae015b063e13cdef63052ea26ea10/78274/image-20221010184016955.png\"\n        srcset=\"/static/01eae015b063e13cdef63052ea26ea10/e9ff0/image-20221010184016955.png 180w,\n/static/01eae015b063e13cdef63052ea26ea10/f21e7/image-20221010184016955.png 360w,\n/static/01eae015b063e13cdef63052ea26ea10/78274/image-20221010184016955.png 644w\"\n        sizes=\"(max-width: 644px) 100vw, 644px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>AppConfig 뒤에 무언가 더 붙어있다!</li>\n</ul>\n</li>\n</ul>\n<p>AppConfig 빈으로 등록된 객체는 사실 내가 만든 클래스가 아니다! 스프링이 CGLIB라는 바이트코드 조작 라이브러리를 사용해서 AppConfig 클래스를 상속받은 임의의 다른 클래스를 만들고, 그 다른 클래스를 스프링 빈으로 등록한 것이다!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABWElEQVQoz42Tz46CMBDGeQgPPgrefB0vHjf7DHty32Ozb6EngyReEOoFFEX8ix5oC3ybrwmsGkOcZNJpKb/5ptNaZVmiKIqXzm9aa0gpoZRCnudYLBbwPA+z2Qy+7yPLsmYP3UKLEZimKU6nk/Hj8YjNZoMkScy43W5xOBzM+vl8RhiGsKjkHsBsVVWZOVUR9K4xicUMQggsl0vEcWyyEfQMZJKyKqEL3QAYc60WYICUOp/PMZ1OzQIBr4BUX5sqFKSWD5U1QJNJa3MutZLmx6eSVakw/B2i992DPbIx+Bkgk9ljyZfLxRzsarVqDr7OSCDnJpYKcRqjP+qj+9lF56MD+8tGsA6gcvUPZPtZsuM4cF3XxHWj7oGsQAQC+2SPsTPGxJ0g8AIIXyCMwkeF1+vV3CeOt9vtpcJ3jE1tvYcEsmnvGquw2l4JgVEUYbfbmc1tzgfAV/QHGJBCsfJYxMgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20221010184409772\"\n        title=\"image-20221010184409772\"\n        src=\"/static/f6ab0de2e9eb49016d071525bedfcf78/37523/image-20221010184409772.png\"\n        srcset=\"/static/f6ab0de2e9eb49016d071525bedfcf78/e9ff0/image-20221010184409772.png 180w,\n/static/f6ab0de2e9eb49016d071525bedfcf78/f21e7/image-20221010184409772.png 360w,\n/static/f6ab0de2e9eb49016d071525bedfcf78/37523/image-20221010184409772.png 720w,\n/static/f6ab0de2e9eb49016d071525bedfcf78/302a4/image-20221010184409772.png 1080w,\n/static/f6ab0de2e9eb49016d071525bedfcf78/07a9c/image-20221010184409772.png 1440w,\n/static/f6ab0de2e9eb49016d071525bedfcf78/e2cbf/image-20221010184409772.png 2138w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그 임의의 다른 클래스가 바로 싱글톤이 보장되도록 해준다. 아마도 다음과 같이 바이트 코드를 조작해서 작성되어 있을 것이다.(실제로는 CGLIB의 내부 기술을 사용하는데 매우 복잡하다.) -> 나중에 AOP 같은 곳에도 이런 메커니즘이 적용되어 있다.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">AppConfig@CGLIB 예상 코드</code></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Bean</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberRepository</span> <span class=\"token function\">memberRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>memoryMemberRepository가 이미 스프링 컨테이너에 등록되어 있으면<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">return</span> 스프링 컨테이너에서 찾아서 반환<span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//스프링 컨테이너에 없으면</span>\n 기존 로직을 호출해서 <span class=\"token class-name\">MemoryMemberRepository</span>를 생성하고 스프링 컨테이너에 등록\n <span class=\"token keyword\">return</span> 반환\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>@Bean이 붙은 메서드마다 이미 스프링 빈이 존재하면 존재하는 빈을 반환하고, 없으면 생성해서 스프링 빈으로 등록하고 반환하는 코드가 동적으로 만들어진다.</p>\n</li>\n<li>\n<p>덕분에 싱글톤이 보장!</p>\n</li>\n<li>\n<h3 id=\"code-classlanguage-textconfigurationcode-을-적용하지-않고-code-classlanguage-textbeancode-만-적용하면\" style=\"position:relative;\"><a href=\"#code-classlanguage-textconfigurationcode-%EC%9D%84-%EC%A0%81%EC%9A%A9%ED%95%98%EC%A7%80-%EC%95%8A%EA%B3%A0-code-classlanguage-textbeancode-%EB%A7%8C-%EC%A0%81%EC%9A%A9%ED%95%98%EB%A9%B4\" aria-label=\"code classlanguage textconfigurationcode 을 적용하지 않고 code classlanguage textbeancode 만 적용하면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">@Configuration</code> 을 적용하지 않고, <code class=\"language-text\">@Bean</code> 만 적용하면?</h3>\n<p><code class=\"language-text\">@Configuration</code>을 붙이면 바이트코드를 고작해서 자식 객체를 만든다는데, 그럼 <code class=\"language-text\">@Configuration</code>이 없으면 여러번 스프링빈으로 등록할까?</p>\n<ul>\n<li>\n<p>스프링 빈 등록은 정상적으로 되지만, 여러 번 객체를 생성한다. <code class=\"language-text\">MemberService</code>를 생성할 때 <code class=\"language-text\">MemberRepository</code>를 새로 생성하고 넣어주고, <code class=\"language-text\">OrderService</code>를 생성할 때 <code class=\"language-text\">MemberRepository</code>를 새로 생성하고 넣어준다.</p>\n<ul>\n<li>그리고 이렇게 넣어준 <code class=\"language-text\">MemberRepository</code>는 스프링 빈이 아니다. 그냥 클래스에서 new 해서 넣어준 것과 다를 바가 없다.</li>\n<li>CGB는 <u><strong>이미 등록된 스프링 빈이면 스프링 컨테이너에서 찾아서 넣어주는 로직</strong></u>이 있기 때문이다.</li>\n</ul>\n</li>\n<li>\n<p>따라서 <code class=\"language-text\">MemberService</code>에 등록된 <code class=\"language-text\">MemberRepository</code>와  <code class=\"language-text\">OrderService</code>에 등록된 <code class=\"language-text\">MemberRepository</code>가 달라진다! (새로 생성한 <code class=\"language-text\">MemberRepository</code>도 역시 다르다.)</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-정리\" style=\"position:relative;\"><a href=\"#-%EC%A0%95%EB%A6%AC\" aria-label=\" 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 정리</h2>\n<ul>\n<li><code class=\"language-text\">@Bean</code>만 사용해도 스프링 빈으로 등록되지만, 싱글톤을 보장하지 않는다.\n<ul>\n<li><code class=\"language-text\">memberRepository()</code> 처럼 의존관계 주입이 필요해서 메서드를 직접 호출할 때 <u><strong>컨테이너에 등록되면 찾아서 넣어주는 로직이 없어지므로</strong></u> 싱글톤을 보장하지 않는다.</li>\n</ul>\n</li>\n<li>크게 고민할 것이 없다. 스프링 설정 정보는 항상 <code class=\"language-text\">@Configuration</code> 을 사용하자.</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-%EC%8B%B1%EA%B8%80%ED%86%A4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88\">☘️ 싱글톤 컨테이너</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%9B%B9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EA%B3%BC-%EC%8B%B1%EA%B8%80%ED%86%A4\">📌 웹 애플리케이션과 싱글톤</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4\">📌 싱글톤 패턴</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8B%B1%EA%B8%80%ED%86%A4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88\">📌 싱글톤 컨테이너 (스프링 컨테이너)</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8B%B1%EA%B8%80%ED%86%A4-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EC%A3%BC%EC%9D%98%EC%A0%90-\">📌 싱글톤 방식의 주의점 ✨</a></p>\n<ul>\n<li><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B9%88%EC%9D%80-%ED%95%AD%EC%83%81-%EB%AC%B4%EC%83%81%ED%83%9Cstateless%EB%A1%9C-%EC%84%A4%EA%B3%84%ED%95%98%EA%B8%B0\">스프링 빈은 항상 <code class=\"language-text\">무상태(stateless)</code>로 설계하기!</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-configuration%EA%B3%BC-%EC%8B%B1%EA%B8%80%ED%86%A4\">📌 <code class=\"language-text\">@Configuration</code>과 싱글톤</a></p>\n</li>\n<li>\n<p><a href=\"#-configuration%EA%B3%BC-%EB%B0%94%EC%9D%B4%ED%8A%B8%EC%BD%94%EB%93%9C-%EC%A1%B0%EC%9E%91%EC%9D%98-%EB%A7%88%EB%B2%95\">📌 <code class=\"language-text\">@Configuration</code>과 바이트코드 조작의 마법</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%A0%95%EB%A6%AC\">📌 정리</a></p>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 10, 2022","title":"05. 싱글톤 컨테이너 - 스프링 핵심 원리 기본편","categories":"강의","author":"goldggyul","emoji":null,"imageEmoji":"spring-logo.png"},"fields":{"slug":"/spring-core-basic-005/"}},"site":{"siteMetadata":{"siteUrl":"https://goldggyul.github.io","comments":{"utterances":{"repo":"goldggyul/goldggyul.github.io"}}}}},"pageContext":{"slug":"/spring-core-basic-004/","nextSlug":"/spring-core-basic-003/","prevSlug":"/spring-core-basic-005/"}},"staticQueryHashes":["1956554647","2938748437","3350743975","3454833782"]}