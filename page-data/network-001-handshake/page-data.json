{"componentChunkName":"component---src-templates-blog-template-js","path":"/network-001-handshake/","result":{"data":{"cur":{"id":"d7fef937-27ec-5b6b-89a9-c233c9eed463","html":"<h1 id=\"tcp-handshake\" style=\"position:relative;\"><a href=\"#tcp-handshake\" aria-label=\"tcp handshake permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TCP Handshake</h1>\n<ul>\n<li>왜 그냥 보내는 게 아니고 handshake 과정을 거칠까요?</li>\n<li>그럼 우선 TCP 통신이란 뭘까요?</li>\n<li>TCP는 unreliable network에서 reliable한 전송을 보장할 수 있게 하는 프로토콜입니다.</li>\n<li>그렇다면 handshake는 reliable한 전송을 위해 필요하다고 생각해볼 수 있습니다.\n<ul>\n<li>Q. 굳이 <u>reliable한 전송이 필요가 없다면, handshake를 통해 연결 성립을 해야할까요</u>?</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"udp\" style=\"position:relative;\"><a href=\"#udp\" aria-label=\"udp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UDP</h1>\n<ul>\n<li>UDP의 경우는 <u>reliable한 전송을 보장하지 않습니다.</u></li>\n<li>따라서 UDP는 통신을 하려는 상대방이 지금 메세지를 받을 수 있는 지 없는 지를 확인하지 않고 그냥 보냅니다. 그래서 handshake 과정을 통해 상대방의 상황이 어떤 지, 준비가 되어 있는 지 확인할 필요가 없기 때문에, <u>handshake를 거치지 않습니다</u>.</li>\n</ul>\n<h1 id=\"tcp-code-classlanguage-texttransmission-control-protocolcode\" style=\"position:relative;\"><a href=\"#tcp-code-classlanguage-texttransmission-control-protocolcode\" aria-label=\"tcp code classlanguage texttransmission control protocolcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TCP: <code class=\"language-text\">Transmission Control Protocol</code></h1>\n<ul>\n<li>그렇다면 handshake가 뭐길래 TCP는 reliable한 전송을 보장할 수 있는 걸까요?</li>\n<li>일단 과정을 살펴보면 알겠죠?</li>\n<li>우선 handshake는 연결을 성립할 때, 해제할 때 모두 일어납니다.</li>\n<li>성립할 때는 세번, 해제할 때는 네번 패킷을 주고 받습니다. 그래서 성립할 때는 <code class=\"language-text\">3-way handshake</code>, 해제할 때는 <code class=\"language-text\">4-way handshake</code>가 일어난다고 합니다.</li>\n<li>그럼 연결을 성립하기 위한 3 way handshake 과정을 먼저 살펴봅시다.</li>\n</ul>\n<h2 id=\"3-way-handshake-연결-성립connection-establishment\" style=\"position:relative;\"><a href=\"#3-way-handshake-%EC%97%B0%EA%B2%B0-%EC%84%B1%EB%A6%BDconnection-establishment\" aria-label=\"3 way handshake 연결 성립connection establishment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3 way handshake: 연결 성립(Connection Establishment)</h2>\n<ul>\n<li>3 way handshake의 핵심은 서로 sequence number를 주고 받으면서 상태를 동기화하는 것</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.88888888888887%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAABYlAAAWJQFJUiTwAAACO0lEQVQ4y31T21LUQBDdj9cHf8JHrfIFLKG8PgiupSiiW7DKLgkLuZCdyeZq5tZzaYsEwga2PDWpmumeM33Sc2aELYw2dVVzxsqydM7hA2it8yyrqrIsyz446meTyWRnZzddrXATrLVRFM/O/DzPB2RrLSJ+3Nt/9PgJ5xwR7xXvllFCXr7bE1JeR3pylwuiq2cvti8ugy5inTPOWWxHu2HmXzx9vsWFaDe0ZADwfX+xWBCypHlZSkl0URt2e/odpFJxQtZFjYwxhJAsyzSoWqiF1Lvp5Vbmvanmb/P5iYiJKQTKTo5rf9C1GDQMEQHgZmIxFtpj7EuZbqeLV9kZ0aJSVihY3z9aP0kptZ5jDs6BHotLCjCtzeeU00ZURT6bz33fb5pmUFkpsIgrFKeQjMvJPt07LH57TAVc59pKbawxnHNCSFVVA9nOOaP1r2o2Xu0fkvGM/vALfyUZNzdXY6zVWg9kW2sZYwBgNaRMnWRBWJz7nHjQDEziXE++a1jnO1CAxsQ1P6oMUeiVfz4lrw/Y0VSGuVO9ye5Xftjtv9ouOffy+Dj5/i35ME7fH9Q/zyApdPM/sgLoHeAQmcVUaC8PT8vppCFfG78C1qbcJnJ7je4m3Y3rjxvMFHq1KSXgmvU2m6Qv3rbGIlpEp61V2myWbYzJsmzjY77VpYqiGJCdc1JKABBCUEo550opKaVSSrRQt2CMUUrXXXj9qoIgIIRQSpMWhJA4jpfLZRRFYRimaRqGYRe/atGT/wEJpEThzwfPSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220921154256651\"\n        title=\"image-20220921154256651\"\n        src=\"/static/4aae562fb56d92569429f63f21d00cfc/37523/image-20220921154256651.png\"\n        srcset=\"/static/4aae562fb56d92569429f63f21d00cfc/e9ff0/image-20220921154256651.png 180w,\n/static/4aae562fb56d92569429f63f21d00cfc/f21e7/image-20220921154256651.png 360w,\n/static/4aae562fb56d92569429f63f21d00cfc/37523/image-20220921154256651.png 720w,\n/static/4aae562fb56d92569429f63f21d00cfc/302a4/image-20220921154256651.png 1080w,\n/static/4aae562fb56d92569429f63f21d00cfc/32ac3/image-20220921154256651.png 1249w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>우선 데이터를 받고 싶어 하는 호스트(클라이언트) application이 데이터를 갖고 있는 다른 호스트(서버)와 연결을 하고 싶다고 TCP에 알릴 것입니다.</p>\n</li>\n<li>\n<p>그럼 이제 client의 TCP가 서버의 TCP와 connection을 성립하기 위해 3-way handshake를 진행합니다.</p>\n<ol>\n<li>\n<p>클라이언트 쪽 TCP가 서버 쪽 TCP에게 <code class=\"language-text\">SYN segment</code>를 보냅니다.</p>\n<blockquote>\n<h3 id=\"segment란\" style=\"position:relative;\"><a href=\"#segment%EB%9E%80\" aria-label=\"segment란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>segment란?</h3>\n<p>transport layer에서의 데이터 전송 단위</p>\n<h3 id=\"synsynchronize-segment\" style=\"position:relative;\"><a href=\"#synsynchronize-segment\" aria-label=\"synsynchronize segment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SYN(synchronize) segment?</h3>\n<p>TCP 헤더 중에  <code class=\"language-text\">SYN bit</code>를 1로 세팅한 세그먼트 라서 SYN segement라고 합니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAgH/2gAMAwEAAhADEAAAAfZkVG2WNdDKoP/EABkQAAMAAwAAAAAAAAAAAAAAAAABEhEgMf/aAAgBAQABBQKimZ1XD//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CH//EABoQAQACAwEAAAAAAAAAAAAAAAEAURARICH/2gAIAQEAAT8hVcIb3E9wcH//2gAMAwEAAgADAAAAEGc4/wD/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREQ/9oACAEDAQE/EKyvf//EABYRAQEBAAAAAAAAAAAAAAAAABEAEP/aAAgBAgEBPxAjf//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQVGB/9oACAEBAAE/EBLjRFaQvtQcgFWdlDusfJgRX3sAiyUeE//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"IMG_9C552B99CBBC-1\"\n        title=\"IMG_9C552B99CBBC-1\"\n        src=\"/static/ce9d4f1106d0424be770bb72ada31fef/80e3c/IMG_9C552B99CBBC-1.jpg\"\n        srcset=\"/static/ce9d4f1106d0424be770bb72ada31fef/4ec73/IMG_9C552B99CBBC-1.jpg 180w,\n/static/ce9d4f1106d0424be770bb72ada31fef/158ba/IMG_9C552B99CBBC-1.jpg 360w,\n/static/ce9d4f1106d0424be770bb72ada31fef/80e3c/IMG_9C552B99CBBC-1.jpg 720w,\n/static/ce9d4f1106d0424be770bb72ada31fef/47311/IMG_9C552B99CBBC-1.jpg 1080w,\n/static/ce9d4f1106d0424be770bb72ada31fef/f4946/IMG_9C552B99CBBC-1.jpg 1274w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</blockquote>\n</li>\n</ol>\n<p>이 때 segment에는, 연결을 요청하는 클라이언트가 선택한 <u>랜덤 sequence number</u>가 포함되어 있습니다.</p>\n<ol start=\"2\">\n<li>\n<p>서버는 <code class=\"language-text\">SYN segment</code>를 받고, TCP 버퍼와 연결을 위한 변수들을 할당합니다. 그리고 클라이언트에게 클라이언트가 보낸 SYN segment를 잘 받았다는 의미로 TCP 헤더의 ACK(acknowledgment) 부분을 클라이언트가 보낸 seq # +1로 세팅합니다.</p>\n<p>또, 클라이언트가 서버에게 SYN segment를 보낸 것처럼 역시 서버 자신이 선택한 랜덤 seq #를 담아서 SYN segment로서의 역할도 합니다. 그러면 SYN bit도 1로 세팅되겠죠?</p>\n</li>\n<li>\n<p>클라이언트는 서버의 <code class=\"language-text\">SYN ACK segment</code>를 받고, 연결을 위한 버퍼와 변수를 역시 할당합니다. 또 서버의 seq #를 잘 받았다는 의미에서 <code class=\"language-text\">ACK segment</code>를 보냅니다.</p>\n</li>\n</ol>\n</li>\n<li>\n<p>TCP는 양방향 연결이므로, 각자 seq #를 보내고 서로 잘 받았는지 확인하기 위해 SYN ACK segment를 서로 주고받는 것입니다. 근데 서버가 SYN, ACK를 한꺼번에 보내므로 3 way로 handshake가 진행됩니다.</p>\n</li>\n<li>\n<p>위 그림엔 안나와있지만, 이외에도 3 way handshake를 통해 결정되는 데이터가 있습니다.</p>\n<ul>\n<li>\n<p>오늘날의 TCP는 대부분 flow control을 위해 Stop and Wait 방식 대신 <code class=\"language-text\">Sliding Window</code> 사용합니다. 이 때 사용하는 sliding window의 크기는 three way handsake를 통해 각자 정한 윈도우 사이즈를 주고 받고, 그 외에 네트워크 상황(RTT)을 고려해서 결정됩니다. 네트워크가 좋지 않을 수록 윈도우 크기를 줄이게 됩니다.</p>\n<ul>\n<li>이 때 정한 윈도우 크기는 계속해서 상황에 맞게 변경됩니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"4-way-handshake-연결-해제connection-termination\" style=\"position:relative;\"><a href=\"#4-way-handshake-%EC%97%B0%EA%B2%B0-%ED%95%B4%EC%A0%9Cconnection-termination\" aria-label=\"4 way handshake 연결 해제connection termination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4 way handshake: 연결 해제(Connection Termination)</h2>\n<ul>\n<li>연결 된 후에는 서로 segment를 보내서 데이터를 주고 받을 수 있습니다.</li>\n<li>후에 연결을 해제하고 싶을 때, 연결된 두 호스트 어디서든 연결을 해제할 수 있습니다.</li>\n<li>그리고 연결을 해제하기 위해 4 way handshake 과정이 진행됩니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.22222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB6ElEQVQ4y32Uy2/UMBDG96+HA3fOPSGqSoUbNyTECSSKVIpKaXY3XW3YPBzn5fd47CrJ7pJmk/0URZbtn2f8eeyFH0hKSbLMgvXzKosyy1IA8N4v+i7nnPf+5sfN9YePSqlJrJ8TJ8nt3f0LGBG99+8vr169flNV9XHqKbze/Lv+9FlrPY58/xBcvLtarsN2ua6r/w4B2ub3n7/eXlwqNYD74HlON9uoadhM2u0/L6rfD0EfbHEMyznPkoRKvRS4YhArmxu3rWVS81HyaPeOLkYDSil0Hp2nBmOFmbIR16GAFYMlg1ThEze1bB11IxjRGWOGPWnNo4pnxoUc/jTmG9VfMll3Gx7D3rtc6FDYgMEjsytuI252EmKFwrqjNXAIsBh5UkrNrZurEHcGdm6ftpuHS420qsuiQHTTcN+urA9LtqJNpPCx3QgsmY0EFJOwt3Zdiq+5vq1MwCCSNpFAJIjBRtq0u9ocp62VTBueaNx2noUC/1K2KRgxbiex9wIs9rW5hxH7WvSq03A5cJ4Yl2rMND4JCBjcVZpp8/+o4l0cdaqrWh3OcE6IaCbd1lpLqU4dHt6QKbgb5JwLIf1ZTUdO0zQMw7mX4CU85TYA5Hl++gwMJYSglE7AxhhCiLXn3jAlJSGkh58BAy3KDp3d/O4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-20220921174946086\"\n        title=\"image-20220921174946086\"\n        src=\"/static/370704125c991f2f7da1138d556abc6a/37523/image-20220921174946086.png\"\n        srcset=\"/static/370704125c991f2f7da1138d556abc6a/e9ff0/image-20220921174946086.png 180w,\n/static/370704125c991f2f7da1138d556abc6a/f21e7/image-20220921174946086.png 360w,\n/static/370704125c991f2f7da1138d556abc6a/37523/image-20220921174946086.png 720w,\n/static/370704125c991f2f7da1138d556abc6a/302a4/image-20220921174946086.png 1080w,\n/static/370704125c991f2f7da1138d556abc6a/a0730/image-20220921174946086.png 1131w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpUlEQVQ4y22U56pCQQyEff9H0l9WRFQQQUTE3rCLvc7lC2RZjzcQdsnJZjKTaOrz+cj9/X7rdrspjv3n2PV61ePxsHv8LeWF8NfrpePxaPc4nnTscrkEcI9/FcQ49/t9QHWQ+PRc8u73e3j31SEO2nw+13A4tKTn86n/jMLYZDLR6XT6vyABEtrttkajkSFDqdfrqVKpqFgsql6vazabhcKLxcJyYjY/lBF5Op2GR9xbrZa63a6dMAAMNjBBb5jgPx1iJHpB13Oz2WgwGGi73Wq9XutwONiEYdNsNtVoNCzunabidSEZyj7FcrmsQqGgUqlktGu1WtAW+skBhoIITWd0gm5OC2S06vf7Wi6XWq1WOp/PJg25dIcc5AfKTtdpMhynT1e5XM46zOfzqlarYVXQkw6h/6UhHxk/iHin07FET6YA+nH6Q6fsU/5ZbChAZbfbhaHQYTabVTqdViaTMadb4l4QwNhCh250EE/ZtQTQdxNg7mg9Ho/NubNGVpCPUCaRFfEpx9omu8AoBCMAeQuYFSRIdRwkX4X455T8R8J8qZOU/wA46IJBlfazcwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4way.png\"\n        title=\"4way.png\"\n        src=\"/static/bcda05bbd87647a87d9cc9403d6ba226/37523/4way.png\"\n        srcset=\"/static/bcda05bbd87647a87d9cc9403d6ba226/e9ff0/4way.png 180w,\n/static/bcda05bbd87647a87d9cc9403d6ba226/f21e7/4way.png 360w,\n/static/bcda05bbd87647a87d9cc9403d6ba226/37523/4way.png 720w,\n/static/bcda05bbd87647a87d9cc9403d6ba226/302a4/4way.png 1080w,\n/static/bcda05bbd87647a87d9cc9403d6ba226/35252/4way.png 1204w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol>\n<li>연결을 종료하고 싶은 쪽(위 예에선 클라이언트)에서 header의 <u>FIN bit를 1로 세팅해서 보냅니다</u>.</li>\n<li>서버는 위 segment를 받고, 받았다는 의미로 <u>ACK를 보냅니다.</u> (이 때 보내야 하는 데이터가 남아 있다면 데이터를 보내기 위해 <u>연결을 바로 종료하진 않습니다.</u>)</li>\n<li>서버는 데이터를 모두 보낸 후 연결을 종료할 준비가 됐으므로 <u>FIN bit를 1로 세팅해서 보냅니다.</u></li>\n<li>마지막으로, 클라이언트가 서버가 종료했다는 걸 확인했다는 의미로 ACK를 보냅니다. 이 때, <strong><u>클라이언트는 아직 서버로부터 받지 못한 데이터가 있을 수 있으므로 잠시 기다린 후에 연결을 종료합니다.</u></strong> 이 때 두 호스트는 연결을 위해 사용했던 resoure를 해제합니다.</li>\n</ol>\n<hr>\n<blockquote>\n<h1 id=\"생각해봅시다\" style=\"position:relative;\"><a href=\"#%EC%83%9D%EA%B0%81%ED%95%B4%EB%B4%85%EC%8B%9C%EB%8B%A4\" aria-label=\"생각해봅시다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>생각해봅시다.</h1>\n<span style=\"font-size:110%\">\n<p>🧑‍🏫 TCP Handshake과정에서, 연결을 성립할 때와 해제할 때, 왜 성립할 때처럼 SYN, ACK 를 같이 보내는 게 아니고, FIN을 보낸 후에 ACK를 보낼까요?</p>\n<p>🙋</p>\n</span>\n<span style=\"font-size:110%\">\n<p>🧑‍🏫 SYN 패킷을 보낼 때 최초의 sequence number를 ISN(Initial sequence number)라고 합니다. ISN은 랜덤으로 선택된다고 했는데요, 랜덤으로 선택하는 이유가 뭘까요?</p>\n<p>🙋</p>\n</span>\n<span style=\"font-size:110%\">\n<p>🧑‍🏫 Dos 공격 방법 중에, 3-way handshake 과정을 이용한 공격 방식이 있습니다. 랜덤 IP의 클라이언트가 계속해서 3-way handshake의 첫번째 SYN 패킷을 보내는 공격인데요. 이게 왜 문제가 되는 걸까요?</p>\n<p>🙋</p>\n</span>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#tcp-handshake\">TCP Handshake</a></p>\n</li>\n<li>\n<p><a href=\"#udp\">UDP</a></p>\n</li>\n<li>\n<p><a href=\"#tcp-transmission-control-protocol\">TCP: <code class=\"language-text\">Transmission Control Protocol</code></a></p>\n<ul>\n<li><a href=\"#3-way-handshake-%EC%97%B0%EA%B2%B0-%EC%84%B1%EB%A6%BDconnection-establishment\">3 way handshake: 연결 성립(Connection Establishment)</a></li>\n<li><a href=\"#4-way-handshake-%EC%97%B0%EA%B2%B0-%ED%95%B4%EC%A0%9Cconnection-termination\">4 way handshake: 연결 해제(Connection Termination)</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"TCP Handshake 왜 그냥 보내는 게 아니고 handshake 과정을 거칠까요? 그럼 우선 TCP 통신이란 뭘까요? TCP는 unreliable network에서 reliable한 전송을 보장할 수 있게 하는 프로토콜입니다. 그렇다면 handshake는 reliable한 전송을 위해 필요하다고 생각해볼 수 있습니다. Q. 굳이 reliable한 전송이 필요가 없다면, handshake를 통해 연결 성립을 해야할까요? UDP UDP의 경우는 reliable한 전송을 보장하지 않습니다. 따라서 UDP는 통신을 하려는 상대방이 지금 메세지를 받을 수 있는 지 없는 지를 확인하지 않고 그냥 보냅니다. 그래서 handshake 과정을 통해 상대방의 상황이 어떤 지, 준비가 되어 있는 지 확인할 필요가 없기 때문에, handshake를 거치지 않습니다. TCP:  그렇다면 handshake가 뭐길래 TCP는 reliable한 전송을 보장할 수 있는 걸까요? 일단 과정을 살펴보면 알겠죠…","tableOfContents":"<ul>\n<li>\n<p><a href=\"#tcp-handshake\">TCP Handshake</a></p>\n</li>\n<li>\n<p><a href=\"#udp\">UDP</a></p>\n</li>\n<li>\n<p><a href=\"#tcp-code-classlanguage-texttransmission-control-protocolcode\">TCP: <code class=\"language-text\">Transmission Control Protocol</code></a></p>\n<ul>\n<li><a href=\"#3-way-handshake-%EC%97%B0%EA%B2%B0-%EC%84%B1%EB%A6%BDconnection-establishment\">3 way handshake: 연결 성립(Connection Establishment)</a></li>\n<li><a href=\"#4-way-handshake-%EC%97%B0%EA%B2%B0-%ED%95%B4%EC%A0%9Cconnection-termination\">4 way handshake: 연결 해제(Connection Termination)</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"September 21, 2022","title":"TCP 3 way handshake & 4 way handshake","categories":"네트워크","author":"goldggyul","emoji":"🌏","imageEmoji":null},"fields":{"slug":"/network-001-handshake/"}},"next":{"id":"260e786f-ac61-54e7-8587-a2a60f7ee91b","html":"<h1 id=\"리스트-code-classlanguage-textjoincode-원하는-형태로-출력하기\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EC%8A%A4%ED%8A%B8-code-classlanguage-textjoincode-%EC%9B%90%ED%95%98%EB%8A%94-%ED%98%95%ED%83%9C%EB%A1%9C-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0\" aria-label=\"리스트 code classlanguage textjoincode 원하는 형태로 출력하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리스트 <code class=\"language-text\">join</code>: 원하는 형태로 출력하기</h1>\n<blockquote>\n<h3 id=\"code-classlanguage-textstrjoincodeiterable\" style=\"position:relative;\"><a href=\"#code-classlanguage-textstrjoincodeiterable\" aria-label=\"code classlanguage textstrjoincodeiterable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">str.join</code>(<em>iterable</em>)</h3>\n<p>Return a string which is the concatenation of the strings in <em>iterable</em>. A <a href=\"https://docs.python.org/3/library/exceptions.html#TypeError\"><code class=\"language-text\">TypeError</code></a> will be raised if there are any non-string values in <em>iterable</em>, including <code class=\"language-text\">bytes</code> objects. The separator between elements is the string providing this method.</p>\n<p><a href=\"https://docs.python.org/3/library/stdtypes.html?highlight=str%20join#str.join\">python docs</a></p>\n</blockquote>\n<ul>\n<li>\n<p>인자로 iterable한 string을 넣으면 join시켜서 문자열을 만들어준다.</p>\n</li>\n<li>\n<p>int형 리스트를 원하는 형태로 join해서 출력해보자.</p>\n</li>\n<li>\n<p>이 때 string join을 해야하므로 int형을 str형으로 변환해줘야한다.</p>\n</li>\n<li>\n<p>따라서 리스트의 요소들을 <code class=\"language-text\">str(i)</code>로 형변환 해주기 위해 map을 활용하자.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">map</code>은 리스트(포함 iterable한 객체)의 요소를 지정된 함수로 처리해준다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 82.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACMElEQVQ4y52Ua5OaMBSG+f+/qNNPnXY73dlZGVAUwyUGJAjrjYCXFcG3c2JRt6sf2sycSXIuT94wnBin0wmPxm63g1IKm80GZVmiKApUVfUwn1gGLdq2xXq9xnw+x2Kx0PNqtYLrurAsC47jwDRNPZOPYpTX5VItMWgYTdMgTVOtoK5rHA6HizVN+0lF07YfcqiGVBODWAZdg+zRKFWBPJtB6Tl7mEdQUmosl0t9SllVCCZT8DhFGElttO6PPLz0bPSHDD3Lucb+xAORoFAlfUHkeX4GHusDBkxgKJYYx2t4ibpYkFYI0lKvw2wDX5bwZAmWFDp3JFbouxynU3sF1vUBjhfr5EAq/LI8PPXG+GkymG6sfQT9+v0VX7694Nn2YTEJnlXwpMLAi+8DGSmSCg5/w0jMMQgzvQ7SM9CNlnDCHP1ghpFYaB/VDFh0B+jH+hqU5EulFRCU62sqDSXfsx2g58ZnoFS6ZuDdAfZZBD+twPOtTnoyGSwvxSTfIZxV4NkWr6NYf4YfvTFsf6ZzqcYei4/AY11jEqew2RROILW5kwzDcAbHP+9pdnmGsXiDO8nPsUDC9qYIRUJtcgXSD9r9S9RmV7vuKfa3dX6CUad8At725L+OC5D6cr/fXwJ0qhACnHOEnCNJkkucDmeMIYoi/XB0IBrUHNTXxna7RfagpUjpPbUd5HaQOhKjXxvqZXJ0L0hnpIjsnv92T7Xde2B0Co7HI97f3//LqLZ7D38D9FIHbRqtRPsAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"[출처](https://dojang.io/mod/page/view.php?id=2405)\" title=\"[출처](https://dojang.io/mod/page/view.php?id=2405)\" src=\"/static/d9f152ab618ed2fef59de59b0903bad8/37523/image-20220913223721374.png\" srcset=\"/static/d9f152ab618ed2fef59de59b0903bad8/e9ff0/image-20220913223721374.png 180w,\n/static/d9f152ab618ed2fef59de59b0903bad8/f21e7/image-20220913223721374.png 360w,\n/static/d9f152ab618ed2fef59de59b0903bad8/37523/image-20220913223721374.png 720w,\n/static/d9f152ab618ed2fef59de59b0903bad8/3dde1/image-20220913223721374.png 1018w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<blockquote>\n<p><strong>참고 |</strong> <strong>시퀀스 객체와 반복 가능한 객체의 차이</strong></p>\n<p>‘Unit 11 시퀀스 자료형 활용하기’에서 리스트, 튜플, range, 문자열은 시퀀스 객체라고 했는데, 이 유닛에서는 반복 가능한 객체라고 했습니다. 시퀀스 객체와 반복 가능한 객체의 차이점은 무엇일까요?</p>\n<p>다음 그림과 같이 반복 가능한 객체는 시퀀스 객체를 포함합니다.</p>\n<p>리스트, 튜플, range, 문자열은 반복 가능한 객체이면서 시퀀스 객체입니다. 하지만, 딕셔너리와 세트는 반복 가능한 객체이지만 시퀀스 객체는 아닙니다. 왜냐하면 시퀀스 객체는 요소의 순서가 정해져 있고 연속적(sequence)으로 이어져 있어야 하는데, 딕셔너리와 세트는 요소(키)의 순서가 정해져 있지 않기 때문입니다. 따라서 시퀀스 객체가 반복 가능한 객체보다 좁은 개념입니다.</p>\n<p>즉, 요소의 순서가 정해져 있고 연속적으로 이어져 있으면 시퀀스 객체, 요소의 순서와는 상관없이 요소를 한 번에 하나씩 꺼낼 수 있으면 반복 가능한 객체입니다.</p>\n<p><a href=\"https://dojang.io/mod/page/view.php?id=2405\">참고</a></p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 예를 들어 다음과 같은 리스트를</span>\n<span class=\"token comment\"># [1, 2, 3, 4, 5]</span>\n<span class=\"token comment\"># &lt;1, 2, 3, 4, 5></span>\n<span class=\"token comment\"># 위의 형태로 출력해야한다면</span>\nnums <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>i <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'{}{}{}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">', '</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> nums<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h1 id=\"queue\" style=\"position:relative;\"><a href=\"#queue\" aria-label=\"queue permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queue</h1>\n<ul>\n<li>그냥 <code class=\"language-text\">list</code>를 활용하여 Queue, Stack을 사용할 수 있다.</li>\n</ul>\n<h2 id=\"list-활용\" style=\"position:relative;\"><a href=\"#list-%ED%99%9C%EC%9A%A9\" aria-label=\"list 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>list 활용</h2>\n<ul>\n<li><code class=\"language-text\">pop(index)</code>: index의 <strong><u>원소 리턴</u></strong> + 해당 <strong><u>원소 삭제</u></strong></li>\n<li>뒤가 아닌 앞에 데이터를 넣고 싶다면 (<u>deque</u>) <code class=\"language-text\">insert(index, x)</code>함수를 이용해서 앞에 데이터를 삽입할 수 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">queue <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\nqueue<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nqueue<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\nq<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 1</span></code></pre></div>\n<ul>\n<li>하지만 list는 random accesss에 최적화된 자료구조로 list를 이용해서 pop, insert를 할 경우 성능에 좋지 않다. 만약 앞에서 삭제하거나 삽입한다면 그 뒤 데이터를 모두 당기거나 뒤로 밀어야하므로 <code class=\"language-text\">O(N)</code>의 시간이 들 것이다.</li>\n</ul>\n<h2 id=\"code-classlanguage-textpopindexcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textpopindexcode\" aria-label=\"code classlanguage textpopindexcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">pop(index)</code>?</h2>\n<ul>\n<li>index가 없다면 맨 뒤에서 pop한다.</li>\n<li>그럼 index말고  value로 삭제하고 싶을 땐 어떻게 할까?</li>\n</ul>\n<h2 id=\"code-classlanguage-textremovevaluecode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textremovevaluecode\" aria-label=\"code classlanguage textremovevaluecode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">remove(value)</code></h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> li <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">3</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"collections-모듈의-deque\" style=\"position:relative;\"><a href=\"#collections-%EB%AA%A8%EB%93%88%EC%9D%98-deque\" aria-label=\"collections 모듈의 deque permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>collections 모듈의 deque</h2>\n<ul>\n<li><code class=\"language-text\">deque</code>를 이용하면 맨 앞 삽입, 삭제를  <code class=\"language-text\">O(1)</code>에 할 수 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> deque\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> deq <span class=\"token operator\">=</span> deque<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> deq<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> deq\ndeque<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> deq<span class=\"token punctuation\">.</span>popleft<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">1</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> deq\ndeque<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> deq<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">4</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> deq\ndeque<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> deq<span class=\"token punctuation\">.</span>appendleft<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> deq\ndeque<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"queue-모듈의-queue\" style=\"position:relative;\"><a href=\"#queue-%EB%AA%A8%EB%93%88%EC%9D%98-queue\" aria-label=\"queue 모듈의 queue permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>queue 모듈의 Queue</h2>\n<ul>\n<li>맨 앞 pop, 맨 뒤 삽입만 가능한 queue이다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> queue <span class=\"token keyword\">import</span> Queue\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que <span class=\"token operator\">=</span> Queue<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">1</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">2</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que<span class=\"token punctuation\">.</span>empty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token boolean\">False</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que<span class=\"token punctuation\">.</span>qsize<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">1</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">3</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que<span class=\"token punctuation\">.</span>qsize<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">0</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> que<span class=\"token punctuation\">.</span>empty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token boolean\">True</span></code></pre></div>\n<ul>\n<li>우선순위 큐는… 나중에 알아보도록 하자</li>\n</ul>\n<h1 id=\"stack\" style=\"position:relative;\"><a href=\"#stack\" aria-label=\"stack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Stack</h1>\n<ul>\n<li>Stack 자료구조가 따로 있진 않고 list를 이용한다.</li>\n<li>list 맨 뒤에서 삭제, 삽입하는 건 어차피 <code class=\"language-text\">O(1)</code>이니까 queue처럼 별도의 자료구조가 없는 것 같다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> stack<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> stack<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> stack<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> stack<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># top</span>\n<span class=\"token number\">3</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> stack\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> stack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token number\">3</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> stack\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h1 id=\"딕셔너리\" style=\"position:relative;\"><a href=\"#%EB%94%95%EC%85%94%EB%84%88%EB%A6%AC\" aria-label=\"딕셔너리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://wikidocs.net/16\">딕셔너리</a></h1>\n<ul>\n<li>key-value 자료구조이다.</li>\n<li>이 때 key가 int일 수도 있고 문자열일 수도 있고 리스트일 수도 있고 다른 객체일 수 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'b'</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> a\n<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'pey'</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> a\n<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pey'</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> a\n<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pey'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"code-classlanguage-textdelcode-삭제\" style=\"position:relative;\"><a href=\"#code-classlanguage-textdelcode-%EC%82%AD%EC%A0%9C\" aria-label=\"code classlanguage textdelcode 삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">del</code> 삭제</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">del</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> a\n<span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pey'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"list\" style=\"position:relative;\"><a href=\"#list\" aria-label=\"list permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>list</h3>\n<ul>\n<li>list 역시 <code class=\"language-text\">del</code>을 이용하여 삭제 가능하다.</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>종류</th>\n<th>내용</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>clear()</td>\n<td>모든 요소 삭제</td>\n</tr>\n<tr>\n<td>pop()</td>\n<td>지정한 위치 값을 삭제하고 리턴</td>\n</tr>\n<tr>\n<td>remove()</td>\n<td>지정한 위치 값과 같은 값은 (처음) 값 삭제</td>\n</tr>\n<tr>\n<td>del</td>\n<td>위치 또는 범위를 지정 삭제</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><a href=\"https://ponyozzang.tistory.com/587\">참고</a></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> li <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li\n<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">del</span> li<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 5번째 삭제</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li\n<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">del</span> li<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 처음 ~ 2번째 전까지, 즉 0, 1번째 요소 삭제</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">del</span> li<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 1번째 ~ 뒤에서 2번째 전까지, 즉 여기선 1번째 ~ 4번째</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">del</span> li<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 처음부터 끝까지 2의 간격으로 삭제 </span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> li\n<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"주의\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9D%98\" aria-label=\"주의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주의</h2>\n<ul>\n<li>key가 중복된다면 하나를 제외하고 모두 무시한다. 또한 <strong>key에 list는 쓸 수 없지만 튜플은 쓸 수 있다</strong>.</li>\n<li><strong><u>key에는 immutable한 값만 쓸 수 있기 때문이다.</u></strong></li>\n</ul>\n<h2 id=\"각종-함수\" style=\"position:relative;\"><a href=\"#%EA%B0%81%EC%A2%85-%ED%95%A8%EC%88%98\" aria-label=\"각종 함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각종 함수</h2>\n<ul>\n<li>\n<p>key가 있는 지 확인하기</p>\n<ul>\n<li>그냥 <code class=\"language-text\">in</code>을 활용하여 <code class=\"language-text\">key in dict</code>로 확인 가능하다.</li>\n</ul>\n</li>\n<li>\n<p>key, value 값들 얻기</p>\n<ul>\n<li>\n<p><code class=\"language-text\">dict.keys()</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">dict.values()</code></p>\n</li>\n<li>\n<p><code class=\"language-text\">dict.items()</code>: 각 key, value를 튜플로 묶은 값을 <code class=\"language-text\">dict_items</code> 객체로 리턴한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> a<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ndict_items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pey'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'phone'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'0119993323'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'birth'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1118'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>다 지우기</p>\n<p><code class=\"language-text\">clear()</code></p>\n</li>\n<li>\n<p>value 얻기</p>\n<p><code class=\"language-text\">dict.get(key)</code></p>\n<ul>\n<li>\n<p>이 때 <code class=\"language-text\">dict[key]</code>를 사용한다면 key가 없을 때 오류가 나지만, <code class=\"language-text\">dict.get(key)</code>를 이용하면 <code class=\"language-text\">None</code>이 리턴된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'pey'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'phone'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'0119993323'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'birth'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'1118'</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'nokey'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token boolean\">None</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token string\">'nokey'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  File <span class=\"token string\">\"&lt;stdin>\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span>\nKeyError<span class=\"token punctuation\">:</span> <span class=\"token string\">'nokey'</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%A6%AC%EC%8A%A4%ED%8A%B8-join-%EC%9B%90%ED%95%98%EB%8A%94-%ED%98%95%ED%83%9C%EB%A1%9C-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0\">리스트 <code class=\"language-text\">join</code>: 원하는 형태로 출력하기</a></p>\n</li>\n<li>\n<p><a href=\"#queue\">Queue</a></p>\n<ul>\n<li><a href=\"#list-%ED%99%9C%EC%9A%A9\">list 활용</a></li>\n<li><a href=\"#popindex\"><code class=\"language-text\">pop(index)</code>?</a></li>\n<li><a href=\"#removevalue\"><code class=\"language-text\">remove(value)</code></a></li>\n<li><a href=\"#collections-%EB%AA%A8%EB%93%88%EC%9D%98-deque\">collections 모듈의 deque</a></li>\n<li><a href=\"#queue-%EB%AA%A8%EB%93%88%EC%9D%98-queue\">queue 모듈의 Queue</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#stack\">Stack</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%94%95%EC%85%94%EB%84%88%EB%A6%AC\">딕셔너리</a></p>\n<ul>\n<li>\n<p><a href=\"#del-%EC%82%AD%EC%A0%9C\"><code class=\"language-text\">del</code> 삭제</a></p>\n<ul>\n<li><a href=\"#list\">list</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A3%BC%EC%9D%98\">주의</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B0%81%EC%A2%85-%ED%95%A8%EC%88%98\">각종 함수</a></p>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"September 13, 2022","title":"파이썬 문법 정리 | TIL ＃3","categories":"TIL Python","author":"goldggyul","emoji":"🍊","imageEmoji":null},"fields":{"slug":"/til-003/"}},"prev":{"id":"c8639ad2-17d5-5d8c-a1a4-a21a877caea6","html":"<h1 id=\"-데드락deadlock--교착-상태\" style=\"position:relative;\"><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BDdeadlock--%EA%B5%90%EC%B0%A9-%EC%83%81%ED%83%9C\" aria-label=\" 데드락deadlock  교착 상태 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📓 데드락(deadlock) | 교착 상태</h1>\n<p>시스템 내의 임계 구역(critical section)이 존재할 경우, 프로세스 간 상호 배제(mutual exclusion)를 보장해야 합니다. 이를 보장하기 위해 잠금(lock)을 사용하다보면 작업이 더 이상 진행되지 않는 교착상태(deadlock)에 빠지는 경우가 있습니다. 이 때 이 데드락은 무엇이고, 왜 발생하고, 어떻게 해결할까요?</p>\n<h2 id=\"-데드락이란\" style=\"position:relative;\"><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4%EB%9E%80\" aria-label=\" 데드락이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 데드락이란?</h2>\n<ul>\n<li>\n<p>두 개 이상의 프로세스가 <u><strong>다른 프로세스의 작업이 끝나기만 기다리며 작업을 더 이상 진행하지 못하는 상태</strong></u>입니다.</p>\n<ul>\n<li>\n<p>이 때, ‘더 이상 진행하지 못하는 상태’라는 이유로 <code class=\"language-text\">아사 현상(starvation)</code>과 헷갈리기 쉬우므로 주의해야합니다</p>\n<blockquote>\n<h3 id=\"starvation\" style=\"position:relative;\"><a href=\"#starvation\" aria-label=\"starvation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>starvation</h3>\n<p>작업을 해야 하는 프로세스가 <u><strong>프로세서(CPU)를 할당받지 못해 Ready 상태에서 더 이상 진행하지 못하는 상태</strong></u>입니다. 스케줄링에 대해 공부하다가 나오는 개념입니다.</p>\n<p>starvation은 운영체제가 잘못된 정책을 사용하여 특정 프로세스의 작업이 지연되는 문제고, deadlock은 여러 프로세스가 작업을 진행하다 보니 자연적으로 일어나는 문제입니다.</p>\n<p>또한 starvation은 프로세서를 할당받아야 running 상태로 진행될 수 있지만, deadlock은 필요한 공유 자원(자원, 변수 등)을 얻어야 ready 상태가 되어 프로세서를 할당받게 될 수 있는 것입니다.</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-데드락이-발생하는-경우\" style=\"position:relative;\"><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\" aria-label=\" 데드락이 발생하는 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 데드락이 발생하는 경우</h2>\n<ul>\n<li>프로세스가 어떨 때 다른 프로세스의 작업이 끝나기를 기다리면서 데드락이 발생할까요?</li>\n</ul>\n<h3 id=\"1-시스템-자원을-사용하는-경우\" style=\"position:relative;\"><a href=\"#1-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%9E%90%EC%9B%90%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\" aria-label=\"1 시스템 자원을 사용하는 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 시스템 자원을 사용하는 경우</h3>\n<ul>\n<li>프로세스가 다른 프로세스와 공유할 수 없는 자원을 사용할 때 데드락이 일어날 수 있습니다.</li>\n<li>예) 시스템 자원으로 <strong><u>동시에 사용될 수 없는</u></strong> 프린터, CD 레코더가 있다고 해봅시다. 이 때 프로세스 P1이 프린터를 할당받았고, 프로세스 P2가 CD 레코더를 할당받았습니다. 근데 P1이 CD 레코더를 기다리고, P2가 프린터를 기다린다면 어떨까요? 더 이상 진행되지 않고 데드락이 발생할 것입니다.</li>\n</ul>\n<h3 id=\"2-공유-변수\" style=\"position:relative;\"><a href=\"#2-%EA%B3%B5%EC%9C%A0-%EB%B3%80%EC%88%98\" aria-label=\"2 공유 변수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 공유 변수</h3>\n<ul>\n<li>\n<p>한 공유 변수를 할당받은 상태에서 다른 공유 변수를 기다릴 때 교착 상태가 발생할 수 있습니다.</p>\n</li>\n<li>\n<p>critical section에 진입하려 하는 두 프로세스가 있고, 공유 데이터에 의해 race condition을 방지하기 위해 lock이 사용됐다고 생각해봅시다. 이 때 P1이 lock1을 얻고, P2이 lock2를 얻었습니다. 근데 P1이 lock2를 얻으려고 대기하고, P2가 lock1을 얻으려고 대기합니다. 그럼 둘 모두 critical section에 들어가지 못하고 계속 기다리게 되어 데드락이 발생하게 됩니다.</p>\n</li>\n</ul>\n<h3 id=\"3-응용-프로그램\" style=\"position:relative;\"><a href=\"#3-%EC%9D%91%EC%9A%A9-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8\" aria-label=\"3 응용 프로그램 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 응용 프로그램</h3>\n<ul>\n<li>데이터베이스 같은 응용 프로그램에서도 교착 상태가 발생합니다. 여러 프로세스가 데이터베이스를 접근하므로 데이터베이스 역시 데이터 일관성을 위해서 락을 사용합니다. 이 때 역시 데드락이 발생할 수 있습니다.</li>\n</ul>\n<h3 id=\"식사하는-철학자-문제-dining-philosophers\" style=\"position:relative;\"><a href=\"#%EC%8B%9D%EC%82%AC%ED%95%98%EB%8A%94-%EC%B2%A0%ED%95%99%EC%9E%90-%EB%AC%B8%EC%A0%9C-dining-philosophers\" aria-label=\"식사하는 철학자 문제 dining philosophers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>식사하는 철학자 문제 (Dining Philosophers)</h3>\n<ul>\n<li>\n<p>데드락을 설명하기 위한 유명한 문제입니다.</p>\n<p><img src=\"https://mblogthumb-phinf.pstatic.net/MjAyMDAxMjhfMTE3/MDAxNTgwMjAwOTQ0NDQ0.cbqy0jYGUZvqVhyLv8orp5Aw_wvsc5aBtmBh21RLz40g.UVd5QHW3QlMfBZ7-MFfUhnYyjAHpCO6vXPu0mVmXhfgg.PNG.hirit808/philtable.png?type=w800\" alt=\"img\"></p>\n</li>\n<li>\n<p>위 그림처럼 5명의 철학자가 둥그런 식탁에 둘러앉아서 식사를 합니다. 이 때 식사하기 위해 <u>젓가락을 집어야 하는데, 반드시 왼쪽에 있는 젓가락을 집은 뒤에 오른쪽에 있는 젓가락을 집어야 합니다.</u></p>\n</li>\n<li>\n<p>자 그럼 모두 왼쪽 젓가락을 집었습니다. 이제 그 다음 오른쪽에 있는 젓가락을 집어봅시다. 그런데 집을 수 있을까요? 이미 오른쪽에 있는 젓가락은, 오른쪽 철학자의 왼손에 있는 상태일 것입니다. 그럼 모두 밥을 먹지 못하고 굶게 될 것입니다.</p>\n</li>\n<li>\n<p>위 상황을 자원 할당 그래프로 나타내면 아래와 같습니다. (자원 할당 그래프 <code class=\"language-text\">resource allocation graph</code>에서는 프로세스는 원으로 자원은 사각형으로 표현합니다.)</p>\n<p><img src=\"https://www.cs.cornell.edu/courses/cs4410/2015su/lectures/lec10-deadlock.svg\" alt=\"dining philosophers deadlock\"></p>\n<ul>\n<li>왼쪽에 있는 젓가락은 각 철학자들에게 할당되어 있지만(Chopstick -> Philosopher로 향하는 선), 모든 철학자가 다른 철학자에게 할당된 젓가락을 기다리고 있는 걸 볼 수 있습니다.</li>\n</ul>\n</li>\n<li>\n<p>철학자 문제를 통해 데드락이 발생하는 조건을 살펴볼 수 있습니다.</p>\n<ol>\n<li>철학자들은 젓가락을 공유할 수 없다. ➡️ 같이 쓸 수 없으므로 자원이 남지 않아 데드락 발생</li>\n<li>철학자는 다른 철학자의 젓가락을 뺏을 수 없다. ➡️ 뺏을 수 없으므로 자원을 놓을 때까지 기다려야 해서 데드락 발생</li>\n<li>모든 철학자는 왼쪽 젓가락을 먼저 집고 오른쪽 젓가락을 기다린다. ➡️ 이미 하나를 집은(점유한) 상태에서 다른 자원을 기다리므로 데드락 발생</li>\n<li>자원 할당 그래프가 원을 이루고 있다. ➡️ 서로 선후관계가 없고 원형으로 자원을 기다리고 있으므로 데드락 발생</li>\n</ol>\n</li>\n</ul>\n<blockquote>\n<span style=\"font-size:110%\">\n<p>🙋 식사하는 철학자 문제를 어떻게 해결할 수 있을까요?</p>\n</span>\n<p>👮 여러 방법이 있습니다.</p>\n<ol>\n<li>\n<p>모두가 왼쪽을 집고 오른쪽을 집는 게 아닌, 홀수 번호 철학자들은 왼쪽 젓가락 먼저, 짝수 번호 철학자들은 오른쪽 젓가락을 듭니다.</p>\n</li>\n<li>\n<p>철학자 수에 제한을 둬서, 최대 N명이 앉을 수 있다면 최대 N-1명 까지만 앉을 수 있게 합니다. 혹은 젓가락 개수를 늘립니다.</p>\n</li>\n<li>\n<p>모든 철학자는 양쪽 젓가락이 비선점된 상태일 때만 두 젓가락을 점유합니다.</p>\n</li>\n<li>\n<p>힘이 센 철학자가 잇어서 다른 철학자의 젓가락을 뺏을 수 있습니다.</p>\n</li>\n</ol>\n</blockquote>\n<h2 id=\"--데드락-발생-u필요u조건-4가지\" style=\"position:relative;\"><a href=\"#--%EB%8D%B0%EB%93%9C%EB%9D%BD-%EB%B0%9C%EC%83%9D-u%ED%95%84%EC%9A%94u%EC%A1%B0%EA%B1%B4-4%EA%B0%80%EC%A7%80\" aria-label=\"  데드락 발생 u필요u조건 4가지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌  데드락 발생 <u><strong>필요</strong></u>조건 4가지</h2>\n<ul>\n<li>위 식사하는 철학자 문제에서 본 조건과 똑같은 조건이 충족되어야 데드락이 발생됩니다.</li>\n<li>다만 필요조건이라 하는 이유는, <u><strong>모든 조건이 충족되어야 데드락이 발생</strong></u>하기 때문입니다.</li>\n</ul>\n<h3 id=\"1-상호-배제-code-classlanguage-textmutual-exclusioncode\" style=\"position:relative;\"><a href=\"#1-%EC%83%81%ED%98%B8-%EB%B0%B0%EC%A0%9C-code-classlanguage-textmutual-exclusioncode\" aria-label=\"1 상호 배제 code classlanguage textmutual exclusioncode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 상호 배제 <code class=\"language-text\">Mutual exclusion</code></h3>\n<ul>\n<li>Race Condition을 없애고, Critical section을 보호해서 한번에 한 프로세스만 자원을 사용하도록 락을 사용하는 것 같은 방법을 사용하는데, 이로 인해 데드락 발생합니다.</li>\n</ul>\n<h3 id=\"2-비선점-code-classlanguage-textno-preemptioncode\" style=\"position:relative;\"><a href=\"#2-%EB%B9%84%EC%84%A0%EC%A0%90-code-classlanguage-textno-preemptioncode\" aria-label=\"2 비선점 code classlanguage textno preemptioncode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 비선점 <code class=\"language-text\">No preemption</code></h3>\n<ul>\n<li>한 프로세스가 사용 중인 자원은 중간에 다른 프로세스가 빼앗을 수 없는 비선점 자원이여야 합니다.</li>\n</ul>\n<h3 id=\"3-점유와-대기-code-classlanguage-texthold-and-waitcode\" style=\"position:relative;\"><a href=\"#3-%EC%A0%90%EC%9C%A0%EC%99%80-%EB%8C%80%EA%B8%B0-code-classlanguage-texthold-and-waitcode\" aria-label=\"3 점유와 대기 code classlanguage texthold and waitcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 점유와 대기 <code class=\"language-text\">Hold-and-wait</code></h3>\n<ul>\n<li>프로세스가 <u>어떤 자원을 할당받은 상태</u>에서 다른 자원을 기다리는 상태여야 합니다. 작업을 진행하는 쪽과 기다리는 쪽의 선후 관계가 없이 서로 진행을 방해하게 됩니다.</li>\n</ul>\n<h3 id=\"4-원형-대기-code-classlanguage-textcircular-waitcode\" style=\"position:relative;\"><a href=\"#4-%EC%9B%90%ED%98%95-%EB%8C%80%EA%B8%B0-code-classlanguage-textcircular-waitcode\" aria-label=\"4 원형 대기 code classlanguage textcircular waitcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 원형 대기 <code class=\"language-text\">Circular wait</code></h3>\n<ul>\n<li>점유와 대기를 하는 프로세스 간의 관계가 원을 이루어야 합니다. (자원 할당 그래프가 원)</li>\n</ul>\n<hr>\n<p>위 조건 중 1,2번 상호 배제와 비선점은 <u><strong>자원의 특징</strong></u>을 나타냅니다. 한 자원에 동시에 한 프로세스만 이용할 수 있고, 뺏을 수 없는 자원인 것입니다. <u><strong>critical section을 보호하기 위해 lock을 사용하면 상호 배제와 비선점 조건이 보장</strong></u>되므로 주의하지 않으면 데드락이 발생할 수 있습니다.</p>\n<p>3, 4번 점유와 대기, 원형 대기는 <u><strong>프로세스의 행위</strong></u>입니다. 프로세스가 자원을 점유 대기하는 상태에서 또 서로 원형으로 기다리는 것입니다.</p>\n<blockquote>\n<span style=\"font-size:110%\">\n<p>👮 위 필요조건 측면에서 식사하는 철학자 문제를 한번 살펴볼까요?</p>\n</span>\n<ol>\n<li>상호 배제\n<ul>\n<li>젓가락은 한번에 한 철학자만 사용</li>\n</ul>\n</li>\n<li>비선점\n<ul>\n<li>젓가락을 뺏을 수 없음</li>\n</ul>\n</li>\n<li>점유와 대기\n<ul>\n<li>한 철학자가 왼쪽 젓가락을 집은 상태에서 반대쪽 젓가락을 기다립니다.</li>\n</ul>\n</li>\n<li>원형 대기\n<ul>\n<li>둥그런 식탁에 앉아 식사를 하므로 선후 관계가 없어서 서로 진행을 방해합니다.</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n<h1 id=\"-데드락-해결-방법\" style=\"position:relative;\"><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\" aria-label=\" 데드락 해결 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📓 데드락 해결 방법</h1>\n<p>데드락을 해결하려면 어떻게 해야 할까요? 애초에 <u><strong>예방</strong></u>해서 안일어나게 할 수도 있고, 데드락이 발생할 것 같으면 <u><strong>회피</strong></u>하거나, 데드락이 일어나면 이를 <u><strong>검출하여 회복</strong></u>할 수도 있습니다. 각 방법에 대해서 알아봅시다.</p>\n<h2 id=\"-예방하기-prevention\" style=\"position:relative;\"><a href=\"#-%EC%98%88%EB%B0%A9%ED%95%98%EA%B8%B0-prevention\" aria-label=\" 예방하기 prevention permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 예방하기 (Prevention)</h2>\n<ul>\n<li>위에서 데드락 필요조건 4가지를 살펴봤습니다. 그럼 4가지 중 하나라도 발생하지 않으면 교착 상태가 일어나지 않겠죠?</li>\n<li>하지만 이 방법은 <u>실효성이 적어서 잘 사용되지는 않습니다.</u>\n<ul>\n<li>상호 배제, 비선점을 예방하려면 자원을 보호할 수 없고, 점유와 대기, 원형 대기를 막기 위해선 프로세스 작업 방식을 제한하고 자원을 낭비하게 되므로 사용하기 어렵습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-상호-배제-예방\" style=\"position:relative;\"><a href=\"#1-%EC%83%81%ED%98%B8-%EB%B0%B0%EC%A0%9C-%EC%98%88%EB%B0%A9\" aria-label=\"1 상호 배제 예방 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 상호 배제 예방</h3>\n<ul>\n<li>\n<p>자원이 한번에 한 프로세스만 독점적으로 사용할 수 있기 때문에 발생하는 것입니다. 그렇다면 모든 자원을 공유할 수 있다면 데드락이 발생하지 않을 것입니다.</p>\n<ul>\n<li>하지만 현실적으로 이건 불가능합니다… 분명 공유가 불가능한 자원이 있습니다. 식사하는 철학자 문제에서 젓가락을 같이 사용해서 밥을 먹는 것이 가능할까요? 또한 critical section을 보호하지 못하면 race condition이 발생할 것입니다.</li>\n</ul>\n</li>\n<li>\n<p>혹은  lock을 사용하지 않고, <code class=\"language-text\">Lock-free Programming</code>을 합니다.</p>\n<ul>\n<li>\n<p>일반화된 lock free 알고리즘을 만드는 건 어려우므로 lock free 자료구조를 대신 구현해서 사용한다고 합니다.</p>\n</li>\n<li>\n<p>lock-free 링크드리스트를 만들어봅시다.  공유되는 링크드리스트에 맨 앞에 새 노드를 삽입할 때를 봐봅시다. 그럼 링크드리스트의 헤드에 새 노드를 이을 때 race condition이 발생할 수 있으므로 원래라면 lock을 사용해야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">node_t</span> <span class=\"token operator\">*</span>n <span class=\"token operator\">=</span> <span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">node_t</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tn<span class=\"token operator\">-></span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">pthread_mutex_lock</span><span class=\"token punctuation\">(</span>listlock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// begin critical section</span>\n\tn<span class=\"token operator\">-></span>next <span class=\"token operator\">=</span> head<span class=\"token punctuation\">;</span>\n\thead <span class=\"token operator\">=</span> n<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">pthread_mutex_unlock</span><span class=\"token punctuation\">(</span>listlock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// end critical section</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>하지만 lock을 사용하므로 lock을 사용하지 않게 다른 방식을 사용해봅시다. 하지만 이 방법은 <u><strong>하드웨어의 지원이 필요</strong></u>합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">node_t</span> <span class=\"token operator\">*</span>n <span class=\"token operator\">=</span> <span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">node_t</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tn<span class=\"token operator\">-></span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">do</span> <span class=\"token punctuation\">{</span>\n\t\tn<span class=\"token operator\">-></span>next <span class=\"token operator\">=</span> head<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">CompareAndSwap</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>head<span class=\"token punctuation\">,</span> n<span class=\"token operator\">-></span>next<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>CompareAndSwap함수를 하드웨어가 함수가 Atomic하도록 지원해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">CompareAndSwap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>address<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> expected<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> new<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>address <span class=\"token operator\">==</span> expected<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token operator\">*</span>address <span class=\"token operator\">=</span> new<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// success</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// failure</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>단점은 계속해서 while을 돌면서 확인해야 해서(busy waiting), 자원이 낭비되고 thread가 많을 수록 효율성이 떨어진다는 점이다.</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-비선점-예방\" style=\"position:relative;\"><a href=\"#2-%EB%B9%84%EC%84%A0%EC%A0%90-%EC%98%88%EB%B0%A9\" aria-label=\"2 비선점 예방 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 비선점 예방</h3>\n<ul>\n<li>\n<p><u><strong>모든 자원을 뺏을 수 있게 만들면 됩니다.</strong></u> 식사하는 철학자 문제에서 옆사람의 젓가락을 빼앗을 수 있다면 데드락이 발생하지 않습니다.</p>\n<p>하지만 critical section 보호를 위해 lock을 사용하면 자원을 뺏을 수가 없습니다. 또한 자원을 뺏을 수 있게 하더라도 어떤 기준으로 뺏고, 뺏은 다음 얼마나 사용할지도 정해야합니다. 또 프로세스의 우선순위에 따라서 자원을 뺏게 한다면, 우선순위가 낮은 프로세스는 <code class=\"language-text\">starvation</code>현상에 빠질 것입니다.</p>\n<ul>\n<li>starvation은 <code class=\"language-text\">에이징</code>을 통해, 몇 번 자원을 양보하면 그 뒤에 무조건 자원을 사용할 수 있도록 하면 해결할 수 있지만, 이렇게 하면 또 빼앗을 수 없게 되므로 다시 문제가 생깁니다…</li>\n</ul>\n</li>\n<li>\n<p>혹은 빼앗는 것이 아닌 <u><strong>스스로 갖고 있던 자원을 포기</strong></u>하게 할 수 있습니다. 예를 들어 두가지 lock을 필요로 한다면, L1을 얻은 후에, L2를 얻어야 합니다. 이 때 L1을 얻고 L2를 얻으려다가 실패하면, <u><strong>L1까지 포기하고 다시 처음부터</strong></u> 시도하는 것입니다.</p>\n</li>\n</ul>\n<h3 id=\"3-점유와-대기-예방\" style=\"position:relative;\"><a href=\"#3-%EC%A0%90%EC%9C%A0%EC%99%80-%EB%8C%80%EA%B8%B0-%EC%98%88%EB%B0%A9\" aria-label=\"3 점유와 대기 예방 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 점유와 대기 예방</h3>\n<ul>\n<li>프로세스가 특정 자원을 점유하고 다른 자원을 기다리느라 점유와 대기를 하게 됩니다.</li>\n<li>그렇다면 <u><strong>반드시 전부 할당하거나, 그게 안되면 아예 할당하지 않는 방식</strong></u>을 이용하면 됩니다. 예를 들어 자원에 대한 여러 lock을 하나의 lock으로 관리하는 방식으로 구현할 수 있습니다.</li>\n<li>위에 1,2번은 자원에 대한 제약을 풀어버리는 것으로 현실적으로 어렵지만, 이 방식은 프로세스의 방식을 변화시켜 데드락을 처리하므로 좀 더 의미가 있습니다.\n<ul>\n<li>하지만 그럼에도 단점이 있습니다.\n<ol>\n<li>프로세스가 자신이 필요한 ‘모든 자원’을 알기 어렵다. 만약 자원을 모두 확보했는데 또 필요한 다른 자원이 생긴다면?</li>\n<li>자원의 활용성이 떨어진다. <u><strong>앞으로 사용할</strong></u> 자원까지 모두 확보해버리므로 그 자원을 필요하는 다른 프로세스는 오래 기다려야 합니다. 당장 사용하지 않을 자원을 선점하므로 자원 낭비가 심합니다.</li>\n<li>많은 자원을 사용하는 프로세스는 모두 확보할 때까지 기다려야합니다. 따라서 적은 자원을 사용하는 프로세스보다 불리해서, 계속 작업이 지연되는 starvation 현상이 발생합니다.</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"4-원형-대기-예방\" style=\"position:relative;\"><a href=\"#4-%EC%9B%90%ED%98%95-%EB%8C%80%EA%B8%B0-%EC%98%88%EB%B0%A9\" aria-label=\"4 원형 대기 예방 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 원형 대기 예방</h3>\n<ul>\n<li>자원을 한 방향으로만 사용하도록 하면 원형 대기를 예방할 수 있습니다.</li>\n<li>모든 자원에 숫자를 부여하고, 숫자가 작은 쪽에서 큰 쪽으로만 자원을 할당하도록 해봅시다. 그렇다면 반드시 자원을 순서대로 할당받아야 하므로 원형 대기가 발생하지 않습니다.\n<ul>\n<li>예를 들어 L1, L2가 있을 때, 한 프로세스는 L1을 할당받고 L2를 기다리고, 한 프로세스는 L2를 할당받고 L1를 기다리는 일이 생기지 않을 것입니다.</li>\n</ul>\n</li>\n<li>단점\n<ul>\n<li>번호를 어떻게 부여할 것인지가 문제입니다. 효율적으로 부여해야합니다.</li>\n<li>반드시 순서대로 할당받아야 하므로 유연성이 떨어집니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"--회피하기-avoidance\" style=\"position:relative;\"><a href=\"#--%ED%9A%8C%ED%94%BC%ED%95%98%EA%B8%B0-avoidance\" aria-label=\"  회피하기 avoidance permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌  회피하기 (Avoidance)</h2>\n<ul>\n<li>\n<p>슬슬 데드락이 일어날 것 같다하는 상태를 파악하고, 그 이하로 자원을 나누어주는 방식입니다.</p>\n</li>\n<li>\n<p>즉, 데드락이 발생하지 않는 범위 내에서만 자원을 할당하고, 데드락이 발생하는 범위에 있으면 프로세스를 대기시키는 방식입니다.</p>\n</li>\n<li>\n<p>시스템 내에 여러 자원이 있는데, 1개의 자원을 할당할 때보다 많은 자원을 할당할 수록 데드락이 발생할 확률이 커지므로 자원의 총수, 현재 할당된 자원의 수를 기준으로 상태를 파악해서 안정 상태를 유지할 수 있는 범위 내에서 자원을 할당하는 것입니다.</p>\n<blockquote>\n<h3 id=\"은행원-알고리즘\" style=\"position:relative;\"><a href=\"#%EC%9D%80%ED%96%89%EC%9B%90-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\" aria-label=\"은행원 알고리즘 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>은행원 알고리즘</h3>\n<p>이 특성을 이용한 여러 알고리즘 중 다익스트라가 제안한 은행원 알고리즘이 있습니다.</p>\n<p>은행원이 대출을 하는 방식을 생각해보면, 대출 금액이 대출 가능한 범위 내이면 대출을 해주고 그렇지 않으면 거부합니다. 이 방법과 유사하게, 미리 결정된 자원들의 최대 할당량을 가지고 시뮬레이션해서 안정 상태에 들 수 있는지를 검사하는 것입니다.</p>\n<p>예를 들어 레스토랑에서 예약받는 경우를 생각해봅시다. 레스토랑에 식재료가 우동 10인분, 스파게티 20인분을 만들 수 있는 분량이 있습니다. 그럼 레스토랑은 예약을 받을 때 30명을 받는 것이 아닌 10명을 기준으로 받습니다. 모두 우동을 시킬 수도 있기 때문입니다. 물론 그러지 않을 수도 있지만, 은행원 알고리즘은 최악의 경우를 기준으로 판단해서 데드락을 막습니다.</p>\n<p>그렇다면 프로세스에서는 어떻게 적용할까요? <code class=\"language-text\">현재 실행 중인 프로세스 가운데 하나라도 끝낼 수 있을 때 가용 자원을 할당하는 것</code>이 핵심입니다.</p>\n<p>각 프로세스는 자신이 사용할 자원 최대 수를 운영체제에게 알려줍니다. 각 자원에 할당된 할당 자원 수가 있을 것입니다. 그렇다면 (자원 최대 수)-(할당 자원 수) = (기대 자원 수)가 됩니다. 또한 운영체제가 (전체 자원 수)-(전체 할당된 자원 수)=(가용 자원 수)를 알 수 있습니다.</p>\n<p>따라서 운영체제는 다음과 같은 방식으로 자원을 할당할 수 있습니다.</p>\n<ul>\n<li>\n<p>각 프로세스의 기대 자원과 비교해서 가용 자원이 한 프로세스의 기대자원과 하나라도 크거나 같으면 할당합니다.</p>\n<p>즉, <u><strong>안정 상태</strong></u>라면 할당한다는 뜻입니다.</p>\n<blockquote>\n<p>안정 상태? 각 프로세스의 기대 자원과 비교하여 가용 자원이 크거나 같은 경우가 하나라도 있는 경우</p>\n<p>왜 안정 상태라고 하냐면, <u><strong>그 자원을 이용해서 작업을 끝낼 수 있는 프로세스가 하나라도 있기 때문에</strong></u> 안정 상태라고 합니다.</p>\n</blockquote>\n<p>안정 상태라면, 해당 자원을 할당받은 프로세스는 작업을 끝낼 수 있기 때문에 작업이 끝나고 사용하던 자원을 반납하고, 반납된 자원을 다른 프로세스가 쓰면서 전체 작업이 완료될 수 있습니다.</p>\n</li>\n<li>\n<p>가용 자원이 어떤 기대 자원보다 크지 않으면 할당하지 않습니다.</p>\n<p>이 때는 불안정 상태입니다. 현재 자원을 이용해서 작업을 마칠 수 있는 프로세스가 없기 때문입니다.</p>\n</li>\n</ul>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 64.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACK0lEQVQozyWR227bQAxE9f/vBQqkRZo4ju1YkrXSXkgu966V7Di9/VFrBziYtyGHw+bXJfz9WW58lD/X8vs9/7zk6zle1/C++Ev159mdZ16LXTIvmde7ftJ8nMNa/VL9TWdXizvPfi2uFk4Bo4dPkoPkMTrwVkcPJeKcbPO++rnwZQnXNX6scc4M1miYSA1rcdGDhlGoQZmxHbp26CwqoyYpBZipuSyuJLsWrvlGDGhIGhjJiOgBcBpk34r2OLTftk8/9tvAxqFmMoS6uVQXA5ZEOdla+DK7S2XLOnjIAYIzhBPhhDARSiIJIBEkoQKQNzNZNWhxUoKszpFKxJMcRjV41s6qTrS7br9tD6ex9axOon/tDlKN1upmnW3Jdq0uJ/q4N3xd/BwhsqqJSsCayOHoaUreBNaepJp6Zk0om2W2tdic0LK+XX4nsHIkk4fAOrA2erBGeNbJGSa5a/fBg2Pd1Iw5oveGWK0z12yXYgMrxikHdKzZKiV70MJZlVgDjF9fnshq70wzZywZfTCG5H2tXQp7K43qcyTvjHdGq5OSvbOKSVqcBnFk1pZUMydICVOkECAlqjXMs8uFU6IYyXl0DqxV2gxaC21GbYTSg4HRmKnJXreHl+F00Krv+93Dw5eXzffj2+btsNluvh/2z8/PD9uXR8BJmeE24uYfAUYE2SQnD9vHvt0CCim7/e6p73ajeJvE8dTtxfB2PGza7pWsQpw+gfvP/8f+B4kyNU6YePNAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"image-20220928185041419\" title=\"image-20220928185041419\" src=\"/static/5183b36d82924d248a13b705404d9a60/37523/image-20220928185041419.png\" srcset=\"/static/5183b36d82924d248a13b705404d9a60/e9ff0/image-20220928185041419.png 180w,\n/static/5183b36d82924d248a13b705404d9a60/f21e7/image-20220928185041419.png 360w,\n/static/5183b36d82924d248a13b705404d9a60/37523/image-20220928185041419.png 720w,\n/static/5183b36d82924d248a13b705404d9a60/302a4/image-20220928185041419.png 1080w,\n/static/5183b36d82924d248a13b705404d9a60/07a9c/image-20220928185041419.png 1440w,\n/static/5183b36d82924d248a13b705404d9a60/2d912/image-20220928185041419.png 1772w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.55555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9UlEQVQoz0WQyW7bQBBE+f+nXJLYkixSJMVl1p7pnn1IWUo+LGAcIMC7FupVNb8/w17dVvBRaSu4FdwLlWRzNClA9JA95GCS/8Jmb2OwJWFN2Lx2nxM8Kj0q7YVqxpRsChCcztFEBw6lQ+VRoxUOlUPtCII3OWHz3N1e8LX71+5/7b5kK63SmnkrHoUsijub7mzql/Fn30Z/uMRgvDcx2Oa5uZzMlg/bz+oe1dVMW6YtYY22BLBWIEpEydX6pZOjdaT/h6UVwnCL8rX5vRAH6RzUQ1tPbBr5fRZz8qCBD+ukgQfSJZjmsxI5ZUhyYDGYdAB0VAlCqfWq9LqykcvFGA7AOZ+1ZtZIsrJ5FDw2BGNIPnf/2Nxz9znoerxtiKS1QsmZUBJKR2qYBwM8oPaoj7CxXFuxqtV5cE6FAErNxnBtuAYm5DLNNyFmIRch2bfTez8NoAVZ1ezZguEK+CwWJGlRWBSC34WYlF6lWhifhrFlbGZsYWzpbt2yTEoxT7rZkiGn/V/zXChXSgmdBx+AnLakwHChVvaveZXqQMiVUDU1Qt+f13WQal6Wvu1O83JjfBzH6/X61nXny8fbtT19ZYzhBgTA8dzRXIK6te/D8CHENN3brj1N95atfX87XS4/+tv5cv7edSci5UgGUslBdJpQlWj/AJoe79GV0/XDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"image-20220928185119676\" title=\"image-20220928185119676\" src=\"/static/37c623701545b167801c836131dc19a8/37523/image-20220928185119676.png\" srcset=\"/static/37c623701545b167801c836131dc19a8/e9ff0/image-20220928185119676.png 180w,\n/static/37c623701545b167801c836131dc19a8/f21e7/image-20220928185119676.png 360w,\n/static/37c623701545b167801c836131dc19a8/37523/image-20220928185119676.png 720w,\n/static/37c623701545b167801c836131dc19a8/302a4/image-20220928185119676.png 1080w,\n/static/37c623701545b167801c836131dc19a8/07a9c/image-20220928185119676.png 1440w,\n/static/37c623701545b167801c836131dc19a8/565cc/image-20220928185119676.png 1806w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"문제점\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\"문제점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제점</h3>\n<ul>\n<li>하지만 프로세스가 자신이 사용할 자원을 모두 미리 선언해야하고, 굉장히 정확해야 합니다.</li>\n<li>또한 시스템 전체 자원수가 고정이여야 합니다.</li>\n<li>자원이 낭비됩니다. 예를 들어, 레스토랑에서 우동만 시킬까봐 걱정돼서 예약을 적게 받으면 스파게티 재료가 낭비됩니다.</li>\n</ul>\n<h2 id=\"-검출-및-회복하기\" style=\"position:relative;\"><a href=\"#-%EA%B2%80%EC%B6%9C-%EB%B0%8F-%ED%9A%8C%EB%B3%B5%ED%95%98%EA%B8%B0\" aria-label=\" 검출 및 회복하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌 검출 및 회복하기</h2>\n<ul>\n<li>위에서 본 예방 방법은 실제로 구현하기 어렵고, 회피는 구현하더라도 자원이 낭비되고, 또 모두 어떤 자원을 사용하는 지 미리 알고 정해져있어야해서 어렵습니다.</li>\n<li>따라서 <u><strong>가장 현실적인 것은 검출하는 것</strong></u>입니다. 운영체제가 프로세스의 작업을 관찰하면서 데드락이 발생했는 지를 계속 주시하는 것입니다. 그리고 데드락이 검출되면 회복을 합니다.\n<ul>\n<li>OS에서 데드락은 굉장히 드물기 때문에, OS가 한번 멈춰버린다면, 그냥 리부팅하고 행복하게 다시 쓰게 할 수도 있겠죠? * ^^ * 이렇게 데드락이 드물 때는 그냥 솔루션을 따로 안두는 것이 더 효율적일 것입니다.</li>\n<li>하지만 DB의 경우 대부분 데드락을 검출하고 회복합니다. 주기적으로 deadlock detector가 실행되고, 자원 할당 그래프를 유지하면서 확인합니다. -> DB concerruncy, deadlock, 등등은 나중에 db를 다룰 때 더 자세히..</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"검출\" style=\"position:relative;\"><a href=\"#%EA%B2%80%EC%B6%9C\" aria-label=\"검출 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검출</h3>\n<ul>\n<li>\n<p>타임아웃 이용하기 (가벼운 데드락 검출)</p>\n<ul>\n<li>\n<p>일정 시간 동안 작업이 진행되지 않은 프로세스는 데드락이 발생한 것으로 간주하여 처리하는 방법입니다.</p>\n</li>\n<li>\n<p>문제점</p>\n<ul>\n<li>타임아웃이 지난 다음에 작업이 진행되지 않았다고 무조건 데드락은 아닙니다. 다른 문제가 있었던 것일 수도 있습니다. 따라서 엉뚱한 프로세스가 강제 종료될 수가 있습니다.</li>\n<li>모든 시스템에 적용 불가\n<ul>\n<li>전체 시스템을 한 번에 감시할 수가 없는 분산 데이터베이스 같은 경우에, 다른 곳에 있는 프로세스가 응답이 없는 것이 데드락 때문인지, 네트워크 때문인지를 알 수 없습니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>이러한 문제에도 불구하고, 자원 할당 그래프를 유지하면서 감시하는 것은 구현하기가 힘드므로 타임아웃이 더 선호됩니다.</p>\n</li>\n<li>\n<p>예시</p>\n<ul>\n<li>\n<p>윈도우에서 프로그램이 응답없음 되는 경우가 타임아웃을 이용하는 방법의 대표적인 예입니다.</p>\n</li>\n<li>\n<p>데이터베이스의 경우 운영체제보다 데드락 처리가 복잡합니다. 데이터베이스는 일관성이 깨지면 안되므로 데이터 조작 시에 lock을 얻고 작업을 하는데, 여러 lock을 얻고 작업을 하다가 프로세스가 종료되면 데이터에 문제가 생길 수 있습니다.</p>\n<p>따라서 이를 해결하기 위해 데이터베이스는 체크포인트와 롤백을 사용합니다. <code class=\"language-text\">체크포인트</code>는 작업을 하다가 문제가 발생하면 그 상태로 되돌아가기 위한 표시입니다. 체크포인트를 설정하면 현재의 시스템 상태를 저장해야겠죠? 이렇게 하드디스크에 저장된 형태를 <code class=\"language-text\">snap shot</code>이라고 합니다. <code class=\"language-text\">롤백</code>은 문제가 발생하면 저장된 스냅샷을 복원해서 시스템을 체크포인트 시점으로 되돌리는 것입니다.</p>\n</li>\n<li>\n<p>위 방법이 운영체제에도 적용됩니다. 윈도우에서 ‘시스템 복원’이 스냅샷과 롤백을 이용해서 운영체제를 복원시키는 것입니다.</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>자원 할당 그래프 이용하기 (무거운 데드락 검출)</p>\n<ul>\n<li>위에서 언급한 대로, task가 너무 많기 때문에 자주 발생하지 않는 데드락을 찾기 위해 자원 할당 그래프를 유지하면서 모든 자원을 감시하는 것은 어렵습니다. 그래프를 유지하고, 업데이트하고, 사이클이 있는 지 없는 지를 계속해서 확인해야 하기 때문에 오버헤드가 듭니다. (오버헤드를 줄이기 위해서 자원이 할당될 때마다 사이클 검사를 하는 것이 아니고 일정 시간마다 하는 방법도 있습니다.)</li>\n<li>자원 할당 그래프를 이용해서 검출할 때 데드락을 검출하려면, <u><strong>그래프에서 사이클이 있는 지</strong></u>를 확인하면 됩니다.</li>\n<li>하지만 만약 단일 자원이 아닌 여러 프로세스가 동시에 쓸 수 있는 다중 자원인 경우에는 자원 할당 그래프의 사이클만으로는 데드락을 판단할 수 없습니다. <u><strong>기다리는 자원이 없는, 즉 작업이 끝날 수 있는 프로세스에 대해서 화살표를 지우면서, 모두 지운 후에 사이클이 남아 있는 지</strong></u>를 확인해야 합니다. (더 자세한 건 다중 자원일 경우 자원 할당 그래프 알아보기… <a href=\"https://www.geeksforgeeks.org/resource-allocation-graph-rag-in-operating-system/\">Multi-instances RAG</a>)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"회복\" style=\"position:relative;\"><a href=\"#%ED%9A%8C%EB%B3%B5\" aria-label=\"회복 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>회복</h3>\n<ul>\n<li>\n<p>데드락이 일어난 프로세스를 <u><strong>강제종료</strong></u>합니다. 또한 강제 종료된 프로세스가 실행하기 전에 시스템 역시 <u><strong>복구</strong></u>해야 합니다. 복구를 할 때는 명령어가 실행될 때 체크 포인트를 만들어서 가장 최근에 검사 시점으로 돌아가는 식으로 합니다. 물론 계속해서 체크 포인트를 만드는 것도 시스템에 부하를 주기 때문에 체크포인트를 무분별하게 사용하지 않고 선택적으로 사용해야 합니다.</p>\n</li>\n<li>\n<p>이 때 <u><strong>강제종료하는 방법</strong></u>에도 여러가지가 있습니다.</p>\n<ol>\n<li>\n<p>전체를 동시에 강제 종료하기</p>\n<p>하지만 종료된 프로세스들이 다시 동시에 작업을 시작하면 또 데드락이 발생할 수가 있습니다. 그러므로 전체 종료된 후에 순차적으로 실행시켜야 하고, 이 때 순서의 기준도 필요합니다.</p>\n</li>\n<li>\n<p>하나씩 종료하기</p>\n<p>데드락을 일으킨 프로세스 중 하나를 골라서 순서대로 종료하면서, 또 데드락의 상태 파악을 상태합니다. 그렇다면 이 때도 순서대로 종료하기 위해 기준(우선순위가 낮은 프로세스를 먼저 종료한다든가… 우선순위가 같은 경우 작업시간이 짧은 프로세스.. 혹은 자원을 많이 사용하는 프로세스를 먼저 종료시킨다든가)이 필요합니다.</p>\n</li>\n</ol>\n</li>\n</ul>\n<hr>\n<blockquote>\n<p>👀 다음을 참고하여 작성했습니다.</p>\n<ul>\n<li><a href=\"http://www.yes24.com/Product/Goods/62054527\">쉽게 배우는 운영체제</a></li>\n<li>학부 수업</li>\n<li><a href=\"https://github.com/gyoogle/tech-interview-for-developer/\">@gyoogle/tech-interview-for-developer</a></li>\n</ul>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BDdeadlock--%EA%B5%90%EC%B0%A9-%EC%83%81%ED%83%9C\">📓 데드락(deadlock) | 교착 상태</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4%EB%9E%80\">📌 데드락이란?</a></p>\n</li>\n<li>\n<p><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\">📌 데드락이 발생하는 경우</a></p>\n<ul>\n<li><a href=\"#1-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%9E%90%EC%9B%90%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\">1. 시스템 자원을 사용하는 경우</a></li>\n<li><a href=\"#2-%EA%B3%B5%EC%9C%A0-%EB%B3%80%EC%88%98\">2. 공유 변수</a></li>\n<li><a href=\"#3-%EC%9D%91%EC%9A%A9-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8\">3. 응용 프로그램</a></li>\n<li><a href=\"#%EC%8B%9D%EC%82%AC%ED%95%98%EB%8A%94-%EC%B2%A0%ED%95%99%EC%9E%90-%EB%AC%B8%EC%A0%9C-dining-philosophers\">식사하는 철학자 문제 (Dining Philosophers)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#--%EB%8D%B0%EB%93%9C%EB%9D%BD-%EB%B0%9C%EC%83%9D-u%ED%95%84%EC%9A%94u%EC%A1%B0%EA%B1%B4-4%EA%B0%80%EC%A7%80\">📌  데드락 발생 <u><strong>필요</strong></u>조건 4가지</a></p>\n<ul>\n<li><a href=\"#1-%EC%83%81%ED%98%B8-%EB%B0%B0%EC%A0%9C-mutual-exclusion\">1. 상호 배제 <code class=\"language-text\">Mutual exclusion</code></a></li>\n<li><a href=\"#2-%EB%B9%84%EC%84%A0%EC%A0%90-no-preemption\">2. 비선점 <code class=\"language-text\">No preemption</code></a></li>\n<li><a href=\"#3-%EC%A0%90%EC%9C%A0%EC%99%80-%EB%8C%80%EA%B8%B0-hold-and-wait\">3. 점유와 대기 <code class=\"language-text\">Hold-and-wait</code></a></li>\n<li><a href=\"#4-%EC%9B%90%ED%98%95-%EB%8C%80%EA%B8%B0-circular-wait\">4. 원형 대기 <code class=\"language-text\">Circular wait</code></a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%8D%B0%EB%93%9C%EB%9D%BD-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\">📓 데드락 해결 방법</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%98%88%EB%B0%A9%ED%95%98%EA%B8%B0-prevention\">📌 예방하기 (Prevention)</a></p>\n<ul>\n<li><a href=\"#1-%EC%83%81%ED%98%B8-%EB%B0%B0%EC%A0%9C-%EC%98%88%EB%B0%A9\">1. 상호 배제 예방</a></li>\n<li><a href=\"#2-%EB%B9%84%EC%84%A0%EC%A0%90-%EC%98%88%EB%B0%A9\">2. 비선점 예방</a></li>\n<li><a href=\"#3-%EC%A0%90%EC%9C%A0%EC%99%80-%EB%8C%80%EA%B8%B0-%EC%98%88%EB%B0%A9\">3. 점유와 대기 예방</a></li>\n<li><a href=\"#4-%EC%9B%90%ED%98%95-%EB%8C%80%EA%B8%B0-%EC%98%88%EB%B0%A9\">4. 원형 대기 예방</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#--%ED%9A%8C%ED%94%BC%ED%95%98%EA%B8%B0-avoidance\">📌  회피하기 (Avoidance)</a></p>\n<ul>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\">문제점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EA%B2%80%EC%B6%9C-%EB%B0%8F-%ED%9A%8C%EB%B3%B5%ED%95%98%EA%B8%B0\">📌 검출 및 회복하기</a></p>\n<ul>\n<li><a href=\"#%EA%B2%80%EC%B6%9C\">검출</a></li>\n<li><a href=\"#%ED%9A%8C%EB%B3%B5\">회복</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"September 27, 2022","title":"데드락(deadlock) | 교착 상태","categories":"운영체제","author":"goldggyul","emoji":"🍽","imageEmoji":null},"fields":{"slug":"/os-003-deadlock/"}},"site":{"siteMetadata":{"siteUrl":"https://goldggyul.github.io","comments":{"utterances":{"repo":"goldggyul/goldggyul.github.io"}}}}},"pageContext":{"slug":"/network-001-handshake/","nextSlug":"/til-003/","prevSlug":"/os-003-deadlock/"}},"staticQueryHashes":["1956554647","2938748437","3350743975","3454833782"]}